{% extends 'base.html' %}
{% load common_tags %}
{% load urs_tags roles_tags %}
{% block section %}
{% load humanize %}
<div>
<script src="/static/js/jquery.simplePopup.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="/static/slick/slick.css">
<link rel="stylesheet" type="text/css" href="/static/slick/slick-theme.css">
<link href="/static/css/jsgantt.css" rel="stylesheet" type="text/css" />
<script src="/static/slick/slick.js" type="text/javascript" charset="utf-8"></script>
<style>
.timeline_p {
    word-break: break-all;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
}
</style>
<script type="text/javascript">
    $(document).on('ready', function() {
     
        $(".center").slick({
        autoplay: true,
       /* dots: true,*/
        infinite: true,
        slidesToShow: 4,
        slidesToScroll: 1,
        responsive: [
            {
              breakpoint: 1190,
              settings: {
                slidesToShow: 4,
                slidesToScroll: 1,
                  infinite: false,
              }
            },
            {
              breakpoint: 1024,
              settings: {
                slidesToShow: 3,
                slidesToScroll: 1,
                infinite: false,
              }
            },
            {
              breakpoint: 768,
              settings: {
                slidesToShow: 3,
                slidesToScroll: 1,
                  infinite: false,
              }
            },
            {
              breakpoint: 767,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1,
                  infinite: false,
              }
            }
          ]
      });
    });
</script>
<script type="text/javascript">

$(document).ready(function(){
    $('#popup').click(function(){
	$('#pop1').simplePopup();
    });
});

//Function to filter data by year
function filterData(){
  var selected = [];
  var separator = (window.location.href.indexOf("?")===-1)?"?":"&";
  var param = {};
  $('.year-check-box').each(function(){
    selected.push($(this).attr("id"));
    if ($(this).is(":checked")) {
      selected.push($(this).attr("id"));
    }
    //param+=separator+"year="+$(this).attr("id");
  });
  param = {name : selected}
  window.location.href = window.location.href + $.param(param);
  console.log("Selected years:",$.param(param))
}
</script>
<style>
    .error { color :red;}
    .errorlist li{color :red;}
    #size_upload{color: red;}
    #date_error,#min_max {color : red;}
    .orglogo img {
    object-fit: contain;
}
.key-image-budget {
    margin-top: 81px;
}
.first_section3 .float_section{float: left;margin: 0px 10px}
/*.key-image{
  margin-top: -10px;
}
*/
</style>
<div class="clear"></div>
<!--Green pad starts-->
<section class="green-pad green-height">
	<div class="row">

	<div class="image-pad orglogo ">
	    {% get_org_logo project as org_logo %}
    	<a href="javascript:void(0);"> {% if org_logo.0 %}<img src="{{org_logo.0}}"  alt="" title="" height='117px' width = '100px'> {% else %}<img src="/static/img/GoodCSR_color_circle.png" alt="" title="" height='117px' width = '100px'> {% endif %}</a><a href="javascript:void(0);">
<!--    	<img src="img/logo-n.png" alt="" title="" ></a>-->
    </div>
    <div class="title-left">
    {% get_funder project as project_funders %}
     {% if project_funders.project %}
    <h4><a href="javascript:void(0);" id="popup"><p class="trunc" style="width:620px;">{{project_funders.project.name}} ⓘ<p></a></h4>
    {% else %}
    <h4><a href = '#'>Project Name </a></h4>
    {% endif %}
    <ul>

    	<li><a href="javascript:void(0)"> Funded by: {% if project_funders.funder.organization %} {{project_funders.funder.organization}}  {% else %} {% endif %}</a></li>
        <li> <a href="javascript:void(0)">NGO Partner: {% if project_funders.implementation_partner.organization %}{{project_funders.implementation_partner.organization}} {% else %} {{project_funders.implementation_partner.name}}  {% endif %}</a></li>
    </ul>
    </div>
    
    {% with "generate-report"|make_string:"view" as keystring %}
        {% if request.user.is_superuser or request|has_permission_for_action:keystring %}
    <a id="myBtn1" class="green-link green-link1" href="/report/listing/?slug={{request.GET.slug}}&key=generate-report" style="margin-top:30px;"> <img src="/static/img/generator-report.png" alt=""> &nbsp;Generate Report</a>
    {% endif %}
    {% endwith %}
    

<!--    <a id="myBtn1" class="green-link green-link1" href="/report/survey/quarter/?slug={{request.GET.slug}}" style="margin-top:30px;"> &nbsp;Temp Generate Report</a>-->
<!--    <a id="myBtn1" class="green-link green-link1" href="/report/final/design/?slug={{request.GET.slug}}" style="margin-top:30px;"> &nbsp;Generate Report with design</a>-->

    <!-- <a id="myBtn1" class="green-link green-link1 iframe" href="/report/generation-form/?slug={{request.GET.slug}}" style="margin-top:30px;"> <img src="/static/img/generator-report.png" alt=""> &nbsp;Generate Report</a> -->
        {% get_special_menu_list as menu %}
         <div class="menu-bottom">
            <ul>
            {% for i in menu %}
                {% with i.slug|make_string:"view" as keystring %}
                    {% if request.user.is_superuser or request|has_permission_for_action:keystring %}
                        {% if i.slug == "project-summary" %}
                        <li><a  {% if key == "summary" %} class="active" {% endif %} href="/project/summary/?slug={{request.GET.slug}}&key=summary">Summary</a></li>
                        {% elif i.slug == "updates" %}
                        <li><a  {% if key == "updates" %} class="active" {% endif %} href="/dashboard/updates/?slug={{request.GET.slug}}&key=updates">Updates</a></li>
                        {% elif i.slug == "tasks-milestones" %}
                        <li><a {% if key == "task-milestone" %} class="active" {% endif %} href="/managing/listing/?slug={{request.GET.slug}}&key=task-milestone">Tasks & Milestones</a></li>
                        {% elif i.slug == "budget" %}
                        <li><a {% if key == "budget" %} class="active" {% endif %} href="/manage/project/budget/view/?slug={{request.GET.slug}}&key=budget">Budget</a></li>
                        {% elif i.slug == "files" %}
                        <li><a {% if key == "files" %} class="active" {% endif %} href="/upload/list/?slug={{request.GET.slug}}&model=Project&key=files">Files</a></li>
                        {% elif i.slug == "tranches" %}
                        <li><a {% if key == "tranches" %} class="active" {% endif %} href="/project/tranche/list/?slug={{request.GET.slug}}&key=tranches">Tranches</a></li>
                        {% elif i.slug == "project-tasks" %}
                        <li><a {% if key == "projecttasks" %} class="active" {% endif %} href = "/managing/my-tasks/details/?slug={{request.GET.slug}}&key=projecttasks&status=1">Project Tasks </a></li>
                    {% endif %}
                    {% endif %}
                {% endwith %}
            {% endfor %}
            </ul>
        </div>
<!--     <div class="menu-bottom">-->
<!--        <ul>-->
<!--          <li><a  {% if key == "summary" %} class="active" {% endif %} href="/project/summary/?slug={{request.GET.slug}}&key=summary">Summary</a></li>-->
<!--          <li><a {% if key == "task-milestone" %} class="active" {% endif %} href="/managing/listing/?slug={{request.GET.slug}}&key=task-milestone">Tasks & Milestones</a></li>-->
<!--          <li><a {% if key == "budget" %} class="active" {% endif %} href="/manage/project/budget/view/?slug={{request.GET.slug}}&key=budget">Budget</a></li>-->
<!--          <li><a {% if key == "files" %} class="active" {% endif %} href="/upload/list/?slug={{request.GET.slug}}&model=Project&key=files">Files</a></li>-->
<!--          <li><a {% if key == "tranches" %} class="active" {% endif %} href="/project/tranche/list/?slug={{request.GET.slug}}&key=tranches">Tranches</a></li>-->
<!--<!--            <li><a {% if key == "mytasks" %} class="active" {% endif %} href = "/managing/my-tasks/details/?slug={{request.GET.slug}}&key=mytasks&status=0">My Tasks </a></li>-->
<!--            <li><a {% if key == "projecttasks" %} class="active" {% endif %} href = "/managing/my-tasks/details/?slug={{request.GET.slug}}&key=projecttasks&status=1">Project Tasks </a></li>-->
<!--        </ul>-->
<!--     </div>-->

<!--    <div class="menu-bottom">-->
<!--        <ul>-->
<!--          <li><a  {% if key == "summary" %} class="active" {% endif %} href="/project/summary/?slug={{request.GET.slug}}&key=summary">Summary</a></li>-->
<!--          <li><a  {% if key == "updates" %} class="active" {% endif %} href="/dashboard/updates/?slug={{request.GET.slug}}&key=updates">Updates</a></li>-->
<!--          <li><a {% if key == "task-milestone" %} class="active" {% endif %} href="/managing/listing/?slug={{request.GET.slug}}&key=task-milestone">Tasks & Milestones</a></li>-->
<!--          <li><a {% if key == "budget" %} class="active" {% endif %} href="/manage/project/budget/view/?slug={{request.GET.slug}}&key=budget">Budget</a></li>-->
<!--          <li><a {% if key == "files" %} class="active" {% endif %} href="/upload/list/?slug={{request.GET.slug}}&model=Project&key=files">Files</a></li>-->
<!--          <li><a {% if key == "tranches" %} class="active" {% endif %} href="/project/tranche/list/?slug={{request.GET.slug}}&key=tranches">Tranches</a></li>-->
<!--<!--            <li><a {% if key == "mytasks" %} class="active" {% endif %} href = "/managing/my-tasks/details/?slug={{request.GET.slug}}&key=mytasks&status=0">My Tasks </a></li>-->
<!--            <li><a {% if key == "projecttasks" %} class="active" {% endif %} href = "/managing/my-tasks/details/?slug={{request.GET.slug}}&key=projecttasks&status=1">Project Tasks </a></li>-->
<!--        </ul>-->
<!--     </div>-->
    </div>

<div id="pop1" class="simplePopup">
   <div class="pop-content">
      <div class="img"> <img src="/static/img/GoodCSR_color_circle.png" alt="girl"> </div>
      <div class="course-dtl">
        <h1>{{project.name}} <!-- <sup>PGR</sup> --></h1>
        <ul class="pop-list">
          <li> <img src="/static/img/pop-up/users.jpg">
            <p> No. of beneficiaries <span>{{project.no_of_beneficiaries}}</span> </p>
          </li>
          <li> <img src="/static/img/pop-up/dureation.jpg">
            <p> Program duration <span>{{project.duration}} months </span> </p>
          </li>
          <li> <img src="/static/img/pop-up/dureation.jpg">
            <p> Total Budget <span>₹ {{project.total_budget | intcomma}}</span> </p>
            
          </li>
        </ul>

        <div class="rht-content">
         <ul>
         <li class="fst">
            <h2>Target beneficiaries</h2>
            <p>{% if project.target_beneficiaries.all %}
                {% for i in project.target_beneficiaries.all %}{{i}}{% if not forloop.last %}{{", "}}{% endif %}{% endfor %}
                {% else %}
                <span class="col-md-7">N/A</span>
                {% endif %}</p>
         </li>
         <li class="snd">

            <h2>Cause area</h2>
            <p>{% if project.cause_area.all %}
                {% for i in project.cause_area.all %}{{i}}{% if not forloop.last %}{{", "}}{% endif %}{% endfor %}
                {% else %}
                <span class="col-md-7">N/A</span>
                {% endif %}</p>
            </li>
            </ul>

        </div>
      </div>
      
      <div class="cont-det">
         <h2>Location coverage</h2>
         {% get_projct_location project as project_location %}
         {% if project_location %}
            
            {% for j in project_location %}
            <li style="color:#363636;" > {{j.location.name}}, {{j.location.parent.name}}, {{j.get_program_type_display}}</li>
            {% endfor %}
          
          {% else %}
          <li style="color:#363636;" >N/A</li>
          {% endif %}
          <br>
                
         <h2>About the Program</h2>
<p dangerouslySetInnerHTML={{obj.summary}}>{{project.summary | safe}}</p>

   <div class="concepto-carousel">
         <h1>Pictures and files</h1>
            <!-- carousel starts -->
              <div id="con-carousel" class="owl-carousel">
                {% get_attachments project as attachment %}
              {% for i in attachment %}
                {% if i.attachment_type == 2 %}

        {% if i.document_type == 1 %}<!-- excel -->
        <div class="item">
        <a {% if i.attachment_file %} href="{{image}}/{{i.attachment_file}}" {% else %} href="#" onClick="alert('File Not Found!')" {% endif %}{% if i.attachment_file %}download{% endif %}><img src="/static/img/excell-color.jpg"  height=70 width=63px>
        <h2>{{i.name}} </h2></a>
        </div>
        {% endif %}

        {% if i.document_type == 2 %}<!-- pdf -->
        <div class="item">
        <a {% if i.attachment_file %} href="{{image}}/{{i.attachment_file.url}}{% else %} href="#" onClick="alert('File Not Found!')" {% endif %}" {% if i.attachment_file %}download{% endif %}><img src="/static/img/pdf.jpg" height=70 width=63px>
        <h2>{{i.name}} </h2></a>
        </div>
        {% endif %}
        {% if i.document_type == 3 %}
        <div class="item">
        <a {% if i.attachment_file %} href="{{image}}/{{i.attachment_file.url}}{% else %} href="#" onClick="alert('File Not Found!')" {% endif %}" {% if i.attachment_file %}download{% endif %}><img src="/static/img/wordpress.jpg" height=70 width=63px>
          <h2>{{i.name}} </h2></a>
        </div>
        {% endif %}
        {% if i.document_type == 4 %}<!-- doc -->
        <div class="item">
        <a {% if i.attachment_file %} href="{{image}}/{{i.attachment_file.url}}{% else %} href="#" onClick="alert('File Not Found!')" {% endif %}" {% if i.attachment_file %}download{% endif %}><img src="/static/img/excell-black.jpg" height=70 width=63px >
          <h2>{{i.name}} </h2></a>
        </div>
        {% endif %}


        {% endif %}
        {% endfor %}

             </div>
            <!-- carousel ends -->

            <!-- carousel starts -->


              <div id="img-carousel" class="owl-carousel">
                {% get_attachments project as attachment %}
              {% for  i in attachment %}

              {% if i.attachment_type == 1 %}
                <div class="item">
                  {% if i.attachment_file %}
                    <a href="{{image}}/{{i.attachment_file.url}}" download><img src="{{image}}/{{i.attachment_file.url}}" alt="" height=97 width=156px>
                    <h2>{{i.description}}</h2></a>
                  {% else %}
                  <a href="#"><img src="" onClick="alert('Image Not Found!')" alt="" height=97 width=156px>
                    <h2>{{i.description}}</h2></a>
                  {% endif %}
                </div>
              {% endif %}
                {% endfor %}


             </div>
            <!-- carousel ends -->
      </div>

      </div>
    </div>
</div>
</div>
{% endblock %}
    <!-- Content Header (Page header) -->
<!--<style>
form { 
margin: 0 auto; 
width:450px;
}
</style>-->
    <!-- Main content -->
{% block content %}
<style>
.budget_button{background: #00998b; border: 0px; color:#fff; padding:3px 10px; border-radius:3px;}
</style>
<div class="clear"></div>
<section class="content-part forms_section">
    <div class='container' >
    <div class="white-box">

        <div class="col-xs-12">
          <div class="box">
            <div class="box-header">
              <h3 class="border_line"> Add value for parameter: {{parameter.name}}</h3>
              <!-- <div align="right">
             <a class="btn btn-success" href="/project/parameter/manage/?slug={{parameter.project.slug}}&key={{key}}" ><i class="fa fa-arrow-left" aria-hidden="true"></i> Back</button></a>&#160;<input class="btn btn-primary" type="submit" form="prog_edit" value="Save" />
         </div> -->
            </div>
            <!-- /.box-header -->
            <div class="box-body">
            
            {% if date %}
            <form autocomplete="off" id="prog_edit" action="/project/parameter/value/edit/?id={{ids}}&month={{date1}}" class ="form-horizantal budget_form" method="POST" enctype="multipart/form-data">
            {% else %}
            <form autocomplete="off" id="prog_edit" action="/project/upload/parameter/value/?id={{ids}}" class ="form-horizantal budget_form" method="POST" enctype="multipart/form-data">
            {% endif %}
            
            {% csrf_token %}
             <input name='slug' hidden value="{{slug}}"></input>
                        <div class="row">
                            <div class="col-md-6 nopadding">
                                <div class="col-md-12">
                                    <div class="form-group">
                                    <label>Select Year<font color="red">*</font></label>
                                    <div>
                                <select class='form-control' id='gYear' name='year' onchange="configureDropDownLists(this)">
                                    {% if date %}
                                    <option selected value='{{date.1}}'>{{date.1}}</option>
                                    {% else %}
                                <option value='0'>--Select Year--</option>
                                {% endif %}
                                </select>
                                <p style="color: red;">
                                    
                                <font color=#fc282f><span id="funder_error"></span></font>
                                </p>
                                </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row" id = "month_div">
                            <div class="col-md-6 nopadding">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        
                                        <label>Select Month<font color="red">*</font></label>                                       
                                    <div>
                                        {% if date %}
                                        <select title="Please select year first" class='form-control' id="ddl21" name="month">
                                        <option selected value='{{date.0}}'>{{date.0}}</option></select>
                                        {% else %}
                                <select title="Please select year first" class='form-control' id="ddl2" name="month"></select>
                                {% endif %}
                                <p style="color: red;">
                                    
                                
                                </p>
                                </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <select class='form-control' id="ddl2"></select> -->
                        {% if not key_parameter %}
                        <div class="row">
                                    <div class="col-md-6 nopadding">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            <label>{{parameter.name}} <font color="red">*</font></label>
                                            <input value='{{single_parameter.parameter_value}}' class="form-control" type="number" name="value" id="value{{parameter.id}}" required=True>
                                            </div><font color="green">{% if parameter.instructions %}{{parameter.instructions}}{% else %}{% endif %}</font>
                                        </div>
                                    </div>
                                </div>
                        {% endif %}

                        <!-- {% if not key_parameter %}
                        <div class="row">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    {{parameter.name}} <font color="red">*</font>
                                </label>
                                <div class="col-md-3 col-sm-12 col-xs-12 form-group">
                                    
                                    <input class="form-control" type="number" name="value" id="value{{parameter.id}}" required=True>{% if parameter.instructions %}{{parameter.instructions}}{% else %}{% endif %}
                                </div>

                        </div>
                        {% endif %} -->
                        {% if date %}
                        
                        {% for i,j in main_para %}
                        <div class="row">
                                    <div class="col-md-6 nopadding">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            <label>{{i.name}} <font color="red">*</font></label>
                                            <input value="{{j.parameter_value}}" class="form-control" type="number" name="{{j.id}}" id="value{{i.id}}" maxlength="8" required><br>
                                            {% if i.instructions %}{{i.instructions}}{% else %}{% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        {% endfor %}
                        {% else %}
                        
                        {% for i in key_parameter %}
                        <div class="row">
                                    <div class="col-md-6 nopadding">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            <label>{{i.name}} <font color="red">*</font></label>
                                            <input class="form-control" type="number" name="value[{{i.id}}]" id="value{{i.id}}" maxlength="8" required><br>
                                            {% if i.instructions %}{{i.instructions}}{% else %}{% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        {% endfor %}
                        {% endif %}
                        <div class="col-md-12">
                            <div class="form-group">
                        <input class="budget_button" type="submit" value="Save" onclick="return ddlValidate();" />
                        <a class="btn btn-success"style="margin-right:5px;float: right;" href="/project/parameter/manage/?slug={{parameter.project.slug}}&key={{key}}">Back</button></a>
                        </div>
                        </div>

                    </form>
  </div>
  </div>

  </div>
  </div>
<script src="https://code.jquery.com/jquery-migrate-1.0.0.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://rawgit.com/Pixabay/jQuery-tagEditor/master/jquery.caret.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://rawgit.com/Pixabay/jQuery-tagEditor/master/jquery.tag-editor.js"></script>
<link rel="stylesheet" href="https://rawgit.com/Pixabay/jQuery-tagEditor/master/jquery.tag-editor.css">

<script>
{% if date %}
$("#gYear").prop("disabled", true);
$("#ddl21").prop("disabled", true);
{% endif %}
</script>

<script type="text/javascript">
$('#ddl2').prop('disabled', true);
$('#month_div').hide()
var monthNames = [ "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December" ];
var arr = [];
var year = []
var rem = []
var month_no = Number({{start_date.month}});
var datFrom = new Date({{start_date.year}}, {{start_date.month}}, {{start_date.day}});
if (month_no==12) {
   var datFrom = new Date({{start_date.year}},11, {{start_date.day}});
};
var datTo = new Date({{end_date.year}}, {{end_date.month}}, {{end_date.day}});
var fromYear =  datFrom.getFullYear();
var toYear =  datTo.getFullYear();
var diffYear = (12 * (toYear - fromYear)) + datTo.getMonth();
for (var i = datFrom.getMonth(); i <= diffYear; i++) {
        arr.push(monthNames[i%12]);
    }
for (var j = datFrom.getFullYear(); j <= datTo.getFullYear(); j++) {
        year.push(j);
    }
var optionsAsString = "";
for(var i = 0; i < arr.length; i++) {
    optionsAsString += "<option value='" + arr[i] + "'>" + arr[i] + "</option>";
}
$( 'select[name="month"]' ).append( optionsAsString );

var optionsAsString1 = "";
for(var i = 0; i < year.length; i++) {
    optionsAsString1 += "<option value='" + year[i] + "'>" + year[i] + "</option>";
}
$( 'select[name="year"]' ).append( optionsAsString1 );

var index;
var start=0;
var end;
var master_list;
var month_validate = {{parameter_value_month | safe}};
var month_validate1 = {{parameter_value_month | safe}};
console.log(month_validate);
var master_list1 = [];
var index = arr.indexOf("January");
for (i=0; i < year.length; i++) {

    first_list = arr.slice(start,index)
    start=index;
    index += 12
    
    // alert(first_list);
    Array.prototype.diff = function(a) {
    return this.filter(function(i) {return a.indexOf(i) < 0;});
    };
    first_list2 = first_list.diff( month_validate );
    first_list3 = first_list2
    debugger;
    // var rem = []
    // rem = first_list.diff(first_list3)
    // for (i=0; i < rem.length; i++) {
    //     var removeItem = rem[i]
    //     month_validate.splice( $.inArray(removeItem,month_validate) ,1 );
    // }
    // // month_validate.splice( $.inArray(rem,month_validate) ,1 );
    // alert(first_list2);
    master_list1[i] = first_list2
    
}
// alert(master_list1);
// master_list1 = master_list1.filter(function(n){ return n != undefined });
// if (master_list1[1] == undefined){i=0;console.log("aditya")};
 function configureDropDownLists (type){
    $("#ddl2 option").remove();
    $('#ddl2').removeAttr("title");
    $('#ddl2').prop('disabled', false);
    $('#month_div').show()
    document.getElementById('funder_error').innerHTML=""
    var selected_year = type.options[type.selectedIndex].value;
 for (var i in year) {
   if (selected_year == year[i]) {
    
    rrr = master_list1[i]
    // alert(master_list1);
    // debugger;
    for (i = 0; i < rrr.length; i++) {
                createOption(ddl2, rrr[i], rrr[i]);
            }
    
  }
}
}
function createOption(ddl2, text, value) {
        //alert(ddl2);
        var opt = document.createElement('option');
        opt.value = value;
        opt.text = text;
        ddl2.options.add(opt);
    }
</script>



</script>

<script type="text/javascript">
        function ddlValidate() {
            var e = document.getElementById("gYear");
            var para_type = e.options[e.selectedIndex].value;
            if (para_type == 0) {
                document.getElementById('funder_error').innerHTML="Please select Year"
                return false;
            } else {
                document.getElementById('funder_error').innerHTML=""
                return true;
            }
        }

    </script>


<script>
  $( function() {
    $( "#id_start_date" ).datepicker();
    $( "#id_end_date" ).datepicker();
  } );
  </script>

<script type="text/javascript">
$(document).ready(function() {
    var max_fields      = 6; //maximum input boxes allowed
    var wrapper         = $(".input_fields_wrap"); //Fields wrapper
    var add_button      = $(".add_field_button"); //Add button ID
    
    var x = 1; //initlal text box count
    $(add_button).click(function(e){ //on add input button click
        e.preventDefault();
        if(x < max_fields){ //max input box allowed
            x++; //text box increment
            $(wrapper).append('<div><input class="form-control" type="text" name="name['+x+']"/><input class="form-control" type="number" placeholder="value" name="value['+x+']" id="id_number"><a href="#" class="remove_field">Remove</a></div>'); //add input box

        }
        document.getElementById("activity_count").value = x;

    });
    
    $(wrapper).on("click",".remove_field", function(e){ //user click on remove text
        e.preventDefault(); $(this).parent('div').remove(); x--;
    })
});
</script>

<script type="text/javascript">
$('#pie').hide();
$("#para_type").change(function () {
  if($(this).val() == "PIN" || $(this).val() == "PIP")
    $('#pie').show();
    $('#name').hide();
    $('#value').hide();
    //$("#inputArea").append('<input name="inputs[]" />');
});
</script>

<script type="text/javascript">
    $(document).ready(function(){
        //$('select[multiple=multiple]').multiSelect()
        $( function() {
            $('#id_start_date').datepicker({ dateFormat: 'yy-mm-dd',
            onSelect: function(dateText, inst) {
        var start = new Date($('#id_start_date').val());
        var end = new Date($('#id_end_date').val());
        var today = new Date();

        if (end <= start) {
            document.getElementById('dateError1').innerHTML="Start date should be less than End date"
        };
        if (end > start) {
            document.getElementById('dateError1').innerHTML=""
        };
        var months = (end.getFullYear() - start.getFullYear()) * 12;
        months += end.getMonth() - start.getMonth();
        document.getElementById("id_duration").value = months;
    } });
            });

        $("#prog_edit").validate({
            rules :
            {
                name : {required:true},
                //program : {required:true},
                no_of_beneficiaries : {required:true},
                target_beneficiaries : {required:true},
                cause_area : {required:true},
                id_end_date: { greaterThan: "#id_start_date" },
            },
            messages:
            {
                name : {required : "<font color=#fc282f>Please enter the name</font>"},
                //program:{required:"<font color=#fc282f>Please select the program</font>"},
                no_of_beneficiaries:{required:"<font color=#fc282f>Please enter the no of beneficiaries</font>"},
                target_beneficiaries : {required : "<font color=#fc282f>Please enter primary beneficiary</font>"},
                cause_area : {required : "<font color=#fc282f>Please enter primary area of focus</font>"},
                id_end_date : {required : "<font color=#fc282f>Please enter the name</font>"},

            },
            highlight: function (element) {
                $(element).parent().addClass('error')
            },
            unhighlight: function (element) {
                $(element).parent().removeClass('error')
            },
        });
        });
</script>
<script>
//Toggle
        
         $('.user-menu').on('click',function(){
          $('.dropdown-menu').slideToggle();
          
        });
         $(document).ready(function(e) {    
    /*Content Show/Hide */
    $('.hide-cont').hide();
    $('.close-cont').hide();
    $('.view-cont').click(function(){
        $('.hide-cont').slideDown(350);
        $('.close-cont').show();
        $('.view-cont').hide();
    });
    $('.close-cont').click(function(){
        $('.hide-cont').slideUp(350);
        $('.close-cont').hide();
        $('.view-cont').show();
    }); 
 });
    
</script>
<style>
.error{color:red !important; min-width: 200px;}
</style>
  <div class="control-sidebar-bg"></div>
<script>
function RemoveProduct() {
    if ($('#id_start_date').val()>$('#id_end_date').val()){
        return false;
        } else {
            return true;
        }
    }
</script>

<script>
$.extend($.validator.messages, {  
    maxlength: $.validator.format("Please enter less than {0} numbers in input field ")
});
</script>

</div>
</div>

{% endblock %}
