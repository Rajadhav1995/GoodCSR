{% extends 'base.html' %}

{% block midpart %}
<section class="content">
<div class="row">
<div class="col-xs-12">
<div class="box">

<div class="box-header">
{% if messages %}
<!-- <div class="span12">
{% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        <b>{{ message|safe }}</b>
    </div>
{% endfor %} -->
<script type="text/javascript">
alert("Sorry, You cant Select more than 3 featured RFP")
</script>
<!-- </div> -->
{% endif %}
    {% if model_name = 'activity' %}
    <h3 class="box-title">Activity List</h3>
    {% endif %}
    {% if model_name = 'task' %}
    <h3 class="box-title">Task List</h3>
    {% endif %}
    

</div>
<script>
function deleteoject(id) {
    var status = confirm("Are you sure to Delete notification permanently");
    console.log(key);
    if(status == true){
        window.location.href="/masterdata/status-change/?id="+id"/&key="+key
        //"/masterdata/status-change/?id="+id"/&key="+key
        alert("Notification Deleted Successfully")

    }
}
</script>
<script>
function regFunction(id,key) {
    var status = confirm("Are you sure to Delete");
    console.log(key);
    if(status == true){
        window.location.href="/masterdata/status-change/?id="+id+"&key="+key
        alert(" Deleted Successfully")

    }
}

</script>
<!-- /.box-header -->
<div class="box-body table-responsive">
    <table id="example1" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
            {% if model_name == 'activity' %}
            <tr>
                <th>Activity Name</th>
                <th>Super category</th>
                <th>Activity type</th>
                <th>Status</th>
                <th>Description</th>
                <th>Update</th>
                <th>Action</th>
            </tr>
            {% endif %}
            
            {% if model_name == 'task' %}
            <tr>
                <th>Task Name</th>
                <th>User</th>
                <th>Created on</th>
                <th>Activity</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Actual Start Date</th>
                <th>Actual End Date</th>
                <th>Status</th>
                <th>Update</th>
                <th>Action</th>
            </tr>
            {% endif %}
            
            {% if model_name == 'Milestones' %}
            <tr>
                <th>Activity Name</th>
                <th>User</th>
                <th>Created on</th>
                <th>Activity type</th>
                <th>Status</th>
                <th>Update</th>
                <th>Action</th>
            </tr>
            {% endif %}
            
        </thead>

        {% if model_name == 'activity'%}
            <a class="btn btn-primary" href="/manage-task/Activity/ActivityForm/add/"><i class="fa fa-edit"></i> Add</button>  </a>
        {% for i in obj_list %}
        <tr>
            <td>{{i.name}}</a></td>
            <td>{{i.super_category}}</td>
            <td>{{i.get_activity_type_display}}</td>
            <td>{{i.get_status_display}}</td>
            <td>{{i.description|safe}}</td>
            <td><a class="btn btn-primary" href=""><i class="fa fa-edit"></i> Edit</button> </a></td>
            {% ifequal i.active 2 %}
            <td><a class="btn btn-default" href="" onclick="return deactivate()">Deactivate</button></a></td>
            {% else %}
            <td><a class="btn btn-success" href="" onclick="return activate()">Activate</button></a></td>
            {% endifequal %}
        </tr>
        {% endfor %}
        {% endif %}
        
        {% if model_name == 'task'%}
            <a class="btn btn-primary" href="/manage-task/Task/TaskForm/add/"><i class="fa fa-edit"></i> Add</button>  </a>
        {% for i in obj_list %}
        <tr>
            <td><a href="/masterdata/ngo-detail/?id={{i.id}}">{{i.name}}</a></td>
            <td>{{i.user}}</td>
            <td>{{i.created | date:'Y-m-d'}}</td>
            <td>{{i.activity}}</td>
            <td>{{i.start_data}}</td>
            <td>{{i.end_date}}</td>
            <td>{{i.actual_start_date}}</td>
            <td>{{i.actual_end_date}}</td>
            <td>{{i.get_status_display}}</td>
            <td><a class="btn btn-primary" href="/manage-task/Task/TaskForm/edit/{{obj_list.slug}}"><i class="fa fa-edit"></i> Edit</button>  </a></td>
            {% ifequal i.active 2 %}
            <td><a class="btn btn-default" href="/masterdata/ngo-status/?id={{i.id}}&status=2" onclick="return deactivate()">Deactivate</button></a></td>
            {% else %}
            <td><a class="btn btn-success" href="/masterdata/ngo-status/?id={{i.id}}&status=3" onclick="return activate()">Activate</button></a></td>
            {% endifequal %}
        </tr>
        {% endfor %}
        {% endif %}
        
    </table>
    {% if obj_list.has_other_pages %}
    <ul class="pagination">
        {% if obj_list.has_previous %}
        <li><a href="?page={{ obj_list.previous_page_number }}">Previous</a></li>
        {% else %}
        <li class="disabled"><span>Previous</span></li>
        {% endif %}
        {% for i in obj_list.paginator.page_range %}
        {% if obj_list.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
        {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
        {% endif %}
        {% endfor %}
        {% if obj_list.has_next %}
        <li><a href="?page={{ obj_list.next_page_number }}">Next</a></li>
        {% else %}
        <li class="disabled"><span>Next</span></li>
        {% endif %}
    </ul>
    {% endif %}
    <!-- /.content -->
</div>

<!-- /.content-wrapper -->

</body>
{% endblock %}
{% block script %}
<!--<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>-->
<script src="/static/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/static/plugins/datatables/dataTables.bootstrap.min.js"></script>
<link rel="stylesheet" href="/static/plugins/datatables/dataTables.bootstrap.css">
<!-- Main content -->

<script language="javascript" type="text/javascript">
    <!--
    function approve(url) {
        alert("{{obj_list.name}} Approved");

    }
    function reject(url) {
        alert("{{obj_list.name}} Rejected");

    }
    function activate(url) {
        alert("{{obj_list.name}} Activated");

    }
    function deactivate(url) {
        alert("{{obj_list.name}} Deactivated");

    }
    // -->
</script>
<script type="text/javascript">
    $(function () {
      $("#example1").DataTable({
        "order":[[2, 'desc']],
        "stateSave": true,
        "columnDefs": [
    { "width": "17%", "targets": [4,5] }
  ]
  });
    });
</script>

{% endblock %}
