{% extends 'base.html' %}
{% block section %}
{% endblock %}
{% block content %}
{% load urs_tags %}
{% load common_tags %}
<!--Green pad Ends-->
<!--Content part starts-->
<style>
.budget_button{background: #00998b; border: 0px; color:#fff; padding:3px 10px; border-radius:3px;}
</style>
<section class="content-part forms_section">
    <div class="row">
    <div class="content-top">
       
    </div>
    <div class="white-box white-pad">
    <div class="box-body table-responsive">
        <h3>Project Report List - <a href ="/project/summary/?slug={{request.GET.slug}}&key=summary">{{project.name}}</a></h3>
       
        <!-- <a href='/report/pdf/view/'>view</a> -->
    {% if msg %}
        <h3> {{msg}} <a style="text-decoration:underline;color:#169776" href= '/manage/project/budget/create/?slug={{project.slug}}'>Click here to create Budget</a> </h3>
    {% else %}
         <div style="float: right;"><a class="budget_button iframe" href="/report/generation-form/?slug={{project.slug}}&key=add">Create new Project Report</a></div>
    {% endif %}
    {% if report_obj %}
    <table id="example1" class="table table-striped table-bordered textalign_boottom" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Report type</th>
                <th>Report Duration</th>
                <th>From Date - To Date</th>
                
            </tr>
        </thead>
        
        {% for i in report_obj %}

        <tr>
            <!-- <td><a href="/project/summary/?slug={{i.slug}}">{{i.start_date}}</a></td> -->
            <td>{{i.get_report_type_display}}</td>
            <td>{% get_report_quarters i.start_date i.end_date budget_quarters as report_duration%}Quarter {{report_duration.0}}</td>
<!--            <td>{{i.start_date | date:"d-m-Y"}} - {{i.end_date | date:"d-m-Y"}}</td>-->
            <td>{{report_duration.1}}</td>
            <!-- <td>{{i.get_active_display}}</td> -->
            <td><a class="budget_button" href="/report/remove/detail/?slug={{project.slug}}&report_id={{i.id}}&key=1" target="_blank">View Report</button></a></td>

            <td><a target="_blank" class="budget_button" href="/report/pdf/view/?slug={{project.slug}}&report_id={{i.id}}&key=2 ">Download Report</button></a></td>
             {% if i.report_type == 2 %}
            <td><a class="budget_button" href="/report/final/design/?slug={{project.slug}}&report_id={{i.id}}&key=monthly-report">Edit Report</button></a></td>
             {% else %}
                <td><a class="budget_button" href="/report/final/design/?slug={{project.slug}}&report_id={{i.id}}">Edit Report</button></a></td>
             {% endif %}
            <td><a class="btn btn-danger delete_function" href="/project/remove/record/?id={{i.id}}&model=ProjectReport" onclick="return confirm('Are you sure you want to delete the report?')">X</button></a></td>


             <!-- <td><a class="budget_button" href="/report/remove/detail/?slug={{project.slug}}&report_id={{i.id}}&key=1" target="_blank"> Remove View </button></a></td> -->

             <!-- <td><a class="budget_button" href="/report/pdf/view/?slug={{project.slug}}&report_id={{i.id}}&key=1" target="_blank"> Down Report (old) </button></a></td> -->


        </tr>

        {% endfor %}

  </tbody>
</table>
    {% endif %}
        </div>
          <div class="pagination_no">
        <div id="pagination-long"></div>
    </div>
    </div>
    
    
    
    </div>
</section>
<link rel="stylesheet" href="/static/css/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="/static/js/jquery.fancybox.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $(".iframe").fancybox({
        type: 'iframe'
    });
});
</script>

<script>
//Toggle
        
         $('.user-menu').on('click',function(){
          $('.dropdown-menu').slideToggle();
          
        });
         $(document).ready(function(e) {    
    /*Content Show/Hide */
    $('.hide-cont').hide();
    $('.close-cont').hide();
    $('.view-cont').click(function(){
        $('.hide-cont').slideDown(350);
        $('.close-cont').show();
        $('.view-cont').hide();
    });
    $('.close-cont').click(function(){
        $('.hide-cont').slideUp(350);
        $('.close-cont').hide();
        $('.view-cont').show();
    }); 
 });
    
</script>
<!--Content part Ends-->
{% endblock %}

<!-- jQuery (necessary for JavaScript plugins) -->
<script type="text/javascript" src="js/jquery.selectbox-0.2.js"></script>


    
<script type="text/javascript" src="/static/js/ddsmoothmenu.js"></script>
<script type="text/javascript" src="/static/js/jquery.mmenu.min.all.js"></script>
<script type="text/javascript" src="/static/js/common.js" /></script>

<!--<script type="text/javascript" src="js/jquery.scrollbox.js"></script>-->
<script src="/static/js/jquery.nicescroll.min.js"></script>



    <script type="text/javascript">
   
    
    var expanded = false;

function showCheckboxes() {
  var checkboxes = document.getElementById("checkboxes");
  if (!expanded) {
    checkboxes.style.display = "block";
    expanded = true;
  } else {
    checkboxes.style.display = "none";
    expanded = false;
  }
}
    </script>
    <script>
  $(document).ready(function() {
  
    var nice = $("html").niceScroll();  // The document page (body)
    
    $("#div1").html($("#div1").html()+' '+nice.version);
    
    $("#boxscroll, .table-resp tbody").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true}); // First scrollable DIV

    
  });
</script>
<!--  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="crossorigin="anonymous"></script>-->
<script src="/static/js/materialize-pagination.js"></script>
    <script>
    $(function() {
        $(function() {
            $('#pagination-long').materializePagination({
                align: 'center',
                lastPage: 10,
                firstPage: 1,
                useUrlParameter: false,
                onClickCallback: function(requestedPage) {
                    console.log('Requested page from #pagination-long: ' + requestedPage);
                }
            });
        });
    });
    </script>
<script src="js/sorttable.js"></script>

<script>
$(function(){
    $("#dest").addSortWidget();
});
</script>

    
    <script src="/static/js/fm.tagator.jquery.js"></script>
    <script>
        $(function () {
            var $input_tagator1 = $('#input_tagator1');
            var $activate_tagator1 = $('#activate_tagator1');
            $activate_tagator1.click(function () {
                if ($input_tagator1.data('tagator') === undefined) {
                    $input_tagator1.tagator({
                        autocomplete: ['first', 'second', 'third', 'fourth', 'fifth', 'sixth', 'seventh', 'eighth', 'ninth', 'tenth'],
                        useDimmer: true
                    });
                    $activate_tagator1.val('destroy tagator');
                } else {
                    $input_tagator1.tagator('destroy');
                    $activate_tagator1.val('activate tagator');
                }
            });
            $activate_tagator1.trigger('click');
        });
    </script>
</body>
</html>

