{% load urs_tags %}
{% load common_tags %}
{% load humanize %}
{% load question_tags %}
<!DOCTYPE html>

<!--[if lt IE 7]>      
<html class="no-js lt-ie9 lt-ie8 lt-ie7">
   <![endif]-->
   <!--[if IE 7]>         
   <html class="no-js lt-ie9 lt-ie8">
      <![endif]-->
      <!--[if IE 8]>         
      <html class="no-js lt-ie9">
         <![endif]-->
         <!--[if gt IE 8]><!-->
         <html class="no-js">
            <!--<![endif]-->
            <head>
               <meta charset="utf-8">
               <meta http-equiv="X-UA-Compatible" content="IE=edge">
               <link rel="icon" type="image/png" href="/static/img/favicon.ico">
               <title>GoodCSR | Project Report</title>
               <meta name="description" content="">
               <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
               <link href="https://fonts.googleapis.com/css?family=Work+Sans" rel="stylesheet">
               <link rel="stylesheet" href="/static/css/report-bootstrap.min.css">
               <link rel="stylesheet" href="/static/css/report-style.css">
               <link href="/static/css/jsgantt.css" rel="stylesheet" type="text/css" />
             <!--   <link rel="stylesheet" href="/static/css/tinyscrollbar.css"> -->
               <!-- <link rel="stylesheet" href="/static/css/style.css"> -->
                <style>
      .container {width: 960px !important}
      .pmu_formtable{text-align: center;width: 100%; float:left; border-top:0px solid; margin-bottom: 45px; }
       .pmu_formtable tr{padding: 50px;float: left;width:100%;background:#f1f3e9;}
      .pmu_formtable td{border-right:1px solid #dedede; width: 33%; float: left; border-top:0px solid !important}
      .pmu_formtable td:nth-last-child(1){border-right:0px solid #dedede}
      .pmu_formtable td span{font-size:34px; color:#00998b; padding-left: 30px;font-family: "Work Sans" }
      .pmu_formtable td p{font-size:14px; font-weight: 600;font-family: "Work Sans"; color:#3a3a3a; }

      .pmu_formtable_parameter{text-align: center;width: 250px; float:left; border-top:0px solid; margin-bottom: 45px; }
       .pmu_formtable_parameter tr{padding: 50px;float: left;width:100%;background:#f1f3e9;}
      .pmu_formtable_parameter td{border-right:1px solid #dedede; width: 33%; float: left; border-top:0px solid !important}
      .pmu_formtable_parameter td:nth-last-child(1){border-right:0px solid #dedede}
      .pmu_formtable_parameter td span{font-size:34px; color:#00998b; padding-left: 30px;font-family: "Work Sans" }
      .pmu_formtable_parameter td p{font-size:16px; font-weight: 600;font-family: "Work Sans"; color:#3a3a3a; }

      @charset "utf-8";
@import url('https://fonts.googleapis.com/css?family=Work+Sans:100,200,300,400,500,600,700,800,900');
@import url('https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900');
body { font-family:"Work Sans";font-weight: normal; color: #232323;font-size: 14px; margin: 0px; padding: 0px;}
ul{padding-left: 0px}



.margin_top_50{float:left; width: 100%}
.margin_top_50 ul li{float:left;list-style-type: none; margin-left: 30px}
.margin_top_50 ul li:nth-child(1){border-right:1px solid #dedede;margin-left: 0px}
.margin_top_50 ul li img{margin-right:30px}
.text-head h1{color:#a63967; font-size: 28px; font-weight: bold;float: left; width:100%}
.text-head p{color:#019875; float: right; font-size: 14px;text-transform: uppercase;}
hr{border-bottom: 2px solid #a63967; width: 100%;margin-bottom: 7px;float: left}
.margin_top_50 ul{padding-left: 0px}
.margin_25{float:left;width:100%;}
.margin_25 .float_right{float: right}
.margin_25 h1{float: left;position: relative; font-weight: 600}
.margin-botom35 h2{color:#019875; font-weight:600; font-size: 14px; margin-bottom: 5px}
/*.margin-botom35{margin-bottom: 35px;}*/
.margin-50{float: left; width:100%}
.margin-botom35 h2 span:nth-last-child(1){float: right;background: #fff; position: relative;color:#232323; top: 10px; padding: 0px 0px 0px 10px;}
.margin-botom35 h2 span:nth-child(1){background: #fff; position: relative; top: 10px; padding: 0px 10px 0px 0px;}
.margin-botom35 h3 span:nth-last-child(1){float: right;background: #fff; position: relative; top: 5px; padding: 0px 0px 0px 10px;}
.margin-botom35 h3 span:nth-child(1){background: #fff; position: relative; top: 5px; padding: 0px 10px 0px 0px;font-size: 14px}
.margin-botom35 h3{font-weight:600; border-bottom: 1px solid #dedede;width: 100%; font-size: 16px; margin-top:-10px}
.border_text h2{color:#019875; font-weight:600; border-bottom: 1px solid #dedede;width: 100%}
.quarter_updates p{border-bottom: 1px solid #dedede ;padding-bottom: 5px; font-size: 14px}
.quarter_updates{}
.quarter_updates span{font-size: 14px}
.color-red{color:#a63967;margin: 0px; }
.school_project h1{margin: 0px; border-bottom: 1px solid #dedede; padding-bottom: 10px;margin-bottom: 20px; font-size: 20px}
.school_project {margin-bottom: 40px}
.school_project .row p:nth-last-child(1){font-weight: 600}
.location p{color:#019875; border-bottom: 1px solid #dedede; padding-bottom: 5px;font-weight: 600; font-size: large;}
.location ul li{list-style-type: disc; color:#019875}
.location ul li span{color:#232323; font-size: 14px;}
.location ul{padding-left: 15px;}
.location{margin-bottom: 60px;margin-top: 30px; float: left; width: 100%;}
.location h5{color:#363636 ; font-weight: normal; font-size: 14px; font-family: "Work Sans"; }
footer{margin:30px 0px; float: left; width: 100%}
.margin-top40{}
.quarter_updates h4{font-size: 16px; font-weight: 600}}
.quarter_updates p{color:#424242; font-size: 10px; border-bottom: 1px solid #dedede; padding-bottom: 4px}
.margin_30{}
.color_green{font-weight: 600; color:#019875;border-bottom: 1px solid #dedede; padding-bottom: 5px; margin-bottom:10px !important; margin-top: 0px;}
.color_grey{color:#666666}



.parameter-textbottom{position: absolute; top:180px}
.parameter-textbottom .color_green{border-bottom: 0px}

.margin_top30{float: left; width:100%; height: 100%;}

/* tab-resp */ 
.tab-resp1    { float:left; width:100%; -moz-border-radius: 5px;-webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; }
.tab-resp1 th   { background:#f1f3e9; color:#ba5932; text-align:center; font-weight:600; padding:15px 5px 10px; border-right:1px solid #dee0d5; font-size: 14px }
.tab-resp1 td { padding:2px; font-size:14px; color:#202020; text-align:center; border-right:1px solid #dee0d5; border-bottom:1px solid #dee0d5;font-size: 14px}
.tab-resp1 th:first-child { border-radius:5px 0 0 0; padding-left:20px;}
.tab-resp1 th:last-child  { border-radius:0px 5px 0 0; border-right:none;}
.tab-resp1 td:last-child  { border-right:none;}
.tab-resp1 .table-tr td { color:#006861; font-weight:600;}

/* tab-resp2 */ 
.tab-resp2    { float:left; width:100%; -moz-border-radius: 5px;-webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; }
.tab-resp2 th   { background:#f1f3e9; color:#ba5932; text-align:center; font-weight:600; padding:15px 5px 10px; border-right:1px solid #dee0d5;  }
.tab-resp2 td { padding:5px; font-size:14px; color:#202020; text-align:center; border-right:1px solid #dee0d5; border-bottom:1px solid #dee0d5;}
.tab-resp2 th:first-child { border-radius:5px 0 0 0; }
.tab-resp2 th:last-child  { border-radius:0px 5px 0 0; border-right:none;}
.tab-resp2 td:last-child  { border-right:none;}
.tab-resp2 .table-tr td { color:#006861; font-weight:600;}

.budget_section td input, .budget_section td select{height: 36px; border-radius: 5px;border: 1px solid #c4c4c4; font-size: 14px;}
.budget_section td:nth-child(2n-2){padding-left:0px; padding: 5px 10px;}
.budget_section td:nth-child(1) span{background:url(../../img/cross-delete-black.png) no-repeat; padding: 0px 2px 4px;}
.budget_section td:nth-child(1) span:hover{background:url(../../img/cross-delete-color.png) no-repeat }
.parameter .numeric_parameter li:nth-last-child(1) {
    margin-right: 8px !important;
}
.col-md-4, .col-md-8{
  float: left;
}
.col-md-4{width: 30%}
.col-md-8{width: 70%}

@media screen and (min-width: 980px) {} 
@media screen and (min-width: 992px) {} 
@media screen and (min-width: 1000px) {} 
@media screen and (min-width: 1200px) {}

.page_height{/*margin:50px 0px; float: left;*/ width:100%; min-height: 850px}
.header_page_height{/*margin:50px 0px; float: left;*/ width:100%; min-height: 1000px}
.table_header_page_height{}
.padding_top30{padding-top: 50px}
.page_break  {page-break-before: always !important; }
.extra_height{
  height: :100px;
}


/*@media print {
            tr.page_break_table  { display: block !important; page-break-after: always !important; page-break-inside: avoid !important;}
        }*/
    table{border-collapse: collapse}
  th,td{padding:5px;border:1px solid #bbb;}      


.pmu_formtable td{border-top: 0px !important; border-left: 0px; border-bottom: 0px}
.pmu_formtable{border-top: 0px !important ;}


.pmu_formtable_parameter td{border-top: 0px !important; border-left: 0px; border-bottom: 0px}
.pmu_formtable_parameter{border-top: 0px !important ;}


.table-scroll {
  position:relative;
  max-width:100%;
  margin:auto;
  overflow:hidden !important;
  border:0px solid #000;
    padding-left:0px !important;
    height:10px !important;
}
.table-wrap {
  width:100%;
  overflow:auto;
}
.table-scroll table {
  width:100%;
  margin:auto;
  border-collapse:separate;
  border-spacing:0;
}
.table-scroll th, .table-scroll td {
  padding:5px 10px;
  background:#fff;
  white-space:nowrap;
  vertical-align:top;
}
.table-scroll thead, .table-scroll tfoot {
  background:#f9f9f9;
}

#time-line-pad{ float: left;
width: 100%;
overflow-y: hidden;
overflow-x: hidden;
margin-bottom: 20px;}

.time-line    { float:left; width: auto; height:440px; position:relative; background:#f1f3e9; }
.time-line{    width: 100% !important;}
.time-line-bdr  { float:left; height:6px; background:#d2bf78; /*background:url(../img/timeline-border.png) no-repeat left #d2bf78; border-bottom:6px solid #d2bf78;*/ position: absolute; top:50%; left:0; margin-top:-3px; width:100%;}
.event-up   { float:left; width:200px; padding:0 8px; border-right:1px solid #fff; position:relative; min-height:440px; background:rgba(0,0,0,0.03); }
/*.event-up:first-child { padding-left:30px; width:230px;}*/
.event-up .event-pad/*:nth-child(2n-1)*/ { background:rgba(0,0,0,0.03)}.event-up .event-img   { position:absolute; bottom:56%;-webkit-box-shadow: 0px 0px 5px -1px rgba(51,51,51,0.4);-moz-box-shadow: 0px 0px 5px -1px rgba(51,51,51,0.4);box-shadow: 0px 0px 5px -1px rgba(51,51,51,0.4); background:#fff; padding:10px; width:182px; float:left}
.event-up .event-img img  { float:none;}
.event-up .event-img::after { position: absolute; bottom: -8px; left: 0px; content: ""; display: block; width: 0; height: 0; margin: 0 auto; right: 0; border-left: 9px solid transparent;  border-right: 9px solid transparent;  border-top: 8px solid #fff;}
.event-up .event-date   { position:absolute; top:55%; font-size:22px; color:#00998b; font-weight:700; float:left; width:92%; text-align:center;}
.event-up .event-date span{ font-size:16px; font-weight:400; width:100%; float:left;}
.white-box .event-img p { font-size:14px; padding-top:10px; float:left; padding-left:0;}
.event-circle { float:left; width:24px; height:22px; background:url(../../img/event-circle.png) no-repeat center; position:absolute; top:50%; left:50%; margin:-11px 0 0 -12px;} 
.current-event .event-circle { float:left; width:32px; height:29px; background:url(../../img/event-current.png) no-repeat center; top:49%; left:48%;}
.event-down   { float:left; width:200px; padding:0 8px; border-right:1px solid #fff; position:relative; min-height:440px; list-style-type: none; }
.event-down .event-img    { position:absolute; top:56%;-webkit-box-shadow: 0px 0px 5px -1px rgba(51,51,51,0.4);-moz-box-shadow: 0px 0px 5px -1px rgba(51,51,51,0.4);box-shadow: 0px 0px 5px -1px rgba(51,51,51,0.4); background:#fff; padding:10px; width:182px; float:left}
.event-down .event-img img  { float:left; list-style-type: none;}
.event-down.red-down .event-img { padding:0 0 10px; text-align:center;}
.event-down.red-down .event-img img { float:none; margin-top:-17px;}
.white-box  .event-down.red-down .event-img p { text-align:center; padding:0 10px;} 
.event-down .event-img h3 { float:left; width:100%; text-align:center; padding:15px 0px; text-shadow: 1px 1px #666; color:#f5e9bd; text-transform:uppercase; font-size:14px; }

.event-down .event-img::before { position: absolute; top: -8px; left: 0px; content: ""; display: block; width: 0; height: 0; margin: 0 auto; right: 0; border-left: 9px solid transparent;  border-right: 9px solid transparent;  border-bottom: 8px solid #fff;}
.event-down.red-down .event-img::before {border-left: 9px solid transparent;  border-right: 9px solid transparent;  border-bottom: 8px solid #a64d65;}
.event-down .event-date   { position:absolute; bottom:56%; font-size:22px; color:#00998b; font-weight:700; float:left; width:92%; text-align:center; line-height:18px;}
.white-box .event-down .event-img p { font-size:14px; padding-top:0px; padding-bottom:10px; line-height:14px; float:left; padding-left:0;}
.event-down .event-date span{ font-size:16px; font-weight:400; width:100%; float:left;}
.event-up.red-down .event-img::before {border-left: 9px solid transparent;  border-right: 9px solid transparent;  border-top: 8px solid #a64d65;}
.event-up .event-img::before {
    position: absolute;
    bottom: -8px;
    left: 0px;
    content: "";
    display: block;
    width: 0;
    height: 0;
    margin: 0 auto;
    right: 0;
    border-left: 9px solid transparent;
    border-right: 9px solid transparent;
    border-bottom: 0px solid #fff;z-index:10;
}
.event-up {text-align: center; list-style-type: none;}
.event-up.red-down .event-img img{position: relative;top:-12px;}

.parameter-text h4.color_green {  font-size: 14px;}
.parameter-text p {  font-size: 14px;}
.parameter-text{margin-top:15%}
.subs, sup {
    position: static;
    font-size: 70%;
    line-height: 0;
    vertical-align: baseline;
  }

.gchartgrid{
  overflow: hidden !important;
}


thead { display: table-header-group !important; }
tfoot { display: table-row-group !important; }
tr { page-break-inside: avoid !important; }

tr { page-break-inside: avoid; overflow: visible !important; }
</style>
<script>
 var lengths = 0;
 
</script>

            </head>

            <!-- onload="window.print()" -->
            <body >
              <div>
               <header>

                  <div class="">
                     <div>
                        <img src="/static/img/report/header-img.jpg" style="width:100%">
                     </div>
                     {% get_questions locals_list.block1 projectreportobj 1 "false" as ques %}
                    {% for i in ques.0 %}
                     {% if i.q_name == 'cover_image' %}
                     <div>
                        <img src="{{image_url}}/{{i.answer}}" style="width:100%; height:700px">
                      <div>
                        <img src="/static/img/report/bottomslider.jpg" style="width:100%;margin-top: -1px;">
                    </div>
                     </div>
                    {% endif %}

                  </div>
                 {% endfor %}
                  <div class="container">

                    {% for i in ques.0 %}
                    {% if i.q_type == 'OT' %}
                     <div class="margin_top_50" >
                        <ul>
                          {% get_auto_populated_questions i.q_id  projectobj projectreportobj 1 "false" as sub_questions %}
                            {% for sub in sub_questions.0 %}
                            {% if sub.q_name == 'client_logo' %}
                           <li><img src="{{image_url}}{{sub.answer}}" height = 70 width = 100></li>
                          {% endif %}

                          {% if sub.q_name == "logos" %}
                           <li> <img src="{{image_url}}{{sub.answer}}" height = 70 width = 100></li>
                          {% endif %}

                            {% endfor %}
                        </ul>
                     </div>
                     {% endif %}

                     <div class="text-head">
                      {% if i.q_name == 'report_name' %}
                        <h1>{{i.answer}}</h1>
                        {% endif %}
                        {% if i.q_type == 'OT' %}
                        {% get_auto_populated_questions i.q_id  projectobj projectreportobj 1 "false" as sub_questions %}
                        {% for sub in sub_questions.0 %}
                        {% if sub.q_name == 'client_name' %}

                        <h5 style="float:left;width:100%">by {{sub.answer}}</h5>
                        {% endif %}
                        {% if sub.q_name == 'report_type' %}
                        <h5 style="color: #019875;float: right;font-size: 12px;text-transform: uppercase;">{{sub.answer}} Report </h5>
                        {% endif %}
                        {% if sub.q_name == 'client_name' %}
                        
                        {% endif %}
                        {% endfor %}
                        {% endif %}
                    </div>
                    {% if i.q_type == 'OT' %}
                    {% get_auto_populated_questions i.q_id  projectobj projectreportobj 1 "false" as sub_questions %}
                    {% for sub in sub_questions.0 %}
                    {% if sub.q_name == 'prepared_by' %}
                    <p style="float:left; width:auto">{{sub.q_text}} {{sub.answer}} </p>
                    {% endif %}
                    {% if sub.q_type == 'APT' and sub.q_name == 'report_duration' %}
                    {% get_from_to_dates sub.answer as duration %}
                    <p style="text-align:right;width:auto; float:right">{{duration.0}} to {{duration.1}}</p>
                    {% endif %}
                    {% endfor %}
                    {% endif %}
                    {% endfor %}

                     
                  </div>
               </header>
               </div>

               <div class="page_break"></div>
               <div class="container" style="margin-left:-3px;">
                  <div>
                     <h1 style="font-size:24px;">Index</h1>
                  </div>
                  <div class="page_height">
                    <!--Dynamic getting of the contents of index page (STARTS)                  -->

                     {% for key,value in contents.iteritems %}

                            <div class="margin-botom35 border_line">
                             {% if value == 'Annexure' %}
                              {% elif value == 'About the project' %}
                                <h2>{{value}}</h2>
                             {% else %}
                                <h2>{{value}}</h2>
                              {% endif %}
                              {% for k,v in quarters.iteritems %}
                              {% if value == k %}
                              {% for ky,val in v.iteritems %}
                              {% get_quarter_names ky number_dict as quarter_name %}
                              <h3><span> {{quarter_name}} Quarter - ({{val}})</span><span></span></h3>
                              {% endfor %}
                              {% endif %}
                              {% endfor %}
                            </div>
                     {% endfor %}
                     <!--Dynamic getting of the contents of index page (END)                  -->
                  </div>

               </div>

              <div class="page_break"></div>
               
               <div class="container" style="margin-left:-5px;">
                  <div class="margin_25">
                     
                  </div>
                  
                  <div class="school_project">
                    <div>
                        <p class="color-red">PROJECT</p>
                        <h1>{{projectobj.name}}</h1>
                    </div>
                     {% get_questions locals_list.block2 projectreportobj 2 "false" as ques %}
                    {% for i in ques.0 %}
                    {% if i.q_type == 'OT' %}
                    {% get_auto_populated_questions i.q_id  projectobj projectreportobj 2 "false" as sub_questions %}
                    {% for sub in sub_questions.0 %}
                    
                    {% if sub.q_name == "donor" %}
                    <div class="col-md-6">
                        <div class="row">
                            <p class="color-red">{{sub.q_text}}</p>
                            <p>{{sub.answer}}</p>
                        </div>
                    </div>
                    {% endif %}
                    {% if sub.q_name == "implement_ngo" %}
                    <div class="col-md-6">
                        <div class="row">
                            <p class="color-red">IMPLEMENTATION NGO</p>
                            <p>{{sub.answer}}</p>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                    {% endif %}
                    {% endfor %}
                     {% get_questions locals_list.block2 projectreportobj 2 "false" as ques %}
                    {% for i in ques.0 %}
                    {% if i.q_type == 'OT' %}
                    <table class="table pmu_formtable">
                        <tr>
                            {% get_auto_populated_questions i.q_id  projectobj projectreportobj 2 "false" as sub_questions %}
                            {% for sub in sub_questions.0 %}
                            {% if sub.q_name == "project_budget" %}
                            <td >
                                <p>Total Budget</p>
                                <img src="/static/img/rupee.png"><span>{{sub.answer | currency}}</span>
                            </td>
                            {% endif %}
                            {% if sub.q_name == "no_of_beneficiaries" %}
                            <td>
                                <p>Project Beneficiaries </p>
                                <img src="/static/img/user.png"><span>{{sub.answer | intcomma}}</span>
                            </td>
                            {% endif %}
                            {% if sub.q_name == "project_duration" %}
                            <td>
                                <p>Project Duration</p>
                                {% report_duration sub.answer as duration %}
                                <img src="/static/img/time-calculater.png"><span>{{duration}}<sub style="bottom:0px; font-size: 20px;">months</sub></span>
                            </td>
                            {% endif %}
                            {% endfor %}
                        </tr>
                    </table>
                    {% endif %}
                    {% endfor %}
                </div>
                <!-- ######################### -->
                <div class="white-box">
                    <ul class="key_parameter parameter">
                        <div class='numeric_parameter'></div>
                    </ul>
                </div>
                 {% get_questions locals_list.block2 projectreportobj 2 "false" as ques %}
                {% for i in ques.0 %}
                {% if i.q_type == 'OT' %}
                {% get_auto_populated_questions i.q_id  projectobj projectreportobj 2 "false" as sub_questions %}
                {% for sub in sub_questions.0 %}
                {% if sub.q_name == "location" %}
                <div>
                    <div class="location">
                        <p>Location Coverage</p>
                        <ul>
                            {{sub.answer}}
                        </ul>
                    </div>
                </div>
                {% endif %}
                <br>
                {% if sub.q_name == "program_description" %}
                <div>
                    <div class="location">
                        <p>About the Program</p>
                        <h5>{{sub.answer | striptags}}</h5>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
                {% endif %}
                {% endfor %}
            
        </div>
        <!--third page -->
       
        <!--                    third page contents ends -->
        <!--        fourth page contents starts-->
         <div class="page_break"></div>
        <div class="container" style="margin-left:-5px;">
            
            
             {% get_questions locals_list.block2 projectreportobj 2 "false" as ques %}
            {% for i in ques.0 %}
            {% if i.q_type == 'OT' %}
            {% get_auto_populated_questions i.q_id  projectobj projectreportobj 2 "false" as sub_questions %}
            {% for sub in sub_questions.0 %}
            
            {% if sub.q_name == 'project_objective' %}
            <div class="location margin-top40 page_height">
                <p>Objective of the project</p>
                <h5>{{sub.answer | striptags}}</h5>
            </div>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endfor %}
            
        </div>
        <!--fourth page contents end-->
        <!--fifth page contents starts that is previous quarter updates that is milestone and timeline progress -->
        {% for i,v in previousquarter_list.items %}
        {% with forloop.counter as j %}
        {% getreport_status report_id v 1 as reportupdates %}
        {% if reportupdates.0 == True %}
        <div class="page_break"></div>
        <div class="container" style="margin-left:-5px;">
        
        <div class='page_height'>
        {% get_final_questions previous_questionlist 3 reportupdates.1 v report_id "false" as final_previous_list %}
        {% for quest in final_previous_list.0 %}
        <div class="">
            {% if quest.qtype == "APT" %}
            {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
            {% if quest.slug == "heading" %}
            <h4 style="margin:0px">{{text|title}}</h4>
            {% endif %}
            {% if quest.slug == "duration" %}
            <p> Quarter {{text}} </p>
            {% endif %}
            {% endif %}

            {% if quest.slug == "key-achievements-in-this-quarter" %}
            <div class="margin_30 prev_banner ">
                <h5 class="color_green">Key Achievements in this quarter</h5>
                <!-- timeline slider -->
                {% if timeline_json != '[]' %}

                 {% get_timeline_json_pdf projectobj v as timeline %}
                 {% for t in timeline.3 %}
                <div id="scrollbar1">
                    <div class="viewport">
                        <div class="overview">
                            <div id="time-line-pad">
                                <div class="time-line">
                                    <div class="time-line-bdr"></div>
                                    <ul>
                                        {% to_and v as timeperiod %}
                                        <div class="timeline-slide_{{timeperiod}}_{{t}}"></div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="scrollbar">
                    <div class="track">
                        <div class="thumb">
                            <div class="end">
                            </div>
                        </div>
                    </div>
                </div>
                 <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

                 <script type="text/javascript">
                    //var loop_count = $('#loop_count').val()
                    {% to_and v as timeperiod %}
                    var wrapper = $(".timeline-slide_" + "{{date_range.1}}"); //Fields wrapper
                    {% get_timeline_json_pdf projectobj v as timeline %}
                    var timeloop = {{timeline.3}}
                    var timeline_lengths = {{timeline.1}};
                    var timeline_data= {{timeline.0|safe}}

                    var loc_url = '{{image}}'
                    var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun","July", "Aug", "Sep", "Oct", "Nov", "Dec"];
                    console.log(timeline_lengths);
                    console.log(timeloop.length)
                   // for(var j=1;j<=timeloop.length;j++)
                    // { 

                        i=lengths;
                        if (timeline_lengths >5){
                        lengths = lengths + 4;
                        }
                        else{
                            lengths = timeline_lengths;
                        }
                         console.log(i)
                        console.log(lengths)
                        
                        console.log(timeline_data)
                        var wrapper = $(".timeline-slide_" + "{{timeperiod}}"+"_"+{{t}});

                        for (i; i < lengths ; i++)
                        {
                          console.log(i)
                          var obj = timeline_data[i]
                          var name = obj.name;
                        var url =  loc_url +"/"+"/static/img/milestone-icon.png";
                          console.log(obj);
                          if (obj.url) {
                            var url = loc_url + obj.url;
                            }
                        else{
                            var url =  loc_url +"/"+"/static/img/milestone-icon.png";
                            };
                            var date = obj.date
                            var f = new Date(date);
                            
                            var nn = f.getMonth();
                            var ids = obj.id
                            //var date1 = f.getDate()
                            var datelist = date.split("-")
                            var date1 = datelist[2]
                            var month1 = datelist[1]
                            var month = months[month1-1];
                            //alert(date1);
                            function delete_upload()
                            {
                                //return confirm("Are you sure you want to delete this item?");
                                alert("Are you sure?");
                            }
                          if (i % 2) {
                            if (obj.type == 'image') {

        $(wrapper).append('<li class="event-up">&nbsp;<div class="event-img"><img height=112px width=162px src='+url+' alt=""><p class="timeline_p">'+name+'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+month+'</span></div></li>');
        }else{
          $(wrapper).append(' <li class="event-up red-down current-event">&nbsp;<div class="event-img"><h3>Milestone Achieved</h3><div class= "image_tag"><img src="/static/img/milestone-icon.png" alt=""></div><p class="timeline_p">'+ name +'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+ month +'</span></div></a></li>');
        };
      } else {
        if (obj.type == 'image') {
        $(wrapper).append('<li class="event-down">&nbsp;<div class="event-img"><img height=112px width=162px src='+url+' alt=""><p class="timeline_p">'+name+'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+month+'</span></div></li>');
        }else{
          $(wrapper).append('<li class="event-down red-down current-event">&nbsp;<div class="event-img"><h3>Milestone Achieved</h3><img src="/static/img/milestone-icon.png" alt=""><p class="timeline_p">'+ name +'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+ month +'</span></div></a></li>');
                            };
                          };
                         
                        }
                       
                     // }
                </script>
                
{% if forloop.counter|divisibleby:2 %}
<div class="page_break"></div>
{% endif %}
{% endfor %}
                {% else %}
                No Key Acheivements in this Quarter
                {% endif %}
            </div>
            {% endif %}
            <!--                            this is for milestone section-->
            {% if quest.slug == "milestone-section" %}
            {% get_milestone_list quest reportupdates.1 as act_mile_list %} <!-- to loop the number of activity obj -->
            {% for mileobj in act_mile_list %} <!--  for loop for milestone list -->
            {% with forloop.counter as m_count %}
            <div class="margin_30 prev_banner milestone1">
                {% get_previous_subquestions quest as milestone_questions %}
                {% for mile_quest in milestone_questions %}
                {% if mile_quest.slug == "milestone-name" %}
                <h5 class="color-red">MILESTONE</h5>
                {% get_milestone_name mileobj as name %}
                <h5 class="color_green" style="margin:0px">{{name}}</h5>
                {% endif %}
                {% if mile_quest.slug == "milestone-description" %}
                <p><strong>About the Milestone</strong></p>
                <h5 style="color:#666; font-weight:normal">{{mileobj.description|safe}}</h5>
                {% endif %}
                {% endfor %}
                {% for mile_quest in milestone_questions %}
                {% get_mile_act_images mileobj as imagelist %}
                {% if imagelist %}
                {% for imageobj in imagelist %}
                <div class="col-md-6" style="padding:0px">
                    {% if mile_quest.slug == "upload-picture" %}
                    {% if imageobj.attachment_file %}
                    <img  src="{{image_url}}{{imageobj.attachment_file.url}}"  height = 400 width = 500 >
                    {% endif %}
                    {% endif %}
                    {% if mile_quest.slug == "picture-description" %}
                    <p>{{imageobj.description|safe}}</p>
                    {% endif %}
                    {% endfor %} <!-- for loop ends for imagelist-->
                </div>
                {% endif %}  <!-- ends for imagelist condition -->
                {% endfor %}  <!-- ends for milestone questions -->
            </div>
            {% endwith %}
            {% endfor %}  <!-- ends for milestonelist -->
            {% endif %} <!-- end of milestone question loop -->
        </div>
        <!-- page height div ends -->
        {% endfor %} <!--  endfor loop for previous questions list-->
        </div>
        </div>
        <!-- page 5th contents ends here -- >
            <!--        page 6th contents starts here -->
        <div class="page_break"></div>
        <div class="container" style="margin-left:-10px;">
        <div class='page_height'>
            {% get_final_questions previous_questionlist 3 reportupdates.1 v report_id "false" as final_previous_list %}
        {% for quest in final_previous_list.0 %}
            <div class="">
                {% if quest.qtype == "APT" %}
                {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                {% if quest.slug == "heading" %}
                <h4 style="margin:0px">{{text|title}}</h4>
                {% endif %}
                {% if quest.slug == "duration" %}
                <p> Quarter {{text}} <span style="float:right">Key Achievements in this quarter</span> </p>
                {% endif %}
                {% endif %}
                {% if quest.slug == "budget-utlization-tranches" %}
                <div class="margin_top30 page_height">
                    <P class="color_green" style="border-bottom:0px">Budget Utilisation and tranches</P>
                    <div class="white-box">
                        <div>
                            <table class="tab-resp1" id="example11" cellpadding="0" cellspacing="0" border="1">
                                <thead>
                                    <tr>
                                        <th>Super Category</th>
                                        <th>Heading</th>
                                        <th>Subheading</th>
                                        <th>Total Planned</th>
                                        <th>Total Utilized</th>
                                        <th>Units Type</th>
                                        <th>Units</th>
                                        <th>Rate</th>
                                        <th> Planned</th>
                                        <th> Utilized</th>
                                        <th>Variance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for row in budget_period %}
                                    <tr class = "data_row">
                                        {% get_budget_lineitem row projectobj as lineitemobj %}
                                        <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                        <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                        <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                        {% get_line_total row projectobj as line_total %}
                                        <td align="right" class="sticky-cell">{{line_total}}</td>
                                        {% get_utlizedline_total row projectobj as utilized_amount %}
                                        <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                        <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                        {% get_quarter_details row i projectobj as line_itemobj %}
                                        <td align="right" class=""> {{line_itemobj.unit}} </td>
                                        <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                        <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                        <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                        <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <br><br>

                    {% get_tranches v tranche_list as filtered_tranches %}
                    {% if filtered_tranches.1.planned_amount %}
                    <div class="white-box">
                        <div>
                            <table class="tab-resp1" cellpadding="0" cellspacing="0" border="0" style="margin-top:25px;">
                                <thead>
                                    <tr>
                                        <th align="center">Tranche No.</th>
                                        <th>Due Date</th>
                                        <th>Planned Amount</th>
                                        <th>Actual Disbursement</th>
                                        <th>Recommended Disbursement</th>
                                        <th> Utilized</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% get_tranches v tranche_list as filtered_tranches %}
                                    
                                    {% for i in filtered_tranches.0 %}
                                    {% with forloop.counter as rnum %}
                                    <tr>
                                        <td>{{rnum}}</td>
                                        <td>{{i.due_date|date:"j M Y"}}</td>
                                        <td> Rs. {% if  i.planned_amount %} {{i.planned_amount}} {% else %} 0 {% endif %}</td>
                                        <td> Rs. {% if  i.actual_disbursed_amount %} {{i.actual_disbursed_amount}}  {% else %} 0 {% endif %} </td>
                                        <td> Rs. {% if  i.recommended_amount %} {{i.recommended_amount}}  {% else %} 0 {% endif %} </td>
                                        <td> Rs. {% if  i.utilized_amount %} {{i.utilized_amount}}  {% else %} 0 {% endif %} </td>
                                    </tr>
                                    {% endwith %}
                                    {% endfor %}
                                    <tr bgcolor="#f1f3e9" class="table-tr">
                                        <td>Total</td>
                                        <td>&nbsp;</td>
                                        <td>Rs. {% if planned_amount %} {{filtered_tranches.1.planned_amount}} {% else %} 0 {% endif %} </td>
                                        <td>Rs. {% if actual_disbursed_amount %}{{filtered_tranches.1.actual_disbursed_amount}} {% else %} 0 {% endif %} </td>
                                        <td>Rs. {% if recommended_amount %} {{filtered_tranches.1.recommended_amount}}{% else %} 0 {% endif %} </td>
                                        <td>Rs. {% if utilized_amount %}{{filtered_tranches.1.utilized_amount}} {% else %} 0 {% endif %}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
                {% endfor %} <!-- previous question loops ends here -->
            </div>
            <!-- page height div ends -->
            
        </div>
        </div>
        <!--  container div ends here -->
        <!--page 6th contents ends here -->
        {% endif %} <!-- if condition to check object is present or not -->
        {% endwith %} <!-- for loop counter ends here -->
        <div class="page_break"></div>.

        {% endfor %} <!-- the main previous quarters loop ends here -->
        <!--page 7th starts here ie.. Current quarter loop starts here, page contains gantt chart,activities loop gantt chart script written at last -->
        <!--Current Quarter Updates star.ts here -->
        <div class="page_break"></div>.
        {% for i,v in currentquarter_list.items %}

        {% with forloop.counter as j %}
        {% getreport_status report_id v 2 as reportupdates %}
        {% if reportupdates.0 == True %}
        
        <div class="container">
        <div class="margin_25">
        
        <div class='page_height'>
        {% get_final_questions current_questionlist 4 reportupdates.1 v report_id "false" as final_questionlist %}
        {% for quest in final_questionlist.0 %}
        <div style="margin-left:-10px">
            {% if quest.qtype == "APT" %}
            {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
            {% if quest.slug == "heading" %}
            <h4 style="margin:0px">{{text|title}}</h4>
            {% endif %}
            {% if quest.slug == "duration" %}
            <p> First Quarter {{text}} </p>
            {% endif %}
            {% endif %}
            <!--for gantt chart div -->
            <!--                            this is for milestone and activity graph-->
            {% if quest.slug == "milestones-activities-snapshot" %}
            <div>
                <div class="col-md-12 report_text " style="padding:0px">
                    <p class="color_green" style="border-bottom:0px">Milestones & Activities</p>
                    <!--                                <img src="/static/img/imgpage0802.jpg" style="width:100%">-->
                    <div class=" white-box ">
                        <div id="gwContainer" className="col-md-12 gantt" style="padding-top: '25px', position: 'relative', height: 'auto', width:'100%'">
                        </div>
                    </div>
                </div>
            </div>
            <!--     SCRIPT FOR GANTT CHART CURRENT QUARTER UPDATES STARTS HERE                       -->
            <script src="/static/js/jquery.min.js"></script>
            <script src="/static/js/jsgantt.js" type="text/javascript"></script>
            <link href="/static/css/jsgantt.css" rel="stylesheet" type="text/css" />
            <script type="text/javascript" src="/static/js/ddsmoothmenu.js"></script>
            <script>
                {% get_gantt_details v projectobj as taskdict %}
                var jsonData = {{taskdict|safe}}
                console.log(jsonData);
                var g = new JSGantt.GanttChart(document.getElementById('gwContainer'), 'week');
                // console.log(jsonData.tasks);
                // Get today and tomorrows date
                var cur = new Date();
                var tom = new Date();
                var project = "";
                project = jsonData.project[0].slug;
                tom.setDate(tom.getDate() + 1);
                var curDate = cur.getFullYear() + '-' +
                  (('' + (cur.getMonth() + 1)).length < 2 ? '0' : '') + (cur.getMonth() + 1) + '-' +
                  (('' + cur.getDate()).length < 2 ? '0' : '') + cur.getDate();
                
                var tomDate = tom.getFullYear() + '-' +
                  (('' + (tom.getMonth() + 1)).length < 2 ? '0' : '') + (tom.getMonth() + 1) + '-' +
                  (('' + tom.getDate()).length < 2 ? '0' : '') + tom.getDate();
                // Get today and tomorrows date
                $.each(jsonData.supercategories, function (i) {
                  superId = 1, activity_type = 'Core', taskCompletion = 0, superName = 'Super Category';
                  if (this.id != null) {
                    superId = this.id;
                  }
                  superName = this.name;
                  var superDesc = this.description;
                  if (superName.toLowerCase() != "location") {
                    g.AddTaskItem(new JSGantt.TaskItem(superId, superName, '', '', 'ggroupblack', '', 0, null, 0, 1, 0, 1, '',
                      '', superDesc, g));
                  }
                  // console.log("Super");
                  // console.log(superId, superName, '', '', 'ggroupblack', '', 0, null, 0, 1, 0, 1, '',
                  //   '', superDesc);
                });
                $.each(jsonData.activities, function (i) {
                  var activityId = 11,
                    superId = 1,
                    activity_type = 'Core',
                    taskCompletion = 0,
                    activityName = 'Activity';
                  if (this.id != null) {
                    activityId = this.id.toString();
                  }
                  if (this.super_category != null) {
                    superId = this.super_category;
                    if (this.id != null) {
                      activityId = this.super_category.toString() + activityId;
                    }
                  }
                  // console.log("ActID", activityId);
                  activityName = this.name;
                  var activityDesc = this.description;
                  g.AddTaskItem(new JSGantt.TaskItem(activityId, activityName, '', '', 'ggroupblack', '', 0, '', 0, 2, superId,
                    1, '', '',
                    activityDesc, g));
                  // console.log("Act");
                  // console.log(activityId, activityName, '', '', 'ggroupblack', '', 0, '', 0, 2, superId,1, '', '',activityDesc);
                });
                $.each(jsonData.tasks, function (i) {
                  var taskId = 111,
                    tempId = 1,
                    activityId = 11,
                    superId = 1,
                    activity_type = 'Core',
                    taskCompletion = 0,
                    taskName = 'Task',
                    taskStatus = 'gtaskred',
                    pStartDate = curDate,
                    pEndDate = tomDate,
                    eStartDate = curDate,
                    eEndDate = tomDate,
                    slug = "",
                    link = "";
                  if (this.id != null) {
                    taskId = this.id;
                    tempId = this.id;
                  }
                  // added the script 16th-Nov
                  if(this.task_progress != null || this.task_progress != undefined){
                        taskCompletion = this.task_progress;
                  }
                  // ended th script
                  if (this.activity != null) {
                    activityId = this.activity;
                  }
                  if (this.slug != null) {    
                    slug = this.slug;
                  }
                  // activity = jsonData.activities.filter(function( i ) {
                  //   if(i.id == activityId){return i.super_category;}
                  // });
                  $.each(jsonData.activities, function () {
                    if (this.id == activityId) {
                      activity_type = this.activity_type;
                      if (this.super_category != null) {
                        superId = this.super_category;
                      }
                    }
                  });
                  if (superId != null && activityId != null && taskId != null) {
                    taskId = superId.toString() + activityId.toString() + taskId.toString();
                  }
                  if (superId != null && activityId != null) {
                    activityId = superId.toString() + activityId.toString();
                  }
                  activityId = parseInt(activityId);
                  // console.log("Slug and project", slug,project);
                  if ( slug != null && project != ""){    
                    // var domain = "";   
                    // if(window.location.hostname == ""){    
                    //   domain = "http://goodcsrpmu.mahiti.org";   
                    // }    
                    link = "/managing/my-tasks/details/?slug="+project+"&key=projecttasks&status=1#"+slug;    
                  }
                  taskName = this.name;
                  pStartDate = this.start_date;   
                  pEndDate = this.end_date;
                  eStartDate = this.expected_start_date;
                  eEndDate = this.expected_end_date;
                  if (activity_type == "Core") {
                    switch (this.status) {
                      case "Ongoing":
                        taskStatus = 'gtaskblue';
                        break;
                      case "Open":
                        taskStatus = 'gtaskyellow';
                        break;
                      case "Close":
                        taskStatus = 'gtaskgreen';
                        break;
                      default:
                        taskStatus = 'gtaskblue';
                        break;
                    };
                  }
                  // For Milestones
                  var completionDate = this.actual_end_date;
                  console.log('Complete date', completionDate);
                  $.each(jsonData.milestones, function (i) {
                    var mileId = 111, 
                    mileStatus = 'gmilestone redmile '
                    depTask = [];
                    depTask = this.task;
                    mileName = this.name;
                    if (this.id != null) {
                      mileId = this.id;
                    }
                    // added the script 16th-Nov
                    maxDate = new Date('1970-01-01');   
                    var tempArray = [];   
                    var n = 0;    
                    $.each(depTask, function (index, value) {   
                      console.log('value', n);    
                      tempArray.push({    
                        'id': value   
                      });   
                      for (var i = 0; i < jsonData.tasks.length; i++) {   
                        if (jsonData.tasks[i].id == value && jsonData.tasks[i].actual_end_date != null) {   
                          tempArray[n].date = new Date(jsonData.tasks[i].actual_end_date).getTime();    
                        }   
                        if (i == (depTask.length - 1)) {    
                            
                          console.log('Array', depTask)   
                          console.log('Max Date',Math.max(tempArray.date));   
                        }   
                      }   
                      n++;    
                    });   
                    console.log("tempArray", tempArray);
                    //end of  the added script
                    // if (depTask.length == 1) {
                    var ln = depTask.length;
                    ln--;
                    console.log('depTask', depTask[0]);
                    if (depTask[ln] == tempId) {
                      var d1 = new Date(eEndDate);
                      var d2 = new Date(eEndDate);
                      d1.setDate(d1.getDate() + 1);
                      d2.setDate(d2.getDate() + 11);
                      var mileStart = d1.getFullYear() + '-' +
                        (('' + (d1.getMonth() + 1)).length < 2 ? '0' : '') + (d1.getMonth() + 1) + '-' +
                        (('' + d1.getDate()).length < 2 ? '0' : '') + d1.getDate();
                
                      var mileEnd = d2.getFullYear() + '-' +
                        (('' + (d2.getMonth() + 1)).length < 2 ? '0' : '') + (d2.getMonth() + 1) + '-' +
                        (('' + d2.getDate()).length < 2 ? '0' : '') + d2.getDate();
                      //Check for milestone complete or calculate delay
                      if (completionDate == null) {
                        mileStatus = 'gmilestone redmile '
                      } else {
                        var d3 = new Date(this.overdue);
                        var d4 = new Date(completionDate);
                        var timeDiff = (d3.getTime() + 86400) - d4.getTime();
                        var diffDays = Math.ceil(timeDiff / 86400000);
                        console.log('DiffDays', diffDays);
                        if (diffDays < 0) {
                          var dur = rem = Math.abs(diffDays);
                          if (dur < 8) { 
                            mileName += " - Delayed by " + dur + " day(s)"
                          };
                          if (dur >= 8 && dur < 30) {
                            dur = Math.floor(dur / 7); 
                            //add 16th- Nov
                            rem = Math.floor(rem % 7);
                            mileName += " - Delayed by " + dur + " week(s) and " + rem + " day(s)";              
                            };
                            //end
                          if (dur >= 30 && dur < 365) { 
                            dur = Math.floor(dur / 30);
                            //add 16th-Nov
                            rem = Math.floor(rem % 30);
                            mileName += " - Delayed by " + dur + " month(s) and " + rem + " day(s)";    
                          };
                            //end 
                          if (dur >= 365) { 
                            dur = Math.floor(dur / 365);
                            //added script 
                            rem = Math.floor(rem % 365);
                            mileName += " - Delayed by " + dur + " year(s), " + rem + " day(s)";
                          };
                          //ended script
                          console.log('Diff days', mileName);
                        } else {
                          mileStatus = 'gmilestone greenmile '
                          var dur = rem = Math.abs(diffDays);
                          if (dur == 0) {
                             mileName += " - On track"
                          };
                          if (dur < 8) { 
                            mileName += " - Ahead by " + dur + " day(s)"
                          };
                          if (dur >= 8 && dur < 30) { 
                            dur = Math.floor(dur / 7);
                            rem = Math.floor(rem % 7);//new line
                            mileName += " - Ahead by " + dur + " week(s) and " + rem + " day(s)"; //modified
                          };
                          if (dur >= 30 && dur < 365) { 
                            dur = Math.floor(dur / 30);
                            rem = Math.floor(rem % 30);//new line
                            mileName += " - Ahead by " + dur + " month(s) and " + rem + " day(s)";//modified
                          };
                          if (dur >= 365) {
                             dur = Math.floor(dur / 365);
                            rem = Math.floor(rem % 365);//new line
                            mileName += " - Ahead by " + dur + " year(s), " + rem + " day(s)";//modified
                             };
                          console.log('Diff days', mileName);
                        }
                      }
                      g.AddTaskItem(new JSGantt.TaskItem(mileId, mileName, mileStart, mileEnd,
                        mileStatus, '', 1, '', 100, 0, activityId, 1, '', '', '', g));//changed null to 100
                    }
                  });
                  //Draw task after drawing milestone
                  g.AddTaskItem(new JSGantt.TaskItem(taskId, taskName, eStartDate, eEndDate, taskStatus, link, 0,
                    '', taskCompletion , 0, activityId, 1, '', '', '', g ,pStartDate, pEndDate));
                });
                
                g.setShowStartDate(0);
                g.setShowEndDate(0);
                g.setShowRes(0);
                g.setShowDeps(0);
                g.setShowDur(0);
                g.setUseToolTip(1);
                g.setWeekColWidth(50);
                g.setWeekMajorDateDisplayFormat('mon yyyy');
                g.setWeekMinorDateDisplayFormat('W w');
                g.setScrollTo('today');
                g.setTimer(5);    
                g.setShowTaskInfoLink(1);
                g.Draw();
                var collideDiv
                function collision($div1, $div2) {
                  var x1 = $div1.offset().left;
                  var y1 = $div1.offset().top;
                  var h1 = $div1.outerHeight(true);
                  var w1 = $div1.outerWidth(true);
                  var b1 = y1 + h1;
                  var r1 = x1 + w1;
                  var x2 = $div2.offset().left;
                  var y2 = $div2.offset().top;
                  var h2 = $div2.outerHeight(true);
                  var w2 = $div2.outerWidth(true);
                  var b2 = y2 + h2;
                  var r2 = x2 + w2;
                
                  if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2){ return false;}
                  else{
                        collideDiv = $div2;
                         return true;
                }
                }
                var count = 0,
                  padding = 25,
                  arrayTask = [],
                  collide = false;
                $('.gselector').hide();
                  var previous = null;
                  var prePrevious, pre2, pre3= null;
                  var mile = false;
                  $(".gtaskbarcontainer").each(function (index) {
                    currParent = $(this).parent().parent().parent();
                    listParent = currParent.attr('id').replace('row', '');
                    if ($(this).hasClass('gmilecontainer')) {
                      mile = true;
                    }
                    if (previous && $(this).parent().parent().parent().attr('id') == $(previous).parent().parent().parent()
                      .attr('id')) {
                      // console.log("This ID", $(this).attr('id'), mile);
                      if (mile) {
                
                      }
                      if (collision($(this), $(previous)) || collision($(this), $(prePrevious))) {
                        $('#' + currParent.attr('id') + " .gtaskbarcontainer").each(function () {
                          if ($(this).css('top') == '-5px') {
                            $(this).css('top', '0px');
                          }
                        });
                        collide = true;
                        $(this).css('top', parseInt($(previous).css('top')) + padding + 'px');
                        if (count == 0) {
                          $(previous).css('top', '0px');
                          count++;
                        }
                        listParentDiv = $('#' + listParent);
                        if (parseInt(currParent.css('height')) <= parseInt($(this).css('top'))) {
                          listParentDiv.css('height', parseInt(listParentDiv.css('height')) + 25 + 'px');
                          currParent.css({
                            'height': parseInt(currParent.css('height')) + 25 + 'px',
                            'vertical-align': 'top'
                          });
                        }
                      }
                    } else {
                      count = 0;
                      arrayTask = [];
                      collide = false;
                      $('#' + currParent.attr('id') + ' .gtaskbarcontainer').css({
                        top: '-5px'
                      });
                      mile = false;
                    }
                    prePrevious = previous;
                    previous = this;
                  });
                // end of the script added 16th-Nov
            </script>
            <!--            SCRIPT FOR GANTT CHART CURRENT QUARTER UPDATES                -->
            {% endif %}
            <!--gantt chart div ends here -->
            <!--                            this is for about the quarter-->
            {% if quest.slug == "about-the-quarter" %}
            <div class="location margin_top30" style="margin-bottom:0px">
                <p>{{quest.text|title}}</p>
                {% get_answer_question quest reportupdates.1 as text %}
                <h5 >{{text}}</h5>
            </div>
            {% endif %}
            <!--                            this is for milestone section-->
            {% if quest.slug == "activity-section" %}
            {% get_milestone_list quest reportupdates.1 as act_mile_list %} <!-- to loop the number of activity obj -->
            {% for mileobj in act_mile_list %} <!--  for loop for milestone list -->
            {% with forloop.counter as m_count %}
            <div class="margin_30 prev_banner milestone1">
                {% get_previous_subquestions quest as milestone_questions %}
                {% for mile_quest in milestone_questions %}
                {% if mile_quest.slug == "activity-name" %}
                <h5 class="color-red">ACTIVITY</h5>
                {% get_milestone_name mileobj as name %}
                <h5 class="color_green" style="margin:0px">{{name}}</h5>
                {% endif %}
                {% if mile_quest.slug == "about-the-actvity" %}
                <p><strong>About the Activity</strong></p>
                <h5 style="color:#666; font-weight:normal">{{mileobj.description|safe}}</h5>
                {% endif %}
                {% endfor %}
                {% for mile_quest in milestone_questions %}
                {% get_mile_act_images mileobj as imagelist %}
                {% if imagelist %}
                {% for imageobj in imagelist %}
                <div class="col-md-6" style="padding:0px">
                    {% if mile_quest.slug == "upload-picture" %}
                    {% if imageobj.attachment_file %}
                    <img  src="{{image_url}}{{imageobj.attachment_file.url}}"  height = 400 width = 500 >
                    {% endif %}
                    {% endif %}
                    {% if mile_quest.slug == "picture-description" %}
                    <p>{{imageobj.description|safe}}</p>
                    {% endif %}
                    {% endfor %} <!-- for loop ends for imagelist-->
                </div>
                {% endif %}  <!-- ends for imagelist condition -->
                {% endfor %}  <!-- ends for milestone questions -->
            </div>
            {% endwith %}
            {% endfor %}  <!-- ends for milestonelist -->
            {% endif %} <!-- end of milestone question loop -->
            
        </div>
        {% endfor %} <!-- ends for current quarter questions for this page   -->
        </div>
        </div>
        </div>
        <!-- page height div ends -->

        <!--page 7th ends here -->
        <!--page 8th starts here -->
        <!--        page 6th contents starts here -->
        <div class="page_break"></div>
        <div class="container">

        
        <div>
        {% get_final_questions current_questionlist 4 reportupdates.1 v report_id "false" as final_questionlist %}
        {% for quest in final_questionlist.0 %}
        <div style="margin-left:-1px;">
            {% if quest.qtype == "APT" %}
            {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
            {% if quest.slug == "heading" %}
            <h4 style="margin-left:-15px">{{text|title}} </h4>
            {% endif %}
            {% if quest.slug == "duration" %}
            <p> Quarter {{text}} <span style="float:right">Key Achievements in this quarter</span> </p>
            {% endif %}
            {% endif %}
            <!--                     this is for parameter selection -->
            {% if quest.slug == "parameter-section" %}
            <div class="col-md-12">
                <div class="row">
                  <div class="margin_30 prev_banner">
                    {% get_parameters_list quest reportupdates.1 as parameters_list %}
                    {% for paramobj in parameters_list %}
                    {% with forloop.counter as m_count %}
                    {% get_previous_subquestions quest as parameter_questions %}
                    {% get_parameter_values reportupdates.1 paramobj as parameter_values %}
                    
                        <h5 class="color-red">PARAMETER {{forloop.counter}}</h5>
                        <h5 class="color_green">{{parameter_values.1.0}}</h5>
                        <div>
                            {% for param_quest in parameter_questions %}
                            {% if param_quest.slug == "parameter-selection" %}
                            {% if parameter_values.2 == 1 %}
                            <div class="col-md-4" style="margin-left:-20px">
                                <div class="row">
                                    <ul class="key_parameter parameter">
                                        <!-- <div class='numeric_parameter'></div> -->
                                        <!-- <h3>{{chart_name_pip}}</h3> -->
                                        <div class="right-budget beni-dist">
                                            <div id="comm{{forloop.counter}}" style="width: 100%;float: left;">
                                            </div>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                            {% else %}
                            <ul class="key_parameter parameter">
                                <table class="table pmu_formtable_parameter">
                                    <tr>
                                        <td>
                                            <p>{{parameter_values.1.0}}</p>
                                            <img src="/static/img/user.png"><span>{{23 | intcomma}}</span>
                                        </td>
                                    </tr>
                                </table>
                            </ul>
                            {% endif %} <!-- this is for parameter type identification -->
                            {% endif %} <!-- if loop ends for paramater selection -->
                            {% if param_quest.slug == "about-parameter" %}
                            <div class="col-md-8">
                                <div class="parameter-text">
                                    <h4 class="color_green">About This Parameter</h4>
                                    <p> {{paramobj.description|striptags}} </p>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    {% endfor %} <!-- for loops ends for paramter questions -->
                    </div>
                    <script type="text/javascript">
                        var new_data_pin = 0;
                        var new_data_pip = 0;
                    </script>
                    <!--/* Pie Chat Number */-->
                    <script src="/static/code/highcharts.js"></script>
                    <script src="/static/code/highcharts-more.js"></script>
                    <script src="/static/code/modules/solid-gauge.js"></script>
                    <script type="text/javascript">
                        {% get_parameter_values reportupdates.1 paramobj as parameter_values %}
                        var new_data_pin = 0;
                        var data11 = {{parameter_values.0.0 | safe}};
                        console.log("mahiti.org");
                        var values = "comm{{forloop.counter}}"
                        var pin_title = "{{parameter_values.1.0 | safe}}"
                        // var pin_title = pin_title[new_data_pin]
                        
                        Highcharts.chart(values, {
                        chart:{type:'pie', backgroundColor: null,height:288},
                               credits:{enabled: false},
                               colors:[
                                   '#5485BC', '#AA8C30', '#5C9384', '#981A37', '#FCB319',     '#86A033', '#614931', '#00526F', '#594266', '#cb6828', '#aaaaab', '#a89375'
                                   ],
                               title:{text: ''},
                               tooltip:{
                                   enabled: true,
                                   animation: true
                               },
                               plotOptions: {
                                   pie: {
                                       allowPointSelect: true,
                                       animation: true,
                                       cursor: 'pointer',
                                       showInLegend: true,
                                       dataLabels: {
                                           enabled: false,
                                           distance: -30,
                                           formatter: function() {
                                               return this.y;
                                           }
                                       }
                                   }
                               },
                               legend: {
                                  enabled: true,
                                  layout: 'horizontal',
                                  align: 'center',
                                  width: 200,
                                  verticalAlign: 'bottom',
                                  useHTML: true,
                                  labelFormatter: function() {
                                      return '<div style="text-align: left;float:left;font-weight: normal;">' + this.name +' - '+ this.percentage.toFixed(1) + '%</div>';
                                  }
                              },
                               series: [{
                                   type: 'pie',
                                   dataLabels:{
                        
                                   },
                                   data: data11
                        
                               }]
                           });
                    </script>
                    {% endwith %} <!-- for loop counter of paramters obj list-->
                    {% endfor %} <!-- for loop ends for main paramterobj lists-->
                </div>
            </div>
            <br>
            {% endif %} <!-- ends for parameter section  -->
            {% if quest.slug == "budget-utlization-tranches" %}
            <div class="margin_top30">
                <P class="color_green" style="border-bottom:0px">Budget Utilisation and tranches</P>
                <div class="white-box">
                    <div>
                        <table class="tab-resp1" id="example11" cellpadding="0" cellspacing="0" border="0">
                            <thead>
                                <tr>
                                    <th>Super Category</th>
                                    <th>Heading</th>
                                    <th>Subheading</th>
                                    <th>Total Planned</th>
                                    <th>Total Utilized</th>
                                    <th>Units Type</th>
                                    <th>Units</th>
                                    <th>Rate</th>
                                    <th> Planned</th>
                                    <th> Utilized</th>
                                    <th>Variance</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in budget_period %}
                                <tr class = "data_row">
                                    {% get_budget_lineitem row projectobj as lineitemobj %}
                                    <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                    <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                    <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                    {% get_line_total row projectobj as line_total %}
                                    <td align="right" class="sticky-cell">{{line_total}}</td>
                                    {% get_utlizedline_total row projectobj as utilized_amount %}
                                    <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                    <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                    {% get_quarter_details row i projectobj as line_itemobj %}
                                    <td align="right" class=""> {{line_itemobj.unit}} </td>
                                    <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                    <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                    <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                    <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <br><br>
                <!-- ------------------------------------------------------- -->
                {% get_tranches v tranche_list as filtered_tranches %}
                {% if filtered_tranches.1.planned_amount %}
                <div class="white-box">
                    <div>
                        <table class="tab-resp1" cellpadding="0" cellspacing="0" border="0" style="margin-top:25px;">
                            <thead>
                                <tr>
                                    <th align="center">Tranche No.</th>
                                    <th>Due Date</th>
                                    <th>Planned Amount</th>
                                    <th>Actual Disbursement</th>
                                    <th>Recommended Disbursement</th>
                                    <th> Utilized</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% get_tranches v tranche_list as filtered_tranches %}
                                    
                                    {% for i in filtered_tranches.0 %}
                                {% with forloop.counter as rnum %}
                                <tr>
                                    <td>{{rnum}}</td>
                                    <td>{{i.due_date|date:"j M Y"}}</td>
                                    <td> Rs. {% if  i.planned_amount %} {{i.planned_amount}} {% else %} 0 {% endif %}</td>
                                    <td> Rs. {% if  i.actual_disbursed_amount %} {{i.actual_disbursed_amount}}  {% else %} 0 {% endif %} </td>
                                    <td> Rs. {% if  i.recommended_amount %} {{i.recommended_amount}}  {% else %} 0 {% endif %} </td>
                                    <td> Rs. {% if  i.utilized_amount %} {{i.utilized_amount}}  {% else %} 0 {% endif %} </td>
                                </tr>
                                {% endwith %}
                                {% endfor %}
                                <tr bgcolor="#f1f3e9" class="table-tr">
                                    <td>Total</td>
                                    <td>&nbsp;</td>
                                    <td>Rs. {% if planned_amount %} {{filtered_tranches.1.planned_amount}} {% else %} 0 {% endif %} </td>
                                    <td>Rs. {% if actual_disbursed_amount %}{{filtered_tranches.1.actual_disbursed_amount}} {% else %} 0 {% endif %} </td>
                                    <td>Rs. {% if recommended_amount %} {{filtered_tranches.1.recommended_amount}}{% else %} 0 {% endif %} </td>
                                    <td>Rs. {% if utilized_amount %}{{filtered_tranches.1.utilized_amount}} {% else %} 0 {% endif %}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                {% endif %}
                {% endif %}
                {% if quest.slug == "about-the-budget" %}
                <div class="location margin_top30" style="margin-left:3px;">
                    <p>{{quest.text|title}} </p>
                    {% get_answer_question quest reportupdates.1 as text %}
                    <h5>{{text}}
                    </h5>
                </div>
                {% endif %}
                
            </div>
            <!-- page height div ends -->

        </div>
        {% endfor %} <!-- ends for current quarter questions for this page   -->
      </div>
    </div>
        <!--page 8 ends here -->
        <!--page 9 starts here -->
        <div class="page_break"></div>
        <div class="container">
        
        <div >
            {% get_final_questions current_questionlist 4 reportupdates.1 v report_id "false" as final_questionlist %}
        {% for quest in final_questionlist.0 %}
            <div class="">
                
                <!--                     this is for parameter selection -->
                {% if quest.slug == "risks-mitigation" %}
                <div class="location margin_top_50" style="margin-left:-20px;">
                    <p>Risks and mitigation</p>
                    {% get_answer_question quest reportupdates.1 as text %}
                    <h5>{{text}} </h5>
                </div>
                {% endif %}
            </div>
            {% endfor %} <!-- ends for current quarter questions for this page   -->
        </div>
      </div>
        <!-- page height div ends -->

        <!--page 9 ends here -->
        {% endif %} <!-- if current quarter updates is created -->
        {% endwith %} <!-- for loop counter ends here -->
        {% endfor %} <!-- the main current quarters loop ends here -->
        
<!--Next quarter section starts here -->
<!--page 10 starts here ie.. about quarter,budget, and about the budget -->       
        
        {% for i,v in futurequarter_list.items %}
        {% with forloop.counter as j %}
        {% getreport_status report_id v 3 as reportupdates %}
        {% if reportupdates.0 == True %}
        <div class='page_break'></div>
        <div class="container" style="margin-left:10px">
        
        <div style="margin-left:-20px">
        {% get_final_questions next_questionlist 5 reportupdates.1 v report_id "false" as final_questionlist %}
        {% for quest in final_questionlist.0 %}
        <div class="">
            {% if quest.qtype == "APT" %}
            {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
            {% if quest.slug == "heading" %}
            <h4 style="margin:0px" style="margin-left:-20px">{{text|title}}</h4>
            {% endif %}
            {% if quest.slug == "duration" %}
            <p>  First Quarter {{text}} </p>
            {% endif %}
            {% endif %}

<!--                            this is for about the quarter-->
                        {% if quest.slug == "about-the-quarter" %}
                              <div class="location margin_top30" style="margin-bottom:0px">
                                 <p>About The Quarter</p>
                                {% get_answer_question quest reportupdates.1 as text %}
                                 <h5>{{text}} </h5>
                              </div>
                    {% endif %}

            {% if quest.slug == "budget-utlization-tranches" %}
            <div class="margin_top30">
                <P class="color_green" style="border-bottom:0px">Budget Utilisation and tranches</P>
                <div class="white-box">
                    <div>
                        <table class="tab-resp1" id="example11" cellpadding="0" cellspacing="0" border="0">
                            <thead>
                                <tr>
                                    <th>Super Category</th>
                                    <th>Heading</th>
                                    <th>Subheading</th>
                                    <th>Total Planned</th>
                                    <th>Total Utilized</th>
                                    <th>Units Type</th>
                                    <th>Units</th>
                                    <th>Rate</th>
                                    <th> Planned</th>
                                    <th> Utilized</th>
                                    <th>Variance</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in budget_period %}
                                <tr class = "data_row">
                                    {% get_budget_lineitem row projectobj as lineitemobj %}
                                    <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                    <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                    <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                    {% get_line_total row projectobj as line_total %}
                                    <td align="right" class="sticky-cell">{{line_total}}</td>
                                    {% get_utlizedline_total row projectobj as utilized_amount %}
                                    <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                    <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                    {% get_quarter_details row i projectobj as line_itemobj %}
                                    <td align="right" class=""> {{line_itemobj.unit}} </td>
                                    <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                    <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                    <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                    <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <br><br>
                
                
                {% endif %}
                {% if quest.slug == "about-the-budget" %}
                <div class="location margin_top30">
                    <p>{{quest.text|title}}</p>
                    {% get_answer_question quest reportupdates.1 as text %}
                    <h5>{{text}}
                    </h5>
                </div>
                {% endif %}


            
            </div>
        </div>
        {% endfor %} <!-- ends for next quarter questions for this page   -->
       </div>
      </div>
        <!-- page height div ends -->

        <!--page 10 ends here -->

        {% endif %} <!-- if next quarter updates is created -->
        {% endwith %} <!-- for loop counter ends here -->
        {% endfor %} <!-- the main next quarters loop ends here -->


<!--annexure page ends -->

<script src="/static/js/jquery.nicescroll.min.js"></script>
<script src="/static/js/jquery.nicescroll.min-bkp.js"></script>
<script src="/static/js/jquery.scrollbox.js"></script>
<script src="/static/js/jquery.scrollbox-bkp.js"></script>
<script src="/static/js/jquery.tinyscrollbar.js"></script>


<script>
  $(document).ready(function() {

    $("#boxscroll, .table-resp tbody").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true}); // First scrollable DIV

  var li_Count = $('.time-line li').length;
  $(".time-line").css('width', 200*li_Count);
  });

  $(document).ready(function()
  {
      $("#scrollbar1").tinyscrollbar({ axis: "x"});

  });
</script>





        <script type="text/javascript" src="/static/js/jquery.tinyscrollbar.js"></script>
        <script src="/static/js/jquery.nicescroll.min.js"></script>
        <script src="/static/js/easyResponsiveTabs.js" type="text/javascript"></script>
        <script>
            $( function() {
                $("#loader").hide()
              $( "#accordion" ).accordion({
                collapsible: true
              });
            } );
        </script>
        <!--this script is to get the timeline progress -->
        



    </body>
