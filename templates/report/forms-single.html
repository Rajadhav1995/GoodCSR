{% extends 'project/project-summary.html' %}
{% load common_tags %}
{% load urs_tags %}
{% load question_tags %}
<!--{% load urs_tags %}-->
{% block content %}
<link rel="stylesheet" href="/static/css/aria-accordion.css" />
<link rel="stylesheet" href="/static/css/style-accordion.css" />
<link rel="stylesheet" href="/static/css/jquery-ui.css">
<input type="hidden" name="count" value="6">
<input type="hidden" name="slug" value="{{slug}}">
<input type="hidden" name="project-report" value="{{projectreportobj.id}}">
<input type="hidden" name="report_id" value="{{report_id}}" id="{{report_id}}">
<!--Section class content     -->
<section class="content-part">
   <div class=" company_listing">
      <div class="col-md-12 col-xs-12 nopadding company_listing">
         <div class="row">
            <div class="generate_boxbg ">
               <div class="general_report edit_templete">
                  <h2>Edit Generate Report</h2>
                  <!--<div>
                     <p align="right" class="edit_templete"><a href="#">Edit Templete</a></p>
                     </div>-->
                  <div id="template" >
                     <h3 class="heading">{{locals_list.block1.name}}</h3>
                     <form action="." id='ui-accordion-accordion-panel-0' method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" name="slug" value="{{slug}}" id="{{project_slug}}" >
                        <input type="hidden" name="report_id" value="{{report_id}}" id="{{report_id}}">
                        <input type="hidden" name="key" value={{key}}>
                        <div class="text_accordion">
                           {% get_questions locals_list.block1 projectreportobj as ques %}
                           {% for i in ques %}
                           {% if i.q_type == 'OT' %}
                           {% get_auto_populated_questions i.q_id  projectobj projectreportobj as sub_questions %}
                           {% for sub in sub_questions %}
                           {% if sub.q_type == 'APT' and sub.q_name == 'report_duration' %}
                                <div class="col-md-6 report_text">
                                  <p>{{sub.q_text}}</p>
                                    {% get_from_to_dates sub.answer as duration %}
                                    
                                    <input type = 'text' name = "{{sub.q_name}}_start_{{sub.q_id}}" value = "{{duration.0}}" class="input_datepicker" ></input> &nbsp; &nbsp;To &nbsp; &nbsp; 
                                    <input type = 'text' name = "{{sub.q_name}}_end_{{sub.q_id}}" value = "{{duration.1}}" class="input_datepicker"></input>
                                  <h5><a href="#">Remove</a></h5>
                                </div>  
                           {% elif sub.q_type == 'APT' %}
                           <div class="col-md-6 report_text">
                              <p>{{sub.q_text}}</p>
                              <input type = 'text' name = "{{sub.q_name}}_{{sub.q_id}}" value = "{{sub.answer}}" class="input_section"></input>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% elif sub.q_type == 'API' %}
                           <div class="logo-partner">
                              <h6>{{sub.q_text}}</h6>
                              <img src="{{sub.answer}}" style="">
                              <!--                                                                <img src="{{sub.answer}}"  alt="" title="" height='117px' width = '100px' />-->
                              <div class="form-group addpicture">
                                 <img src="/static/img/browse.png">
                                 <input type="file" name= "{{sub.q_name}}_{{sub.q_id}}"  class="input_file"></input>
                              </div>
                           </div>
                           {% endif %}
                           {% endfor %}
                           {% else %}
                           <div class="col-md-6 report_text">
                              <p>{{i.q_text}}</p>
                              {% if i.q_type == 'T' %}
                              <input type="text" name="{{i.q_name}}_{{i.q_id}}" id="{{i.q_name}}_{{i.q_id}}" value = "{{i.answer}}" required="" class="input_section"></input>
                              <h5><a href="#">Remove</a></h5>
                              {% elif i.q_type == 'ck' %}
                              <textarea name="{{i.q_name}}_{{i.q_id}}" id="{{i.q_name}}_{{i.q_id}}" value = "{{i.answer}}" required="" class="textarea_file">{{i.answer}}</textarea>
                              <h5><a href="#">Remove</a></h5>
                              {% elif i.q_type == 'F' %}
                                {% if i.answer %}
                                <img src="{{image_url}}{{i.answer}}"  alt="" title="" height='117px' width = '100px' />
                                {% endif %}
                              <input type = "file" name= "{{i.q_name}}_{{i.q_id}}" id = "{{i.q_name}}_{{i.q_id}}"  class="input_file"></input>
                              <h5><a href="#">Remove</a></h5>
                              {% endif %}
                           </div>
                           {% endif %}
                           {% endfor%}
                        </div>
                        <input type="submit" class="report_save " name="cover_page_save" id="submit_0" value = "Save"></input>
                     </form>
                     <h3 class="heading">{{locals_list.block2.name}}</h3>
                     <form action="." id='ui-accordion-accordion-panel-1' method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" name="slug" value="{{slug}}" id="{{project_slug}}">
                        <input type="hidden" name="report_id" value="{{report_id}}" id="{{report_id}}">
                        <input type="hidden" name="key" value={{key}}>
                        <div>
                           <div class="text_accordion">
                              {% get_questions locals_list.block2 projectreportobj as ques %}
                              {% for i in ques %}
                              {% if i.q_type == 'OT' %}
                              {% get_auto_populated_questions i.q_id  projectobj projectreportobj as sub_questions %}
                              {% for sub in sub_questions %}
                              {% if sub.q_type == 'APT' and sub.q_name == 'project_duration' %}
                                    <div class="col-md-6 report_text">
                                      <p>{{sub.q_text}}</p>
                                        {% get_from_to_dates sub.answer as duration %}
                                        
                                        <input type = 'text' name = "{{sub.q_name}}_start_{{sub.q_id}}" value = "{{duration.0}}" class="input_datepicker" ></input> &nbsp; &nbsp;To &nbsp; &nbsp; 
                                        <input type = 'text' name = "{{sub.q_name}}_end_{{sub.q_id}}" value = "{{duration.1}}" class="input_datepicker"></input>
                                      <h5><a href="#">Remove</a></h5>
                                    </div>  
                              {% elif sub.q_type == 'APT' %}
                              <div class="col-md-6 report_text">
                                 <p>{{sub.q_text}}</p>
                                 <input type = 'text' name = "{{sub.q_name}}_{{sub.q_id}}" value = "{{sub.answer}}" class="input_section"></input>
                                 <h5><a href="#">Remove</a></h5>
                              </div>
                              {% elif sub.q_type == 'ck' %}
                                                    <div class="col-md-12 report_text">
                                                    <p>{{sub.q_text}}</p>
                                                    </div>
                                                    <textarea name="{{sub.q_name}}_{{sub.q_id}}" id="{{sub.q_name}}_{{sub.q_id}}" value = "{{sub.answer}}" required=""  class="textarea_file">{{sub.answer}}</textarea>
                                                    <div class="col-md-12 report_text"><h5><a href="#">Remove</a></h5></div>
                              {% elif sub.q_type == 'API' %}
                              <div class="logo-partner">
                                 <h6>{{sub.q_text}}</h6>
                                 <img src="{{sub.answer}}" style="">
                                 <!--                                                                <img src="{{sub.answer}}"  alt="" title="" height='117px' width = '100px' />-->
                                 <div class="form-group addpicture">
                                    <img src="/static/img/browse.png">
                                    <input type="file" name= "{{sub.q_name}}_{{sub.q_id}}" class="input_file"></input>
                                 </div>
                              </div>
                              {% endif %}
                              {% endfor %}
                              {% else %}
                              <div class="col-md-6 report_text">
                                 <p>{{i.q_text}}</p>
                                 {% if i.q_type == 'T' %}
                                 <input type="text" name="{{i.q_name}}_{{i.q_id}}" id="{{i.q_name}}_{{i.q_id}}" value = "{{i.answer}}" required="" class="input_section"></input>
                                 <h5><a href="#">Remove</a></h5>
                                 {% elif i.q_type == 'ck' %}
                                 <textarea name="{{i.q_name}}_{{i.q_id}}" id="{{i.q_name}}_{{i.q_id}}" value = "{{i.answer}}" required=""  class="textarea_file">{{i.answer}}</textarea>
                                 <h5><a href="#">Remove</a></h5>
                                 {% elif i.q_type == 'F' %}
                                    {% if i.answer %}
                                         <img src="{{image_url}}{{i.answer}}"  alt="" title="" height='117px' width = '100px' />
                                    {% endif %}
                                 <input type = "file" name= "{{i.q_name}}_{{i.q_id}}" id = "{{i.q_name}}_{{i.q_id}}" ></input>
                                 <h5><a href="#">Remove</a></h5>
                                 {% endif %}
                              </div>
                              {% endif %}
                              {% endfor%}
                           </div>
                           <input type= "submit" class="report_save" name= "project_summary_save" id="submit_1" value="Save"></input>
                        </div>
                        <!-- Previous Quarters Updates starts here                           -->
                        {% for i,v in previousquarter_list.items %}
                        {% with forloop.counter as j %}
                        <h3 class="heading"> Previous Quarter Updates :{{v}}</h3>
                     <form action=".?slug={{slug}}&report_id={{report_id}}" id='ui-accordion-accordion-panel-{{j|add:'2'}}' method = "post">
                        {% csrf_token %}
                        <input type="hidden" name="milestone_count_1" value="1">
                        <input type="hidden" name="milestone-pic-count_1" value="1">
                        <input type="hidden" name="parameter_count_1" value="1">
                        <input type="hidden" name="report_id" value="{{report_id}}" id="{{report_id}}">
                        <input type="hidden" name="key" value={{key}}>
                        <div>
                           {% getreport_status report_id v 1 as reportupdates %}
                           {% if reportupdates.0 == False %}
                           <!--                                if object is not present -->
                           {% for quest in previous_questionlist %}
                           <!--                             this is for auto populate text -->
                           {% if quest.qtype == "APT" %}
                           <div class="col-md-6 report_text">
                              <p>{{quest.text|title}}</p>
                              {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                              <input type="text" id="{{quest.slug}}_1_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_1_{{i}}_{{quest.id}}_{{j}}" value="{{text}}" class="input_section">
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for key achievements-->
                           {% if quest.slug == "key-achievements-in-this-quarter" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <!-- timeline slider -->
                              {% if timeline_json != '[]' %}
                              <div id="scrollbar1">
                                 <div class="viewport">
                                    <div class="overview">
                                       <div id="time-line-pad">
                                          <div class="time-line">
                                             <div class="time-line-bdr"></div>
                                             <ul>
                                                {% to_and v as timeperiod %}
                                                <div class="timeline-slide_{{timeperiod}}"></div>
                                             </ul>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div class="scrollbar">
                                 <div class="track">
                                    <div class="thumb">
                                       <div class="end">
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              {% endif %}
                              <!--                                <img src="/static/img/image_slideshow.jpg" style="width:100%">-->
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone section-->
                           {% if quest.slug == "milestone-section" %}
                                <input type="hidden" name="milestone_count_{{i}}_1" value="1">
                                <input type="hidden" name="milestone-pic-count_1" value="1">
                                <input type="hidden" name="parameter_count_1" value="1">
                                <input type="hidden" name="add_section" value="0">
                            <div class="milestone data_row_{{i}}_1" id="data_row_{{i}}_1">
                              <div class="col-md-12"></div>
                              {% get_previous_subquestions quest as milestone_questions %}
                              <div class="col-md-6 report_text">
                                 {% for mile_quest in milestone_questions %}
                                     {% if mile_quest.slug == "milestone-name" %}
                                        <p>{{mile_quest.text|title}}</p>
                                        <input type="text " id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_0" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_0" class="input_section">
                                        <h5><a href="#">Remove</a></h5>
                                    {% endif %}
                                     {% if mile_quest.slug == "upload-picture" %}
                                        <div class="report_text">
                                            <p>{{mile_quest.text|title}}</p>
                                                  <div class="form-group upload_text">
                                                    <input type="file" id = "{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0" name = "{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0">
                                                </div>
                                                  <h5><a href="#">Remove</a></h5>
                                        </div>
                                    {% endif %}
                                     {% if mile_quest.slug == "picture-description" %}
                                            <div class=" report_text">
                                                <p>{{mile_quest.text|title}}</p>
                                                <div class="form-group">
                                                    <input type="text " class="form_section" id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0" class="input_section">
                                                </div>
                                                <div class="form-group addpicture">
                                                        <input type="file" id="input05">
                                                    </div>
                                                <h5><a href="#">Remove</a></h5>

                                            </div>
                                        {% endif %}
                                 {% endfor %}
                              </div>
                              <!--  col 6 div ends-->
                              {% for mile_quest in milestone_questions %}
                                  {% if mile_quest.slug == "milestone-description" %}
                                            <div class="col-md-6 report_text">
                                                <p>{{mile_quest.text|title}}</p>
                                                <div class="">
                                                    <textarea id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_0" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_0"  class="textarea_file"></textarea>
                                                </div>
                                                <h5><a href="#">Remove</a></h5>
                                            </div>
                                  {% endif %}
                              {% endfor %}
                           </div>
                           <!-- milestone class -->
                           <div class="form-group addmilestone click_buttons">
                              <div class="link-left">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="add_clone_{{i}}_{{j}}">Add more</a>
                                        </div>
                                        <div class="link-center">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="add_remove_{{i}}_{{j}}">Remove</a>
                                        </div>
                           </div>
                           {% endif %}
                           <!--                            this is for parameter selection -->
<!--                           {% if quest.slug == "parameter-section" %}-->
<!--                           <hr class="border_line">-->
<!--                           <div class="milestone">-->
<!--                              {% get_previous_subquestions quest as parameter_questions %}-->
<!--                              {% for param_quest in parameter_questions %}-->
<!--                              {% if param_quest.slug == "parameter-selection" %}-->
<!--                              <div class="col-md-6 report_text parameter_section">-->
<!--                                 <p>{{param_quest.text|title}}</p>-->
<!--                                 <select name="{{param_quest.text}}_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0" id="parameter-selection_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0" >-->
<!--                                    <option value="0">Select</option>-->
<!--                                    {% for i in project_paramterlist %}-->
<!--                                    <option value="{{i.id}}">{{i.name}}</option>-->
<!--                                    {% endfor %}-->
<!--                                 </select>-->
<!--                                 <h5><a href="#">Remove</a></h5>-->
<!--                              </div>-->
<!--                              {% endif %}-->
<!--                              {% if param_quest.slug == "about-parameter" %}-->
<!--                              <div class="col-md-12 report_text ">-->
<!--                                 <p>{{param_quest.text|title}}</p>-->
<!--                                 <div class="">-->
<!--                                    <textarea id="{{param_quest.text}}_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0" name="{{param_quest.text}}_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0"  class="textarea_file"></textarea>-->
<!--                                 </div>-->
<!--                                 <h5><a href="#">Remove</a></h5>-->
<!--                              </div>-->
<!--                              {% endif %}-->
<!--                              {% endfor %}-->
<!--                           </div>-->
<!--                           <div class="form-group addmilestone click_buttons">-->
<!--                              <p>+ add More Parameter</p>-->
<!--                           </div>-->
<!--                           {% endif %}-->
                           <!--                            this is for budget table display-->
                           {% if quest.slug == "budget-utlization-tranches" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <div class="table-responsive sticky-table sticky-headers sticky-ltr-cells table-wrap">
                                 <table class="table table-boardered table-striped table-striped budget_table">
                                    <thead>
                                       <tr class="sticky-row">
                                          <th  class="sticky-cell">Super Category</th>
                                          <th  class="sticky-cell">Heading</th>
                                          <th  class="sticky-cell">Subheading</th>
                                          <th  class="sticky-cell">Total Planned</th>
                                          <th  class="sticky-cell">Total Utilized</th>
                                          <th  class="sticky-cell">Units Type</th>
                                          <th>Units</th>
                                          <th>Rate</th>
                                          <th> Planned</th>
                                          <th> Utilized</th>
                                          <th>Variance</th>
                                       </tr>
                                    </thead>
                                    <tbody class="budget_section">
                                       {% for row in budget_period %}
                                       <tr class = "data_row">
                                          {% get_budget_lineitem row projectobj as lineitemobj %}
                                          <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                          <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                          {% get_line_total row projectobj as line_total %}
                                          <td align="right" class="sticky-cell">{{line_total}}</td>
                                          {% get_utlizedline_total row projectobj as utilized_amount %}
                                          <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                          {% get_quarter_details row i projectobj as line_itemobj %}
                                          <td align="right" class=""> {{line_itemobj.unit}} </td>
                                          <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                          <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                          <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                          <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% endfor %} <!-- this is for previous question loop ends for add functionality -->
                           {% else %}  <!--  edit functionality starts here -->
<!--                           object is exists-->
                           {% for quest in previous_questionlist %}
                           <!--                             this is for auto populate text -->
                           {% if quest.qtype == "APT" %}
                           <div class="col-md-6 report_text">
                              <p>{{quest.text|title}}</p>
                              {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                              <input type="text" id="{{quest.slug}}_1_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_1_{{i}}_{{quest.id}}_{{j}}" value="{{text}}" class="input_section">
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for key achievements-->
                           {% if quest.slug == "key-achievements-in-this-quarter" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <!-- timeline slider -->
                              {% if timeline_json != '[]' %}
                              <div id="scrollbar1">
                                 <div class="viewport">
                                    <div class="overview">
                                       <div id="time-line-pad">
                                          <div class="time-line">
                                             <div class="time-line-bdr"></div>
                                             <ul>
                                                {% to_and v as timeperiod %}
                                                <div class="timeline-slide_{{timeperiod}}"></div>
                                             </ul>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div class="scrollbar">
                                 <div class="track">
                                    <div class="thumb">
                                       <div class="end">
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              {% endif %}
                              <!--                                <img src="/static/img/image_slideshow.jpg" style="width:100%">-->
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone section-->
                           {% if quest.slug == "milestone-section" %}
                           {% get_milestone_list quest reportupdates.1 as act_mile_list %} <!-- to loop the number of activity obj -->
                                <input type="hidden" name="milestone_count_{{i}}_1" value="{{act_mile_list|length}}">
                            <input type="hidden" name="milestone-pic-count_1" value="1">
                            <input type="hidden" name="parameter_count_1" value="1">
                            <input type="hidden" name="add_section" value="1">
                           {% for mileobj in act_mile_list %} <!--  for loop for milestone list -->
                            {% with forloop.counter as m_count %}
                        
                            <div class="milestone data_row_{{i}}_{{m_count}}">
                                <div class="col-md-12"></div>

                                {% get_previous_subquestions quest as milestone_questions %}

                                    <div class="col-md-6 report_text">
                                    {% for mile_quest in milestone_questions %}
                                    {% if mile_quest.slug == "milestone-name" %}
                                        <p>{{mile_quest.text|title}}</p>
                                        <input type="text " id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}" value="{{mileobj.name}}" class="input_section">
                                        <h5><a href="#">Remove</a></h5>
                                    {% endif %}
                                {% get_mile_act_images mileobj as imagelist %}
                                {% if imagelist %}
                                {% for imageobj in imagelist %}
                                    {% if mile_quest.slug == "upload-picture" %}
                                        <div class="report_text">
                                            <p>{{mile_quest.text|title}}</p>
                                                  <div class="form-group upload_text">
                                                    <input type="file" id = "{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}_{{imageobj.id}}" name = "{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}_{{imageobj.id}}" value="{{imageobj.attachment_file}}">{% if imageobj.attachment_file %}{{imageobj.attachment_file.url}}{% endif %}
                                                </div>
                                                  <h5><a href="#">Remove</a></h5>
                                        </div>
                                    {% endif %}

                                    {% if mile_quest.slug == "picture-description" %}
                                        <div class=" report_text">
                                            <p>{{mile_quest.text|title}}</p>
                                            <div class="form-group">
                                                <input type="text " class="form_section" id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}_{{imageobj.id}}" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}_{{imageobj.id}}" value="{{imageobj.description}}" class="input_section">
                                            </div>
                                            <div class="form-group addpicture">
                                                    <input type="file" id="input05">
                                                </div>
                                            <h5><a href="#">Remove</a></h5>

                                        </div>
                                    {% endif %}
                                {% endfor %} <!--  this ends for image loop -->
                                {% else %}
                                    {% if mile_quest.slug == "upload-picture" %}
                                        <div class="report_text">
                                            <p>{{mile_quest.text|title}}</p>
                                                  <div class="form-group upload_text">
                                                    <input type="file" id = "{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0" name = "{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0">
                                                </div>
                                                  <h5><a href="#">Remove</a></h5>
                                        </div>
                                    {% endif %}

                                    {% if mile_quest.slug == "picture-description" %}
                                        <div class=" report_text">
                                            <p>{{mile_quest.text|title}}</p>
                                            <div class="form-group">
                                                <input type="text " class="form_section" id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_1_1_0" class="input_section">
                                            </div>
                                            <div class="form-group addpicture">
                                                    <input type="file" id="input05">
                                                </div>
                                            <h5><a href="#">Remove</a></h5>

                                        </div>
                                    {% endif %}
                                {% endif %}


                                    {% endfor %}
                                    </div> <!--  col 6 div ends-->

                                {% for mile_quest in milestone_questions %}
                                {% if mile_quest.slug == "milestone-description" %}
                                        <div class="col-md-6 report_text">
                                            <p>{{mile_quest.text|title}}</p>
                                            <div class="">
                                                <textarea id="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}" name="{{mile_quest.text}}_1_{{i}}_{{mile_quest.id}}_{{j}}_{{m_count}}_{{mileobj.id}}"  class="textarea_file"> {{mileobj.description}}</textarea>
                                            </div>
                                            <h5><a href="#">Remove</a></h5>
                                        </div>
                                    {% endif %}
                                    {% endfor %}


                            </div> <!-- milestone class -->
                            {% endwith %}
                           </div>
                           <!-- milestone class -->
                           {% endfor %} <!--  this for loop for number of milestones-->
                           <div class="form-group addmilestone click_buttons">
                              <div class="link-left">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="edit_clone_{{i}}_{{j}}">Add more</a>
                                        </div>
                                        <div class="link-center">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="edit_remove_{{i}}_{{j}}">Remove</a>
                                        </div>
                           </div>
                           {% endif %}
                           <!--                            this is for parameter selection -->
<!--                           {% if quest.slug == "parameter-section" %}-->
<!--                           <hr class="border_line">-->
<!--                           {% get_parameters_list quest reportupdates.1 as parameters_list %}-->
<!--                           {% for paramobj in parameters_list %}-->
<!--                           <div class="milestone">-->
<!--                              {% get_previous_subquestions quest as parameter_questions %}-->
<!--                              {% for param_quest in parameter_questions %}-->
<!--                              {% if param_quest.slug == "parameter-selection" %}-->
<!--                              <div class="col-md-6 report_text parameter_section">-->
<!--                                 <p>{{param_quest.text|title}}</p>-->
<!--                                 <select name="{{param_quest.text}}_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}" id="parameter-selection_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}" >-->
<!--                                    <option value="0">Select</option>-->
<!--                                    {% for i in project_paramterlist %}-->
<!--                                    <option value="{{i.id}}" {% if i.id == paramobj.keyparameter.id %} selected=selected {% endif %}>{{i.name}}</option>-->
<!--                                    {% endfor %}-->
<!--                                 </select>-->
<!--                                 <h5><a href="#">Remove</a></h5>-->
<!--                              </div>-->
<!--                              {% endif %}-->
<!--                              {% if param_quest.slug == "about-parameter" %}-->
<!--                              <div class="col-md-12 report_text ">-->
<!--                                 <p>{{param_quest.text|title}}</p>-->
<!--                                 <div class="">-->
<!--                                    <textarea id="{{param_quest.text}}_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}" name="{{param_quest.text}}_1_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}"  class="textarea_file"> {{paramobj.description}}</textarea>-->
<!--                                 </div>-->
<!--                                 <h5><a href="#">Remove</a></h5>-->
<!--                              </div>-->
<!--                              {% endif %}-->
<!--                              {% endfor %}-->
<!--                           </div>-->
<!--                           {% endfor %} <!--  this is for paramter list count loop ends -->
<!--                           <div class="form-group addmilestone click_buttons">-->
<!--                              <p>+ add More Parameter</p>-->
<!--                           </div>-->
<!--                           {% endif %}-->
                           <!--                            this is for budget table display-->
                           {% if quest.slug == "budget-utlization-tranches" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <div class="table-responsive sticky-table sticky-headers sticky-ltr-cells table-wrap">
                                 <table class="table table-boardered table-striped table-striped budget_table">
                                    <thead>
                                       <tr class="sticky-row">
                                          <th  class="sticky-cell">Super Category</th>
                                          <th  class="sticky-cell">Heading</th>
                                          <th  class="sticky-cell">Subheading</th>
                                          <th  class="sticky-cell">Total Planned</th>
                                          <th  class="sticky-cell">Total Utilized</th>
                                          <th  class="sticky-cell">Units Type</th>
                                          <th>Units</th>
                                          <th>Rate</th>
                                          <th> Planned</th>
                                          <th> Utilized</th>
                                          <th>Variance</th>
                                       </tr>
                                    </thead>
                                    <tbody class="budget_section">
                                       {% for row in budget_period %}
                                       <tr class = "data_row">
                                          {% get_budget_lineitem row projectobj as lineitemobj %}
                                          <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                          <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                          {% get_line_total row projectobj as line_total %}
                                          <td align="right" class="sticky-cell">{{line_total}}</td>
                                          {% get_utlizedline_total row projectobj as utilized_amount %}
                                          <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                          {% get_quarter_details row i projectobj as line_itemobj %}
                                          <td align="right" class=""> {{line_itemobj.unit}} </td>
                                          <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                          <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                          <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                          <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% endfor %} <!-- this is for previous question loop ends for edit functionality -->
                           {% endif %} <!-- this if ends here. thsi is to check whether this is add and edit functionality  -->
                           <br>
                           <input type= "submit" class="report_save" id="submit_{{j|add:'1'}}" value="Save"></input>
                        </div>
                     </form>
                     {% endwith %}
                     {% endfor %}
                     <!-- Previous quarter updates ends here -->
                     <!-- current quarter upodates starts here -->
                     {% for i,v in currentquarter_list.items %}
                     {% with forloop.counter as j %}
                     <h3 class="heading">Current Quarter Updates :{{v}}</h3>
                     <form action=".?slug={{slug}}&report_id={{report_id}}" id='ui-accordion-accordion-panel-{{j|add:previous_len}}' method = "post">
                        {% csrf_token %}
                        <input type="hidden" name="activity_count_1" value="1">
                        <input type="hidden" name="activity-pic-count_1" value="1">
<!--                        <input type="hidden" name="current_parameter_count_1" value="1">-->
                        <input type="hidden" name="report_id" value="{{report_id}}" id="{{report_id}}">
                        <input type="hidden" name="key" value={{key}}>
                        <div>
                           {% getreport_status report_id v 2 as reportupdates %}
                           {% if reportupdates.0 == False %}
                           <!--                        this is add functionality -->
                           {% for quest in current_questionlist %}
                           <!--                             this is for auto populate text -->
                           {% if quest.qtype == "APT" %}
                           <div class="col-md-6 report_text">
                              <p>{{quest.text|title}}</p>
                              {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                              <input type="text" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}" class="input_section">
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone and activity graph-->
                           {% if quest.slug == "milestones-activities-snapshot" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <!--                     <img src="/static/img/imgpage0802.jpg" style="width:100%">-->
                              <div class=" white-box ">
                                 <div id="gwContainer" className="col-md-12 gantt" style="padding-top: '25px', position: 'relative', height: 'auto', width:'100%'"></div>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for about the quarter-->
                           {% if quest.slug == "about-the-quarter" %}
                           <div class="col-md-6 report_text" style="padding:0px; margin-bottom:30px">
                              <p>{{quest.text|title}}</p>
                              <textarea type="text" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file"> </textarea>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone section-->
                           {% if quest.slug == "activity-section" %}
                           <input type="hidden" name="activity_count_{{i}}_1" value="1">
                           <input type="hidden" name="activity-pic-count_1" value="1">
                           <input type="hidden" name="current_parameter_count_1" value="1">
                           <input type="hidden" name="add_section" value="0">
                           <div class="milestone data_row_{{i}}_1" id="data_row_{{i}}_1">
                              {% get_previous_subquestions quest as activity_questions %}
                              <div class="col-md-6 report_text ">
                                 {% for act_quest in activity_questions %}
                                     {% if act_quest.slug == "activity-name" %}
                                        <p>{{act_quest.text|title}}</p>
                                        <input type="text " id="{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0" name="{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0" class="input_section">
                                        <h5><a href="#">Remove</a></h5>
                                    {% endif %}
                                    
                                     {% if act_quest.slug == "about-the-actvity" %}
                                    <div class=" report_text">
                                        <p>{{act_quest.text|title}}</p>
                                        <div class="">
                                            <textarea class="textarea_file" id = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0" name = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0"> </textarea>
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                    </div>
                                    {% endif %}
                                 {% endfor %}
                              </div>
                              {% for act_quest in activity_questions %}
                              <div class="col-md-6 report_text">
                                 {% if act_quest.slug == "upload-picture" %}
                                    <div class=" report_text">
                                        <p>{{act_quest.text|title}}</p>
                                        <div class="form-group upload_text">
                                            <input type="file" id = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0_0" name = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0_0">
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                    </div>
                                {% endif %}
                                 {% if act_quest.slug == "picture-description" %}
                                    <div class=" report_text">
                                        <p>{{act_quest.text|title}}</p>
                                        <div class="form-group">
                                            <input type="text " id = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0_0" name = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_0_0" class="form_section input_section">
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                        <div class="form-group addpicture">
                                            <input type="file" id="file02">
                                        </div>
                                    </div>
                                {% endif %}
                              </div>
                              {% endfor %}
                           </div>
                           <div class="form-group addmilestone click_buttons">
                              <div class="link-left">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="aadd_clone_{{i}}_{{j}}">Add more</a>
                                        </div>
                                        <div class="link-center">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="aadd_remove_{{i}}_{{j}}">Remove</a>
                                        </div>
                           </div>
                           {% endif %}
                           <!--                     this is for parameter selection -->
                           {% if quest.slug == "parameter-section" %}
                           <hr class="border_line">
                           <div class="milestone para_data_row_{{i}}_1" id="data_row_{{i}}_1">
                                {% get_previous_subquestions quest as parameter_questions %}

                                    {% for param_quest in parameter_questions %}
                                        {% if param_quest.slug == "parameter-selection" %}
                                            <div class="col-md-6 report_text parameter_section">
                                                <p>{{param_quest.text|title}}</p>
                                                <select name="{{param_quest.text}}_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0" id="parameter-selection_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0" >
                                                    <option value="0">Select</option>
                                                    {% for i in project_paramterlist %}
                                                    <option value="{{i.id}}">{{i.name}}</option>
                                                    {% endfor %}
                                                </select>
                                                <h5><a href="#">Remove</a></h5>
                                            </div>
                                           {% endif %}
                                           
                                          {% if param_quest.slug == "about-parameter" %}
                                            <div class="col-md-12 report_text ">
                                                <p>{{param_quest.text|title}}</p>
                                                <div class="">
                                                    <textarea class = "textarea_file" id="{{param_quest.text}}_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0" name="{{param_quest.text}}_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_0"></textarea>
                                                </div>
                                                <h5><a href="#">Remove</a></h5>
                                            </div>
                                          {% endif %}
                                   {% endfor %}
                                 </div>
                                   <div class="form-group addmilestone click_buttons">
                                        <div class="link-left">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="para_add_clone_{{i}}_{{j}}">Add more</a>
                                        </div>
                                        <div class="link-center">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="para_add_remove_{{i}}_{{j}}">Remove</a>
                                        </div>
                                  </div>
                           {% endif %}
                           <!--                            this is for budget table display-->
                           {% if quest.slug == "budget-utlization-tranches" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <div class="table-responsive sticky-table sticky-headers sticky-ltr-cells table-wrap">
                                 <table class="table table-boardered table-striped table-striped budget_table">
                                    <thead>
                                       <tr class="sticky-row">
                                          <th  class="sticky-cell">Super Category</th>
                                          <th  class="sticky-cell">Heading</th>
                                          <th  class="sticky-cell">Subheading</th>
                                          <th  class="sticky-cell">Total Planned</th>
                                          <th  class="sticky-cell">Total Utilized</th>
                                          <th  class="sticky-cell">Units Type</th>
                                          <th>Units</th>
                                          <th>Rate</th>
                                          <th> Planned</th>
                                          <th> Utilized</th>
                                          <th>Variance</th>
                                       </tr>
                                    </thead>
                                    <tbody class="budget_section">
                                       {% for row in budget_period %}
                                       <tr class = "data_row">
                                          {% get_budget_lineitem row projectobj as lineitemobj %}
                                          <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                          <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                          {% get_line_total row projectobj as line_total %}
                                          <td align="right" class="sticky-cell">{{line_total}}</td>
                                          {% get_utlizedline_total row projectobj as utilized_amount %}
                                          <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                          {% get_quarter_details row i projectobj as line_itemobj %}
                                          <td align="right" class=""> {{line_itemobj.unit}} </td>
                                          <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                          <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                          <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                          <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% if quest.slug == "about-the-budget" %}
                           <div class="col-md-12 report_text current_quarter">
                              <p>{{quest.text|title}}</p>
                              <div class="">
                                 <textarea type="text" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file"> </textarea>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% if quest.slug == "risks-mitigation" %}
                           <div class="col-md-12 report_text current_quarter">
                              <p>{{quest.text|title}}</p>
                              <div class="">
                                 <textarea type="text" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file"> </textarea>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% endfor %} <!-- this for ends for previous question list -->
                           {% else %}
                           {% for quest in current_questionlist %} <!-- this is for loop for  if object is present -->
                           <!--                             this is for auto populate text -->
                           {% if quest.qtype == "APT" %}
                           <div class="col-md-6 report_text">
                              <p>{{quest.text|title}}</p>
                              {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                              <input type="text" class="input_section" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}" >
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone and activity graph-->
                           {% if quest.slug == "milestones-activities-snapshot" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <!--                     <img src="/static/img/imgpage0802.jpg" style="width:100%">-->
                              <div class=" white-box ">
                                 <div id="gwContainer" className="col-md-12 gantt" style="padding-top: '25px', position: 'relative', height: 'auto', width:'100%'"></div>
                              </div>
                           </div>
                           {% endif %}
                           <!--                            this is for about the quarter-->
                           {% if quest.slug == "about-the-quarter" %}
                           <div class="col-md-6 report_text" style="padding:0px; margin-bottom:30px">
                              <h5><a href="#">Remove</a></h5>
                              <p>{{quest.text|title}}</p>
                              {% get_answer_question quest reportupdates.1 as text %}
                              <textarea type="text" class="textarea_file" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"> {{text}} </textarea>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone section-->
                           {% if quest.slug == "activity-section" %}
                           {% get_milestone_list quest reportupdates.1 as act_mile_list %} <!-- to loop the number of activity obj -->
                           <input type="hidden" name="activity_count_{{i}}_1" value="{{act_mile_list|length}}">
<!--                            <input type="hidden" name="activity-pic-count_1" value="1">-->
<!--                            <input type="hidden" name="current_parameter_count_1" value="1">-->
                            <input type="hidden" name="add_section" value="1">
                           {% for mileobj in act_mile_list %} <!--  for loop for activity list -->
                           {% with forloop.counter as m_count %}
                        
                            <div class="milestone data_row_{{i}}_{{m_count}}">
                            {% get_previous_subquestions quest as activity_questions %}
                                <div class="col-md-6 report_text ">

                                {% for act_quest in activity_questions %}

                                    {% if act_quest.slug == "activity-name" %}
                                        <p>{{act_quest.text|title}}</p>
                                        <input type="text " class="input_section" id="{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}" name="{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}" value="{{mileobj.name}}" >
                                        <h5><a href="#">Remove</a></h5>
                                    {% endif %}


                                    {% if act_quest.slug == "about-the-actvity" %}
                                    <div class=" report_text">
                                        <p>{{act_quest.text|title}}</p>
                                        <div class="">
                                            <textarea class="textarea_file" id = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}" name = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}" value = "{{mileobj.description}}"> {{mileobj.description}} </textarea>
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                    </div>
                                    {% endif %}
                                {% endfor %}
                                </div>
                                {% get_mile_act_images mileobj as imagelist %}
                                {% for imageobj in imagelist %}
                                {% for act_quest in activity_questions %}
                                <div class="col-md-6 report_text">
                                {% if act_quest.slug == "upload-picture" %}
                                    <div class=" report_text">
                                        <p>{{act_quest.text|title}} </p>
                                        <div class="form-group upload_text">
                                            <input type="file" id = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}_{{imageobj.id}}" name = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}_{{imageobj.id}}" value="{{imageobj.attachment_file}}"> {{imageobj.attachment_file}}
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                    </div>
                                {% endif %}
                                {% if act_quest.slug == "picture-description" %}
                                    <div class=" report_text">
                                        <p>{{act_quest.text|title}}</p>
                                        <div class="form-group">
                                            <input type="text "  class="form_section input_section" id = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}_{{imageobj.id}}" name = "{{act_quest.text}}_2_{{i}}_{{act_quest.id}}_{{j}}_1_{{mileobj.id}}_{{imageobj.id}}" value = "{{imageobj.description}}" >
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                        <div class="form-group addpicture">
                                            <input type="file" id="file02">
                                        </div>
                                    </div>
                                {% endif %}
                                </div>
                                {% endfor %}
                                {% endfor %}
                            </div>
                            {% endwith %}
                           {% endfor %}
                           <div class="form-group addmilestone click_buttons">
                              <div class="link-left">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="aedit_clone_{{i}}_{{j}}">Add more</a>
                                        </div>
                                        <div class="link-center">
                                            <input type="hidden"/>
                                            <a href ="javascript:void(0);" class ="aedit_remove_{{i}}_{{j}}">Remove</a>
                                        </div>
                           </div>
                           {% endif %}
                           <!--                     this is for parameter selection -->
                           {% if quest.slug == "parameter-section" %}
                           <hr class="border_line">
                           {% get_parameters_list quest reportupdates.1 as parameters_list %}
                                
                                <input type="hidden" name="current_parameter_count_1" value="{{parameters_list|length}}">
                                <input type="hidden" name="add_section" value="1">
                                
                            {% for paramobj in parameters_list %}
                                {% with forloop.counter as m_count %}
                                <div class="milestone para_data_row_{{i}}_{{m_count}}">
                              {% get_previous_subquestions quest as parameter_questions %}
                              {% for param_quest in parameter_questions %}
                                  {% if param_quest.slug == "parameter-selection" %}

                                    <div class="col-md-6 report_text parameter_section">
                                        <p>{{param_quest.text|title}}</p>
                                        <select name="{{param_quest.text}}_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}" id="parameter-selection_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}" >
                                            <option value="0">Select</option>
                                            {% for i in project_paramterlist %}
                                            <option value="{{i.id}}" {% if i.id == paramobj.keyparameter.id %} selected=selected {% endif %}>{{i.name}}</option>
                                            {% endfor %}
                                        </select>
                                        <h5><a href="#">Remove</a></h5>
                                    </div>
                                    {% endif %}
                                    
                                  {% if param_quest.slug == "about-parameter" %}
                                    <div class="col-md-12 report_text ">
                                        <p>{{param_quest.text|title}}</p>
                                        <div class="">
                                            <textarea  class="textarea_file" id="{{param_quest.text}}_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}" name="{{param_quest.text}}_2_{{i}}_{{param_quest.id}}_{{j}}_1_parameter_{{paramobj.id}}">{{paramobj.description}}</textarea>
                                        </div>
                                        <h5><a href="#">Remove</a></h5>
                                    </div>
                                    {% endif %}

                                    {% endfor %}
                                
                           </div>
                                {% endwith %}
                                {% endfor %}
                               <div class="form-group addmilestone click_buttons">
                                            <div class="link-left">
                                                <input type="hidden"/>
                                                <a href ="javascript:void(0);" class ="para_edit_clone_{{i}}_{{j}}">Add more</a>
                                            </div>
                                            <div class="link-center">
                                                <input type="hidden"/>
                                                <a href ="javascript:void(0);" class ="para_edit_remove_{{i}}_{{j}}">Remove</a>
                                            </div>
                                    </div>
                           {% endif %}
                           <!--                            this is for budget table display-->
                           {% if quest.slug == "budget-utlization-tranches" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <div class="table-responsive sticky-table sticky-headers sticky-ltr-cells table-wrap">
                                 <table class="table table-boardered table-striped table-striped budget_table">
                                    <thead>
                                       <tr class="sticky-row">
                                          <th  class="sticky-cell">Super Category</th>
                                          <th  class="sticky-cell">Heading</th>
                                          <th  class="sticky-cell">Subheading</th>
                                          <th  class="sticky-cell">Total Planned</th>
                                          <th  class="sticky-cell">Total Utilized</th>
                                          <th  class="sticky-cell">Units Type</th>
                                          <th>Units</th>
                                          <th>Rate</th>
                                          <th> Planned</th>
                                          <th> Utilized</th>
                                          <th>Variance</th>
                                       </tr>
                                    </thead>
                                    <tbody class="budget_section">
                                       {% for row in budget_period %}
                                       <tr class = "data_row">
                                          {% get_budget_lineitem row projectobj as lineitemobj %}
                                          <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                          <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                          {% get_line_total row projectobj as line_total %}
                                          <td align="right" class="sticky-cell">{{line_total}}</td>
                                          {% get_utlizedline_total row projectobj as utilized_amount %}
                                          <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                          {% get_quarter_details row i projectobj as line_itemobj %}
                                          <td align="right" class=""> {{line_itemobj.unit}} </td>
                                          <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                          <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                          <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                          <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>
                              </div>
                              {% endif %}
                              {% if quest.slug == "about-the-budget" %}
                              <div class="col-md-12 report_text current_quarter">
                                 <p>{{quest.text|title}}</p>
                                 {% get_answer_question quest reportupdates.1 as text %}
                                 <div class="">
                                    <textarea class="textarea_file" type="text" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"> {{text}} </textarea>
                                 </div>
                                 <h5><a href="#">Remove</a></h5>
                              </div>
                              {% endif %}
                              {% if quest.slug == "risks-mitigation" %}
                              <div class="col-md-12 report_text current_quarter">
                                 <p>{{quest.text|title}}</p>
                                 {% get_answer_question quest reportupdates.1 as text %}
                                 <div class="">
                                    <textarea class="textarea_file" type="text" id="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_2_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"> {{text}}</textarea>
                                 </div>
                                 <h5><a href="#">Remove</a></h5>
                              </div>
                              <!--                     this is if object is already exists.-->
                              {% endif %}
                              {% endfor %} <!-- this for ends for edit currrent question list -->
                              {% endif %}
                              <!--                           this is for edit functions-->
                           </div>
                           <br>
                           <input type= "submit" class="report_save" id="submit_{{j|add:previous_len}}" value="Save"></input>
                        </div>
                     </form>
                     {% endwith %}
                     {% endfor %}
                     <!--   End of current quarter updates                     -->
                     <!-- Next quarter updates starts here            -->
                     {% for i,v in futurequarter_list.items|slice:"1" %}
                     {% with forloop.counter as j %}
                     <h3 class="heading">Next Quarter Plan :{{v}}</h3>
                     <form action=".?slug={{slug}}&report_id={{report_id}}" id='ui-accordion-accordion-panel-{{j|add:current_len}}' method = "post">
                        {% csrf_token %}
                        <input type="hidden" name="activity_count_1" value="1">
                        <input type="hidden" name="report_id" value="{{report_id}}" id="{{report_id}}">
                        <input type="hidden" name="key" value={{key}}>
                        <div>
                           {% getreport_status report_id v 3 as reportupdates %}
                           {% if reportupdates.0 == False %}
                           {% for quest in next_questionlist %}
                           <!--                             this is for auto populate text -->
                           {% if quest.qtype == "APT" %}
                           <div class="col-md-6 report_text">
                              <p>{{quest.text|title}}</p>
                              {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                              <input type="text" id="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" value="{{text}}" class="input_section">
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone and activity graph-->
                           {% if quest.slug == "milestones-activities-snapshot" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <!--                     <img src="/static/img/imgpage0802.jpg" style="width:100%">-->
                              <div class=" white-box ">
                                 <div id="gwContainer_next" className="col-md-12 gantt" style="padding-top: '25px', position: 'relative', height: 'auto', width:'100%'"></div>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for about the quarter-->
                           {% if quest.slug == "about-the-quarter" %}
                           <div class="col-md-12 report_text current_quarter" style="padding:0px; margin-bottom:30px">
                              <p>{{quest.text|title}}</p>
                              <textarea type="text" id="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file"> </textarea>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--this is for budget and tranches table -->
                           {% if quest.slug == "budget-utlization-tranches" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <div class="table-responsive sticky-table sticky-headers sticky-ltr-cells table-wrap">
                                 <table class="table table-boardered table-striped table-striped budget_table">
                                    <thead>
                                       <tr class="sticky-row">
                                          <th  class="sticky-cell">Super Category</th>
                                          <th  class="sticky-cell">Heading</th>
                                          <th  class="sticky-cell">Subheading</th>
                                          <th  class="sticky-cell">Total Planned</th>
                                          <th  class="sticky-cell">Total Utilized</th>
                                          <th  class="sticky-cell">Units Type</th>
                                          <th>Units</th>
                                          <th>Rate</th>
                                          <th> Planned</th>
                                          <th> Utilized</th>
                                          <th>Variance</th>
                                       </tr>
                                    </thead>
                                    <tbody class="budget_section">
                                       {% for row in budget_period %}
                                       <tr class = "data_row">
                                          {% get_budget_lineitem row projectobj as lineitemobj %}
                                          <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                          <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                          {% get_line_total row projectobj as line_total %}
                                          <td align="right" class="sticky-cell">{{line_total}}</td>
                                          {% get_utlizedline_total row projectobj as utilized_amount %}
                                          <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                          {% get_quarter_details row i projectobj as line_itemobj %}
                                          <td align="right" class=""> {{line_itemobj.unit}} </td>
                                          <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                          <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                          <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                          <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                              <br>
                              <div class="table-responsive">
                                 <table class="table table-boardered budget_table tab-resp1" cellpadding="0" cellspacing="0" border="0">
                                    <thead>
                                       <tr>
                                          <th align="center">Tranche No.</th>
                                          <th>Due Date</th>
                                          <th>Planned Amount</th>
                                          <th>Actual Disbursement</th>
                                          <th>Recommended Disbursement</th>
                                          <th> Utilized</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       {% for i in tranche_list %}
                                       {% with forloop.counter as rnum %}
                                       <tr>
                                          <td>{{rnum}}</td>
                                          <td>{{i.due_date}}</td>
                                          <td> Rs. {% if  i.planned_amount %} {{i.planned_amount}} {% else %} 0 {% endif %}</td>
                                          <td> Rs. {% if  i.actual_disbursed_amount %} {{i.actual_disbursed_amount}}  {% else %} 0 {% endif %} </td>
                                          <td> Rs. {% if  i.recommended_amount %} {{i.recommended_amount}}  {% else %} 0 {% endif %} </td>
                                          <td> Rs. {% if  i.utilized_amount %} {{i.utilized_amount}}  {% else %} 0 {% endif %} </td>
                                       </tr>
                                       {% endwith %}
                                       {% endfor %}
                                       <tr bgcolor="#f1f3e9" class="table-tr">
                                          <td>Total</td>
                                          <td>&nbsp;</td>
                                          <td>Rs. {% if planned_amount %} {{planned_amount}} {% else %} 0 {% endif %} </td>
                                          <td>Rs. {% if actual_disbursed_amount %}{{actual_disbursed_amount}} {% else %} 0 {% endif %} </td>
                                          <td>Rs. {% if recommended_amount %} {{recommended_amount}}{% else %} 0 {% endif %} </td>
                                          <td>Rs. {% if utilized_amount %}{{utilized_amount}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!--<img src="img/table01.png" style="width:100%">-->
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--this is for about paramter section-->
                           {% if quest.slug == "about-the-budget" %}
                           <div class="col-md-12 report_text current_quarter">
                              <p>{{quest.text|title}}</p>
                              <div class="">
                                 <textarea type="text" id="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file"> </textarea>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% endfor %} <!-- future question for loop ends here -->
                           {% else %} <!--  if object is there -->
                           <!--                        if object is der                            -->
                           {% for quest in next_questionlist %}
                           <!--                             this is for auto populate text -->
                           {% if quest.qtype == "APT" %}
                           <div class="col-md-6 report_text">
                              <p>{{quest.text|title}}</p>
                              {% get_previous_question_value quest v i projectreportobj reportupdates as text %}
                              <input type="text" id="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" value="{{text}}" class="input_section">
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for milestone and activity graph-->
                           {% if quest.slug == "milestones-activities-snapshot" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <!--                     <img src="/static/img/imgpage0802.jpg" style="width:100%">-->
                              <div class=" white-box ">
                                 <div id="gwContainer_next" className="col-md-12 gantt" style="padding-top: '25px', position: 'relative', height: 'auto', width:'100%'"></div>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--                            this is for about the quarter-->
                           {% if quest.slug == "about-the-quarter" %}
                           <div class="col-md-12 report_text current_quarter" style="padding:0px; margin-bottom:30px">
                              <p>{{quest.text|title}} </p>
                              {% get_answer_question quest reportupdates.1 as text %}
                              <textarea type="text" id="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file">  {{text}}</textarea>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--this is for budget and tranches table -->
                           {% if quest.slug == "budget-utlization-tranches" %}
                           <div class="col-md-12 report_text " style="padding:0px">
                              <p>{{quest.text|title}}</p>
                              <div class="table-responsive sticky-table sticky-headers sticky-ltr-cells table-wrap">
                                 <table class="table table-boardered table-striped table-striped budget_table">
                                    <thead>
                                       <tr class="sticky-row">
                                          <th  class="sticky-cell">Super Category</th>
                                          <th  class="sticky-cell">Heading</th>
                                          <th  class="sticky-cell">Subheading</th>
                                          <th  class="sticky-cell">Total Planned</th>
                                          <th  class="sticky-cell">Total Utilized</th>
                                          <th  class="sticky-cell">Units Type</th>
                                          <th>Units</th>
                                          <th>Rate</th>
                                          <th> Planned</th>
                                          <th> Utilized</th>
                                          <th>Variance</th>
                                       </tr>
                                    </thead>
                                    <tbody class="budget_section">
                                       {% for row in budget_period %}
                                       <tr class = "data_row">
                                          {% get_budget_lineitem row projectobj as lineitemobj %}
                                          <td class="sticky-cell"> {{lineitemobj.category.name}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.heading.name}} </td>
                                          <td class="sticky-cell"> {{lineitemobj.subheading}} </td>
                                          {% get_line_total row projectobj as line_total %}
                                          <td align="right" class="sticky-cell">{{line_total}}</td>
                                          {% get_utlizedline_total row projectobj as utilized_amount %}
                                          <td align="right" class="sticky-cell">{{utilized_amount}}</td>
                                          <td class="sticky-cell"> {{lineitemobj.unit_type}}  </td>
                                          {% get_quarter_details row i projectobj as line_itemobj %}
                                          <td align="right" class=""> {{line_itemobj.unit}} </td>
                                          <td align="right" class=""> {{line_itemobj.rate}}  </td>
                                          <td align="right" class=""> {{line_itemobj.planned_unit_cost}}  </td>
                                          <td align="right" class=""> {% if line_itemobj.utilized_unit_cost %} {{line_itemobj.utilized_unit_cost}} {% else %} 0 {% endif %}</td>
                                          <td align="right" class=""> {% if line_itemobj.variance %} {{line_itemobj.variance}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                              <br>
                              <div class="table-responsive">
                                 <table class="table table-boardered budget_table tab-resp1" cellpadding="0" cellspacing="0" border="0">
                                    <thead>
                                       <tr>
                                          <th align="center">Tranche No.</th>
                                          <th>Due Date</th>
                                          <th>Planned Amount</th>
                                          <th>Actual Disbursement</th>
                                          <th>Recommended Disbursement</th>
                                          <th> Utilized</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       {% for i in tranche_list %}
                                       {% with forloop.counter as rnum %}
                                       <tr>
                                          <td>{{rnum}}</td>
                                          <td>{{i.due_date}}</td>
                                          <td> Rs. {% if  i.planned_amount %} {{i.planned_amount}} {% else %} 0 {% endif %}</td>
                                          <td> Rs. {% if  i.actual_disbursed_amount %} {{i.actual_disbursed_amount}}  {% else %} 0 {% endif %} </td>
                                          <td> Rs. {% if  i.recommended_amount %} {{i.recommended_amount}}  {% else %} 0 {% endif %} </td>
                                          <td> Rs. {% if  i.utilized_amount %} {{i.utilized_amount}}  {% else %} 0 {% endif %} </td>
                                       </tr>
                                       {% endwith %}
                                       {% endfor %}
                                       <tr bgcolor="#f1f3e9" class="table-tr">
                                          <td>Total</td>
                                          <td>&nbsp;</td>
                                          <td>Rs. {% if planned_amount %} {{planned_amount}} {% else %} 0 {% endif %} </td>
                                          <td>Rs. {% if actual_disbursed_amount %}{{actual_disbursed_amount}} {% else %} 0 {% endif %} </td>
                                          <td>Rs. {% if recommended_amount %} {{recommended_amount}}{% else %} 0 {% endif %} </td>
                                          <td>Rs. {% if utilized_amount %}{{utilized_amount}} {% else %} 0 {% endif %}</td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!--<img src="img/table01.png" style="width:100%">-->
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           <!--this is for about paramter section-->
                           {% if quest.slug == "about-the-budget" %}
                           <div class="col-md-12 report_text current_quarter">
                              <p>{{quest.text|title}}</p>
                              <div class="">
                                 {% get_answer_question quest reportupdates.1 as text %}
                                 <textarea type="text" id="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" name="{{quest.slug}}_3_{{i}}_{{quest.id}}_{{j}}" value="{{text}}"  class="textarea_file"> {{text}} </textarea>
                              </div>
                              <h5><a href="#">Remove</a></h5>
                           </div>
                           {% endif %}
                           {% endfor %} <!-- future question for loop ends here -->
                           <!--                        object loop ends here                   -->
                           {% endif %} <!-- if object is present loop ends here-->
                           <br>
                           <input type= "submit" class="report_save" id="submit_{{future_len}}" value="Save"></input>
                        </div>
                     </form>
                     {% endwith %} <!-- main quarter for loop ends here -->
                     {% endfor %}
                     <!--ends nexrt quarter updates -->
                  </div>
               </div>
            </div>
         </div>
         <div class="below_buttons">
            <hr>
            <div style="float:left">
               <a href="/report/detail/?slug={{slug}}&report_id={{report_id}}/"><button class="report_save">Preview Report</button></a>
            </div>
            <div align="right" class="save_exit">
               <button class="report_save" id="submit_report">Submit Report</button>
               <button class="report_save" id="save_and_exit">Save And Exit</button>
            </div>
         </div>
      </div>
   </div>
   </div>
   </div>
</section>
<!--Content part Ends-->
<!--Footer starts-->
<footer>
   <div class="row">
      <div class="f-left">
         <ul>
            <li><a href="javascript:void(0);">Privacy Policy</a></li>
            <li><a href="javascript:void(0);">Terms of Service</a></li>
         </ul>
      </div>
      <div class="f-right">&copy; 2017 Good CSR. All Rights Reserved. Privacy Policy Terms of Service</div>
   </div>
</footer>
<!--Footer Ends-->
</div>
{% endblock %}
<!-- jQuery (necessary for JavaScript plugins) -->
<script type="text/javascript" src="/static/js/jquery.selectbox-0.2.js"></script>
<script type="text/javascript" src="/static/js/ddsmoothmenu.js"></script>
<script type="text/javascript" src="/static/js/jquery.mmenu.min.all.js"></script>
<script type="text/javascript" src="/static/js/common.js" ></script>
<script type="text/javascript" src="/static/js/jquery.scrollbox.js"></script>
<script src="/static/js/jquery.nicescroll.min.js"></script>
<!-- <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
   <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>-->
{% block script %}
<script>
   $( function() {
     $( "#accordion" ).accordion({
       collapsible: true
     });
   } );
</script>
<script>
   $(document).ready(function() {
     'use strict';
   
     $(window).on('ariaAccordion.initialised', function(event, element) {
       console.log('initialised');
     });
   
     $('.accordion-group').first().ariaAccordion({
       contentRole: ['document', 'application', 'document'],
       expandOnPageLoad: true,
       slideSpeed: 400
     });
   
     $('.accordion-group').last().ariaAccordion({
       contentRole: ['document', 'application', 'document'],
       expandOnPageLoad: true,
       expandOnlyOne: true,
       slideSpeed: 800
     });
   });
</script>
<script>
   //Toggle
   
   		 $('.user-menu').on('click',function(){
             $('.dropdown-menu').slideToggle();
   
           });
   		 $(document).ready(function(e) {
   	/*Content Show/Hide */
   	$('.hide-cont').hide();
   	$('.close-cont').hide();
   	$('.view-cont').click(function(){
   		$('.hide-cont').slideDown(350);
   		$('.close-cont').show();
   		$('.view-cont').hide();
   	});
   	$('.close-cont').click(function(){
   		$('.hide-cont').slideUp(350);
   		$('.close-cont').hide();
   		$('.view-cont').show();
   	});
    });
   
</script>
<script type="text/javascript">
   var expanded = false;
   
   function showCheckboxes() {
    var checkboxes = document.getElementById("checkboxes");
    if (!expanded) {
      checkboxes.style.display = "block";
      expanded = true;
    } else {
      checkboxes.style.display = "none";
      expanded = false;
    }
   }
   
</script>
<script>
   $(document).ready(function() {
   
   var nice = $("html").niceScroll();  // The document page (body)
   
   $("#div1").html($("#div1").html()+' '+nice.version);
   
     $("#boxscroll, .table-resp tbody").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true}); // First scrollable DIV
   
   
   });
</script>
<script>
   // Change the selector if needed
   var $table = $('table.scroll'),
   $bodyCells = $table.find('tbody tr:first').children(),
   colWidth;
   
   // Adjust the width of thead cells when window resizes
   $(window).resize(function() {
   // Get the tbody columns width array
   colWidth = $bodyCells.map(function() {
       return $(this).width();
   }).get();
   
   // Set the width of thead columns
   $table.find('thead tr').children().each(function(i, v) {
       $(v).width(colWidth[i]);
   });
   }).resize(); // Trigger resize handler
</script>
<script type="text/javascript" src="/static/js/bootstrap-filestyle.js"></script>
<script type="text/javascript">
   $('#input02').filestyle({
       text : 'Upload'
   });
</script>
<script type="text/javascript">
   $('#input05').filestyle({
       text : '+ add Picture'
   });
   
   $('#input04').filestyle({
       text : '+ add Milestone'
   });
   $('#file01').filestyle({
       text : '+ Upload Image'
   });
   
   $('#file02').filestyle({
       text : '+ add more picture'
   });
   $('#imge01').filestyle({
       text : '+ add more picture'
   });
   $('#imge02').filestyle({
       text : '+ add more picture'
   });
   $('#imge03').filestyle({
       text : '+ add more picture'
   });
   $('#inputpicture').filestyle({
       text : 'Upload'
   });
   $('#filemilestone').filestyle({
       text : 'Upload Image'
   });
   $('#filemilestone01').filestyle({
       text : 'Upload Image'
   });
   $('#filemilestone02').filestyle({
       text : 'Upload Image'
   });
   
   
</script>
<!-- <div class="milestone">
   <div class="col-md-6 report_text parameter_section">
   <p>Parameter Selection</p>
    <select>
      <option>Select</option>
      <option>1</option>
      <option>2</option>
       </select>
       <h5><a href="#">Remove</a></h5>
   
     </div>
     <div class="col-md-12 report_text ">
     <p>About parameter</p>
       <div class="text_area_height">
      <textarea placeholder="comment"></textarea>
   
       </div>
       <h5><a href="#">Remove</a></h5>
   
     </div>
   
   </div>-->
<script>
   $(document).ready(function() {
   var max_fields      = 20; //maximum input boxes allowed
   var wrapper         = $(".input_fields_wrap"); //Fields wrapper
   var add_button      = $(".add_field_button"); //Add button ID
   
   var x = 1; //initlal text box count
   $(add_button).click(function(e){ //on add input button click
   e.preventDefault();
   if(x < max_fields){ //max input box allowed
       x++; //text box increment
       $(wrapper).prepend('<div class="milestone"><div class="col-md-6"><p>Parameter Selection</p><select><option>fg</option></select></div><div class="col-md-12"><p>About parameter</p><textarea placeholder="dfgd"></textarea></div><div><br><a href="#" class="remove_field">Remove</a></div>'); //add input box
   }
   });
   
   $(wrapper).on("click",".remove_field", function(e){ //user click on remove text
   e.preventDefault(); $(this).parent('div').remove(); x--;
   })
   });
</script>
<link href="/static/css/jsgantt.css" rel="stylesheet" type="text/css" />
<script src="/static/js/jsgantt.js" type="text/javascript"></script>
<script>
   {% for i,v in currentquarter_list.items %}
       {% get_gantt_details v projectobj as taskdict %}
       var jsonData = {{taskdict|safe}}
    console.log(jsonData);
    var g = new JSGantt.GanttChart(document.getElementById('gwContainer'), 'week');
    // console.log(jsonData.tasks);
    // Get today and tomorrows date
    var cur = new Date();
    var tom = new Date();
    tom.setDate(tom.getDate() + 1);
    var curDate = cur.getFullYear() + '-' +
      (('' + (cur.getMonth() + 1)).length < 2 ? '0' : '') + (cur.getMonth() + 1) + '-' +
      (('' + cur.getDate()).length < 2 ? '0' : '') + cur.getDate();

    var tomDate = tom.getFullYear() + '-' +
      (('' + (tom.getMonth() + 1)).length < 2 ? '0' : '') + (tom.getMonth() + 1) + '-' +
      (('' + tom.getDate()).length < 2 ? '0' : '') + tom.getDate();
    // Get today and tomorrows date
    $.each(jsonData.supercategories, function (i) {
      superId = 1, activity_type = 'Core', taskCompletion = 0, superName = 'Super Category';
      if (this.id != null) {
        superId = this.id;
      }
      superName = this.name;
      var superDesc = this.description;
      if (superName.toLowerCase() != "location") {
        g.AddTaskItem(new JSGantt.TaskItem(superId, superName, '', '', 'ggroupblack', '', 0, null, 0, 1, 0, 1, '',
          '', superDesc, g));
      }
      // console.log("Super");
      // console.log(superId, superName, '', '', 'ggroupblack', '', 0, null, 0, 1, 0, 1, '',
      //   '', superDesc);
    });
    $.each(jsonData.activities, function (i) {
      var activityId = 11,
        superId = 1,
        activity_type = 'Core',
        taskCompletion = 0,
        activityName = 'Activity';
      if (this.id != null) {
        activityId = this.id.toString();
      }
      if (this.super_category != null) {
        superId = this.super_category;
        if (this.id != null) {
          activityId = this.super_category.toString() + activityId;
        }
      }
      // console.log("ActID", activityId);
      activityName = this.name;
      var activityDesc = this.description;
      g.AddTaskItem(new JSGantt.TaskItem(activityId, activityName, '', '', 'ggroupblack', '', 0, '', 0, 2, superId,
        1, '', '',
        activityDesc, g));
      // console.log("Act");
      // console.log(activityId, activityName, '', '', 'ggroupblack', '', 0, '', 0, 2, superId,1, '', '',activityDesc);
    });
    $.each(jsonData.tasks, function (i) {
      var taskId = 111,
        tempId = 1,
        activityId = 11,
        superId = 1,
        activity_type = 'Core',
        taskCompletion = 0,
        taskName = 'Task',
        taskStatus = 'gtaskred',
        eStartDate = curDate,
        eEndDate = tomDate;
      if (this.id != null) {
        taskId = this.id;
        tempId = this.id;
      }
      // added the script 16th-Nov
      if(this.task_progress != null || this.task_progress != undefined){
            taskCompletion = this.task_progress;
      }
      // ended th script
      if (this.activity != null) {
        activityId = this.activity;
      }
      // activity = jsonData.activities.filter(function( i ) {
      //   if(i.id == activityId){return i.super_category;}
      // });
      $.each(jsonData.activities, function () {
        if (this.id == activityId) {
          activity_type = this.activity_type;
          if (this.super_category != null) {
            superId = this.super_category;
          }
        }
      });
      if (superId != null && activityId != null && taskId != null) {
        taskId = superId.toString() + activityId.toString() + taskId.toString();
      }
      if (superId != null && activityId != null) {
        activityId = superId.toString() + activityId.toString();
      }
      activityId = parseInt(activityId);
      // console.log("TaskID", taskId);
      taskName = this.name;
      eStartDate = this.expected_start_date;
      eEndDate = this.expected_end_date;
      if (activity_type == "Core") {
        switch (this.status) {
          case "Ongoing":
            taskStatus = 'gtaskblue';
            break;
          case "Open":
            taskStatus = 'gtaskyellow';
            break;
          case "Close":
            taskStatus = 'gtaskgreen';
            break;
          default:
            taskStatus = 'gtaskblue';
            break;
        };
      }
      // For Milestones
      var completionDate = this.actual_end_date;
      console.log('Complete date', completionDate);
      $.each(jsonData.milestones, function (i) {
        var mileId = 111, 
        mileStatus = 'gmilestone redmile '
        depTask = [];
        depTask = this.task;
        mileName = this.name;
        if (this.id != null) {
          mileId = this.id;
        }
        // added the script 16th-Nov
        maxDate = new Date('1970-01-01');		
        var tempArray = [];		
        var n = 0;		
        $.each(depTask, function (index, value) {		
          console.log('value', n);		
          tempArray.push({		
            'id': value		
          });		
          for (var i = 0; i < jsonData.tasks.length; i++) {		
            if (jsonData.tasks[i].id == value && jsonData.tasks[i].actual_end_date != null) {		
              tempArray[n].date = new Date(jsonData.tasks[i].actual_end_date).getTime();		
            }		
            if (i == (depTask.length - 1)) {		
            		
              console.log('Array', depTask)		
              console.log('Max Date',Math.max(tempArray.date));		
            }		
          }		
          n++;		
        });		
        console.log("tempArray", tempArray);
        //end of  the added script
        // if (depTask.length == 1) {
        var ln = depTask.length;
        ln--;
        console.log('depTask', depTask[0]);
        if (depTask[ln] == tempId) {
          var d1 = new Date(eEndDate);
          var d2 = new Date(eEndDate);
          d1.setDate(d1.getDate() + 1);
          d2.setDate(d2.getDate() + 11);
          var mileStart = d1.getFullYear() + '-' +
            (('' + (d1.getMonth() + 1)).length < 2 ? '0' : '') + (d1.getMonth() + 1) + '-' +
            (('' + d1.getDate()).length < 2 ? '0' : '') + d1.getDate();

          var mileEnd = d2.getFullYear() + '-' +
            (('' + (d2.getMonth() + 1)).length < 2 ? '0' : '') + (d2.getMonth() + 1) + '-' +
            (('' + d2.getDate()).length < 2 ? '0' : '') + d2.getDate();
          //Check for milestone complete or calculate delay
          if (completionDate == null) {
            mileStatus = 'gmilestone redmile '
          } else {
            var d3 = new Date(this.overdue);
            var d4 = new Date(completionDate);
            var timeDiff = (d3.getTime() + 86400) - d4.getTime();
            var diffDays = Math.ceil(timeDiff / 86400000);
            console.log('DiffDays', diffDays);
            if (diffDays < 0) {
              var dur = rem = Math.abs(diffDays);
              if (dur < 8) { 
                mileName += " - Delayed by " + dur + " day(s)"
              };
              if (dur >= 8 && dur < 30) {
                dur = Math.floor(dur / 7); 
                //add 16th- Nov
                rem = Math.floor(rem % 7);
                mileName += " - Delayed by " + dur + " week(s) and " + rem + " day(s)";              
                };
                //end
              if (dur >= 30 && dur < 365) { 
                dur = Math.floor(dur / 30);
                //add 16th-Nov
                rem = Math.floor(rem % 30);
                mileName += " - Delayed by " + dur + " month(s) and " + rem + " day(s)";		
              };
                //end 
              if (dur >= 365) { 
                dur = Math.floor(dur / 365);
                //added script 
                rem = Math.floor(rem % 365);
                mileName += " - Delayed by " + dur + " year(s), " + rem + " day(s)";
              };
              //ended script
              console.log('Diff days', mileName);
            } else {
              mileStatus = 'gmilestone greenmile '
              var dur = rem = Math.abs(diffDays);
              if (dur == 0) {
                 mileName += " - On track"
              };
              if (dur < 8) { 
                mileName += " - Ahead by " + dur + " day(s)"
              };
              if (dur >= 8 && dur < 30) { 
                dur = Math.floor(dur / 7);
                rem = Math.floor(rem % 7);//new line
                mileName += " - Ahead by " + dur + " week(s) and " + rem + " day(s)";	//modified
              };
              if (dur >= 30 && dur < 365) { 
                dur = Math.floor(dur / 30);
                rem = Math.floor(rem % 30);//new line
                mileName += " - Ahead by " + dur + " month(s) and " + rem + " day(s)";//modified
              };
              if (dur >= 365) {
                 dur = Math.floor(dur / 365);
                rem = Math.floor(rem % 365);//new line
                mileName += " - Ahead by " + dur + " year(s), " + rem + " day(s)";//modified
                 };
              console.log('Diff days', mileName);
            }
          }
          g.AddTaskItem(new JSGantt.TaskItem(mileId, mileName, mileStart, mileEnd,
            mileStatus, '', 1, '', 100, 0, activityId, 1, '', '', '', g));//changed null to 100
        }
        // } else {
        //   var prevDate, maxDate;
        //   $.each(depTask, function () {
        //     var depValue = this.valueOf();
        //     $.each(jsonData.tasks,function(){
        //       if(this.id == depValue){

        //       }
        //     });
        //     console.log('Dep', this.valueOf(), depTask);
        //   });
        // }
        // g.AddTaskItem(new JSGantt.TaskItem(66141, 'Milestone', '2017-05-30T18:30:00Z', '2017-06-07T00:00:00Z',
        //   'gmilestone', '', 1, '', 10, 0, 6614, 1, '661496FS', '', '', g));
      });


      //Draw task after drawing milestone
      g.AddTaskItem(new JSGantt.TaskItem(taskId, taskName, eStartDate, eEndDate, taskStatus, '', 0,
        '', taskCompletion , 0, activityId, 1, '', '', '', g));
      // console.log("Task");
      // console.log(taskId, this.id, superId, taskName, eStartDate, eEndDate, taskStatus, '', 0,
      //   '', 0, 0, activityId, 1, '', '', '');

    });

    g.setShowStartDate(0);
    g.setShowEndDate(0);
    g.setShowRes(0);
    g.setShowDeps(0);
    g.setShowDur(0);
    g.setUseToolTip(0);
    g.setWeekColWidth(50);
    g.setWeekMajorDateDisplayFormat('mon yyyy');
    g.setWeekMinorDateDisplayFormat('W w');
    g.setScrollTo('today');
    g.Draw();

    function collision($div1, $div2) {
      var x1 = $div1.offset().left;
      var y1 = $div1.offset().top;
      var h1 = $div1.outerHeight(true);
      var w1 = $div1.outerWidth(true);
      var b1 = y1 + h1;
      var r1 = x1 + w1;
      var x2 = $div2.offset().left;
      var y2 = $div2.offset().top;
      var h2 = $div2.outerHeight(true);
      var w2 = $div2.outerWidth(true);
      var b2 = y2 + h2;
      var r2 = x2 + w2;

      if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2) return false;
      return true;
    }
    var count = 0,
      padding = 25,
      arrayTask = [],
      collide = false;
    $('.gselector').hide();
    $(document).ready(function () {
      var previous = null;
      var prePrevious = null;
      var mile = false;
      $(".gtaskbarcontainer").each(function (index) {
        currParent = $(this).parent().parent().parent();
        listParent = currParent.attr('id').replace('row', '');
        if ($(this).hasClass('gmilecontainer')) {
          mile = true;
        }
        if (previous && $(this).parent().parent().parent().attr('id') == $(previous).parent().parent().parent()
          .attr('id')) {
          // console.log("This ID", $(this).attr('id'), mile);
          if (mile) {

          }
          if (collision($(this), $(previous)) || collision($(this), $(prePrevious))) {
            $('#' + currParent.attr('id') + " .gtaskbarcontainer").each(function () {
              if ($(this).css('top') == '-5px') {
                $(this).css('top', '0px');
              }
            });
            collide = true;
            $(this).css('top', parseInt($(previous).css('top')) + padding + 'px');
            if (count == 0) {
              $(previous).css('top', '0px');
              count++;
            }
            listParentDiv = $('#' + listParent);
            if (parseInt(currParent.css('height')) <= parseInt($(this).css('top'))) {
              listParentDiv.css('height', parseInt(listParentDiv.css('height')) + 25 + 'px');
              currParent.css({
                'height': parseInt(currParent.css('height')) + 25 + 'px',
                'vertical-align': 'top'
              });
            }
          }
        } else {
          count = 0;
          arrayTask = [];
          collide = false;
          $('#' + currParent.attr('id') + ' .gtaskbarcontainer').css({
            top: '-5px'
          });
          mile = false;
        }
        prePrevious = previous;
        previous = this;
      });
    });
    // new script 16th-Nov 
    if (window.location.hash) {
        setTimeout(function() {
        $('html, body').scrollTop(0).show();	
        $('html, body').animate({	
                scrollTop: $(window.location.hash).offset().top - ($(window).height()/2) }, 1000)
        },0);
            $(window.location.hash).trigger('click')
    $(window.location.hash).click();
    }
    else{
        $('html, body').show();
    }
    // end of the script added 16th-Nov
    {% endfor %}
</script>
<script>
   {% for i,v in futurequarter_list.items %}
       {% get_gantt_details v projectobj as taskdict %}
       var jsonData = {{taskdict|safe}}
       var g = new JSGantt.GanttChart(document.getElementById('gwContainer_next'), 'week');
       // console.log(jsonData.tasks);
       // Get today and tomorrows date
       var cur = new Date();
       var tom = new Date();
       tom.setDate(tom.getDate() + 1);
       var curDate = cur.getFullYear() + '-' +
         (('' + (cur.getMonth() + 1)).length < 2 ? '0' : '') + (cur.getMonth() + 1) + '-' +
         (('' + cur.getDate()).length < 2 ? '0' : '') + cur.getDate();
   
       var tomDate = tom.getFullYear() + '-' +
         (('' + (tom.getMonth() + 1)).length < 2 ? '0' : '') + (tom.getMonth() + 1) + '-' +
         (('' + tom.getDate()).length < 2 ? '0' : '') + tom.getDate();
       // Get today and tomorrows date
       $.each(jsonData.supercategories, function (i) {
         superId = 1, activity_type = 'Core', taskCompletion = 0, superName = 'Super Category';
         if (this.id != null) {
           superId = this.id;
         }
         superName = this.name;
         var superDesc = this.description;
         if (superName.toLowerCase() != "location") {
           g.AddTaskItem(new JSGantt.TaskItem(superId, superName, '', '', 'ggroupblack', '', 0, null, 0, 1, 0, 1, '',
             '', superDesc, g));
         }
         // console.log("Super");
         // console.log(superId, superName, '', '', 'ggroupblack', '', 0, null, 0, 1, 0, 1, '',
         //   '', superDesc);
       });
       $.each(jsonData.activities, function (i) {
         var activityId = 11,
           superId = 1,
           activity_type = 'Core',
           taskCompletion = 0,
           activityName = 'Activity';
         if (this.id != null) {
           activityId = this.id.toString();
         }
         if (this.super_category != null) {
           superId = this.super_category;
           if (this.id != null) {
             activityId = this.super_category.toString() + activityId;
           }
         }
         // console.log("ActID", activityId);
         activityName = this.name;
         var activityDesc = this.description;
         g.AddTaskItem(new JSGantt.TaskItem(activityId, activityName, '', '', 'ggroupblack', '', 0, '', 0, 2, superId,
           1, '', '',
           activityDesc, g));
         // console.log("Act");
         // console.log(activityId, activityName, '', '', 'ggroupblack', '', 0, '', 0, 2, superId,1, '', '',activityDesc);
       });
       $.each(jsonData.tasks, function (i) {
         var taskId = 111,
           tempId = 1,
           activityId = 11,
           superId = 1,
           activity_type = 'Core',
           taskCompletion = 0,
           taskName = 'Task',
           taskStatus = 'gtaskred',
           eStartDate = curDate,
           eEndDate = tomDate;
         if (this.id != null) {
           taskId = this.id;
           tempId = this.id;
         }
         if (this.activity != null) {
           activityId = this.activity;
         }
         // activity = jsonData.activities.filter(function( i ) {
         //   if(i.id == activityId){return i.super_category;}
         // });
         $.each(jsonData.activities, function () {
           if (this.id == activityId) {
             activity_type = this.activity_type;
             if (this.super_category != null) {
               superId = this.super_category;
             }
           }
         });
         if (superId != null && activityId != null && taskId != null) {
           taskId = superId.toString() + activityId.toString() + taskId.toString();
         }
         if (superId != null && activityId != null) {
           activityId = superId.toString() + activityId.toString();
         }
         activityId = parseInt(activityId);
         // console.log("TaskID", taskId);
         taskName = this.name;
         eStartDate = this.expected_start_date;
         eEndDate = this.expected_end_date;
         if (activity_type == "Core") {
           switch (this.status) {
             case "Ongoing":
               taskStatus = 'gtaskblue';
               break;
             case "Open":
               taskStatus = 'gtaskyellow';
               break;
             case "Close":
               taskStatus = 'gtaskgreen';
               break;
             default:
               taskStatus = 'gtaskblue';
               break;
           };
         }
         // For Milestones
         var completionDate = this.actual_end_date;
         console.log('Complete date', completionDate);
         $.each(jsonData.milestones, function (i) {
           var mileId = 111, mileStatus = 'gmilestone redmile '
           depTask = [];
           depTask = this.task;
           mileName = this.name;
           if (this.id != null) {
             mileId = this.id;
           }
           // if (depTask.length == 1) {
           var ln = depTask.length;
           ln--;
           console.log('depTask', depTask[0]);
           if (depTask[ln] == tempId) {
             var d1 = new Date(eEndDate);
             var d2 = new Date(eEndDate);
             d1.setDate(d1.getDate() + 1);
             d2.setDate(d2.getDate() + 11);
             var mileStart = d1.getFullYear() + '-' +
               (('' + (d1.getMonth() + 1)).length < 2 ? '0' : '') + (d1.getMonth() + 1) + '-' +
               (('' + d1.getDate()).length < 2 ? '0' : '') + d1.getDate();
   
             var mileEnd = d2.getFullYear() + '-' +
               (('' + (d2.getMonth() + 1)).length < 2 ? '0' : '') + (d2.getMonth() + 1) + '-' +
               (('' + d2.getDate()).length < 2 ? '0' : '') + d2.getDate();
             //Check for milestone complete or calculate delay
             if (completionDate == null) {
               mileStatus = 'gmilestone redmile '
             } else {
               var d3 = new Date(this.overdue);
               var d4 = new Date(completionDate);
               var timeDiff = (d3.getTime() + 86400) - d4.getTime();
               var diffDays = Math.ceil(timeDiff / 86400000);
               console.log('DiffDays', diffDays);
               if (diffDays < 0) {
                 var dur = Math.abs(diffDays);
                 if (dur < 8) { mileName += " - Delayed by " + dur + " day(s)" };
                 if (dur >= 8 && dur < 30) { dur = Math.floor(dur / 7); mileName += " - Delayed by " + dur + "+ week(s)" };
                 if (dur >= 30 && dur < 365) { dur = Math.floor(dur / 30); mileName += " - Delayed by " + dur + "+ month(s)" };
                 if (dur >= 365) { dur = Math.floor(dur / 360); mileName += " - Delayed by " + dur + "+ year(s)" };
                 console.log('Diff days', mileName);
               } else {
                 mileStatus = 'gmilestone greenmile '
                 var dur = Math.abs(diffDays);
                 if (dur == 0) { mileName += " - On track" };
                 if (dur < 8) { mileName += " - Ahead by " + dur + " day(s)" };
                 if (dur >= 8 && dur < 30) { dur = Math.floor(dur / 7); mileName += " - Ahead by " + dur + "+ week(s)" };
                 if (dur >= 30 && dur < 365) { dur = Math.floor(dur / 30); mileName += " - Ahead by " + dur + "+ month(s)" };
                 if (dur >= 365) { dur = Math.floor(dur / 360); mileName += " - Ahead by " + dur + "+ year(s)" };
                 console.log('Diff days', mileName);
               }
             }
             g.AddTaskItem(new JSGantt.TaskItem(mileId, mileName, mileStart, mileEnd,
               mileStatus, '', 1, '', null, 0, activityId, 1, '', '', '', g));
           }
           // } else {
           //   var prevDate, maxDate;
           //   $.each(depTask, function () {
           //     var depValue = this.valueOf();
           //     $.each(jsonData.tasks,function(){
           //       if(this.id == depValue){
   
           //       }
           //     });
           //     console.log('Dep', this.valueOf(), depTask);
           //   });
           // }
           // g.AddTaskItem(new JSGantt.TaskItem(66141, 'Milestone', '2017-05-30T18:30:00Z', '2017-06-07T00:00:00Z',
           //   'gmilestone', '', 1, '', 10, 0, 6614, 1, '661496FS', '', '', g));
         });
   
   
         //Draw task after drawing milestone
         g.AddTaskItem(new JSGantt.TaskItem(taskId, taskName, eStartDate, eEndDate, taskStatus, '', 0,
           '', 0, 0, activityId, 1, '', '', '', g));
         // console.log("Task");
         // console.log(taskId, this.id, superId, taskName, eStartDate, eEndDate, taskStatus, '', 0,
         //   '', 0, 0, activityId, 1, '', '', '');
   
       });
   
       g.setShowStartDate(0);
       g.setShowEndDate(0);
       g.setShowRes(0);
       g.setShowDeps(0);
       g.setShowDur(0);
       g.setUseToolTip(0);
       g.setWeekColWidth(50);
       g.setWeekMajorDateDisplayFormat('mon yyyy');
       g.setWeekMinorDateDisplayFormat('W w');
       // g.setScrollTo('today');
       g.Draw();
   
       function collision($div1, $div2) {
         var x1 = $div1.offset().left;
         var y1 = $div1.offset().top;
         var h1 = $div1.outerHeight(true);
         var w1 = $div1.outerWidth(true);
         var b1 = y1 + h1;
         var r1 = x1 + w1;
         var x2 = $div2.offset().left;
         var y2 = $div2.offset().top;
         var h2 = $div2.outerHeight(true);
         var w2 = $div2.outerWidth(true);
         var b2 = y2 + h2;
         var r2 = x2 + w2;
   
         if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2) return false;
         return true;
       }
       var count = 0,
         padding = 25,
         arrayTask = [],
         collide = false;
       $('.gselector').hide();
       $(document).ready(function () {
         var previous = null;
         var prePrevious = null;
         var mile = false;
         $(".gtaskbarcontainer").each(function (index) {
           currParent = $(this).parent().parent().parent();
           listParent = currParent.attr('id').replace('row', '');
           if ($(this).hasClass('gmilecontainer')) {
             mile = true;
           }
           if (previous && $(this).parent().parent().parent().attr('id') == $(previous).parent().parent().parent()
             .attr('id')) {
             // console.log("This ID", $(this).attr('id'), mile);
             if (mile) {
   
             }
             if (collision($(this), $(previous)) || collision($(this), $(prePrevious))) {
               $('#' + currParent.attr('id') + " .gtaskbarcontainer").each(function () {
                 if ($(this).css('top') == '-5px') {
                   $(this).css('top', '0px');
                 }
               });
               collide = true;
               $(this).css('top', parseInt($(previous).css('top')) + padding + 'px');
               if (count == 0) {
                 $(previous).css('top', '0px');
                 count++;
               }
               listParentDiv = $('#' + listParent);
               if (parseInt(currParent.css('height')) <= parseInt($(this).css('top'))) {
                 listParentDiv.css('height', parseInt(listParentDiv.css('height')) + 25 + 'px');
                 currParent.css({
                   'height': parseInt(currParent.css('height')) + 25 + 'px',
                   'vertical-align': 'top'
                 });
               }
             }
           } else {
             count = 0;
             arrayTask = [];
             collide = false;
             $('#' + currParent.attr('id') + ' .gtaskbarcontainer').css({
               top: '-5px'
             });
             mile = false;
           }
           prePrevious = previous;
           previous = this;
         });
       });
    {% endfor %}
</script>
<script>
   //var loop_count = $('#loop_count').val()
   {% for i,v in previousquarter_list.items %}
   {% to_and v as timeperiod %}
   var wrapper = $(".timeline-slide_" + "{{timeperiod}}"); //Fields wrapper
   {% get_timeline_progress projectobj v as timeline %}
   var lengths = {{timeline.1}};
   var ff= {{timeline.0|safe}}
   var loc_url = '{{image}}'
   var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun","July", "Aug", "Sep", "Oct", "Nov", "Dec"];
   for (var i = 0; i < lengths ; i++)
   {
     var obj = ff[i]
     var name = obj.name;
     console.log(obj);
     if (obj.url) {
       var url = loc_url + obj.url;
       }
   else{
         var url = loc_url + '/' +"/static/img/milestone-icon.png";
       };
       var date = obj.date
       var f = new Date(date);
       var month = months[f.getMonth()];
       var nn = f.getMonth();
       var ids = obj.id
       var date1 = f.getDate()
       //alert(date1);
       function delete_upload()
       {
           //return confirm("Are you sure you want to delete this item?");
           alert("Are you sure?");
       }
     if (i % 2) {
       if (obj.type == 'image') {
       $(wrapper).append('<li class="event-up">&nbsp;<div class="event-img"><img height=112px width=162px src='+url+' alt=""><p>'+name+'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+month+'</span></div></li>');
       }else{
         $(wrapper).append(' <li class="event-up red-down current-event">&nbsp;<div class="event-img"><h3>Milestone Achieved</h3><div class= "image_tag"><img src="/static/img/milestone-icon.png" alt=""></div><p>'+ name +'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+ month +'</span></div></a></li>');
       };
     } else {
       if (obj.type == 'image') {
       $(wrapper).append('<li class="event-down">&nbsp;<div class="event-img"><img height=112px width=162px src='+url+' alt=""><p>'+name+'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+month+'</span></div></li>');
       }else{
         $(wrapper).append(' <li class="event-down red-down current-event">&nbsp;<div class="event-img"><h3>Milestone Achieved</h3><img src="/static/img/milestone-icon.png" alt=""><p>'+ name +'</p></div><div class="event-circle"></div><div class="event-date">'+date1+'<span>'+ month +'</span></div></a></li>');
       };
     };
   }
   {% endfor %}
</script>
<!--script for  a add more functionalities in edit functionality for previous section -->
<script type="text/javascript">
  
               function edit_clone(){
                   nam = $(this).context.className.split('_')
                   var milestone_count = $('input[name^=milestone_count_'+nam[2]).val();
                   var c = milestone_count;
                   var tR = $('.data_row_'+nam[2]+'_'+c+':last').clone();
                   milestone_count++; /* To increase the count */
                   /* further functionalitie to split the name and append row number to each input type */
                   $(tR).find('textarea, select, input').each(function(){
                     if ($(this).attr('name')){
                           $(this).val('')
                          if ($(this).attr('name').split('_').length == 7){
                             var name = $(this).attr('name').split('_')
                             if (name[0].indexOf("-1") > -1){
                                 $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                                 $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                             }
                             else {
                                 $(this).attr('name', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                                 $(this).attr('id', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                           }
                           }
                           else if ($(this).attr('name').split('_').length == 8){
                             var name = $(this).attr('name').split('_')
                             if (name[0].indexOf("-1") > -1){
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             }
                             else {
                             $(this).attr('name', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             $(this).attr('id', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             }
                           }
                     }
                   });
                   $('input[name^=milestone_count_'+nam[2]).val(milestone_count)
                   //$(tR).find('td span.init').text(count);
                   $(tR).insertAfter('.data_row_'+nam[2]+'_'+c+':last');
                   tR.removeClass().addClass('milestone data_row_'+nam[2]+'_'+milestone_count).attr("id",'data_row_'+nam[2]+'_'+milestone_count)
                   
                   }
               function edit_remove(){
                   nam = $(this).context.className.split('_')
                   var count = $('input[name^=milestone_count_'+nam[2]).val();
                     if (count > 1) {
                           $('div.data_row_'+nam[2]+'_'+count+':last').remove();
                           count--
                           $('input[name^=milestone_count_'+nam[2]).val(count);
                     }
                     else{
                       alert("Please add atleast one record")
                     }
               }
           //$(".add_clone").on("click", clone);
           $("[class^=edit_clone_]").on("click", edit_clone);
           $("[class^=edit_remove_]").on("click", edit_remove);
   
</script>
<!--script for  a add more functionalities in "---Add --" functionality for previous section -->
<script type="text/javascript">
   
               function clone(){
                   nam = $(this).context.className.split('_')
                   var milestone_count = $('input[name^=milestone_count_'+nam[2]).val();
                   var c = milestone_count;
                   var tR = $('.data_row_'+nam[2]+'_'+c+':last').clone();
                   milestone_count++; /* To increase the count */
                   /* further functionalitie to split the name and append row number to each input type */
                   $(tR).find('textarea, select, input').each(function(){
                     if ($(this).attr('name')){
                           $(this).val('')
                          if ($(this).attr('name').split('_').length == 7){
                             var name = $(this).attr('name').split('_');
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count);
                           }
                           else if ($(this).attr('name').split('_').length == 8){
                             var name = $(this).attr('name').split('_')
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count+"_"+name[6]);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count+"_"+name[6]);
                           }
                     }
                   });
                   $('input[name^=milestone_count_'+nam[2]).val(milestone_count)
                   //$(tR).find('td span.init').text(count);
                   $(tR).insertAfter('.data_row_'+nam[2]+'_'+c+':last');
                   tR.removeClass().addClass('milestone data_row_'+nam[2]+'_'+milestone_count).attr("id",'data_row_'+nam[2]+'_'+milestone_count)
                   
                   }
               function remove(){
                   nam = $(this).context.className.split('_')
                   var count = $('input[name^=milestone_count_'+nam[2]).val();
                     if (count > 1) {
                           $('div.data_row_'+nam[2]+'_'+count+':last').remove();
                           count--
                           $('input[name^=milestone_count_'+nam[2]).val(count);
                     }
                     else{
                       alert("Please add atleast one record")
                     }
               }
           //$(".add_clone").on("click", clone);
           $("[class^=add_clone_]").on("click", clone);
           $("[class^=add_remove_]").on("click", remove);
   
</script>
<!--this script is for add more functionality for pictures-->
<script type="text/javascript">
   $(document).ready(function(){
               function pic_clone(){
                   nam = $(this).context.className.split('_')
                   var pic_count = $('input[name=milestone-pic-count_'+nam[2]+']').val();
                   var c = pic_count;
                   var tR = $('.data_picture_'+c+':last').clone();
                   pic_count++; /* To increase the count */
                   /* further functionalitie to split the name and append row number to each input type */
                   $(tR).find('textarea, select, input').each(function(){
                     if ($(this).attr('name')){
                           
                          if ($(this).attr('name').split('_').length == 6){
                             var name = $(this).attr('name').split('_')
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+pic_count);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+pic_count);
                           }
                           else if ($(this).attr('name').split('_').length == 7){
                             var name = $(this).attr('name').split('_');
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+ name[5]+"_"+pic_count);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+pic_count);
                           }
                     }
                   });
                   $('input[name=milestone-pic-count_1]').val(pic_count)
                   //$(tR).find('td span.init').text(count);
                   $(tR).insertAfter('.data_picture_'+c+':last');
                   tR.removeClass().addClass('data_picture_'+pic_count).attr("id",'data_picture_'+pic_count)
                   
                   }
               function pic_remove(){
                   var count = $('input[name=data_picture_'+nam[2]+']').val();
                     if (count > 1) {
                           $('input.data_picture_'+nam[2]+':last').remove();
                           count  = $('tr.data_picture_'+nam[2]).length;
                           $('input[name=milestone-pic-count_'+nam[2]+']').val(pic_count);
                     }
                     else{
                       alert("Please add atleast one record")
                     }
               }
           //$(".add_clone").on("click", clone);
           $("[class^=add_picture_]").on("click", pic_clone);
           $("[class^=remove_picture_]").on("click", pic_remove);
   
   });
</script>
<!--add more script ends here -->
<!--script for  a add more functionalities in edit functionality for Current section -->
<script type="text/javascript">
               function aedit_clone(){
                   nam = $(this).context.className.split('_')
                   var milestone_count = $('input[name^=activity_count_'+nam[2]).val();
                   var c = milestone_count;
                   var tR = $('.data_row_'+nam[2]+'_'+c+':last').clone();
                   milestone_count++; /* To increase the count */
                   /* further functionalitie to split the name and append row number to each input type */
                   $(tR).find('textarea, select, input').each(function(){
                     if ($(this).attr('name')){
                           $(this).val('')
                          if ($(this).attr('name').split('_').length == 7){
                             var name = $(this).attr('name').split('_')
                             if (name[0].indexOf("-1") > -1){
                                 $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                                 $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                             }
                             else {
                                 $(this).attr('name', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                                 $(this).attr('id', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count);
                           }
                           }
                           else if ($(this).attr('name').split('_').length == 8){
                             var name = $(this).attr('name').split('_')
                             if (name[0].indexOf("-1") > -1){
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             }
                             else {
                             $(this).attr('name', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             $(this).attr('id', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+'_'+name[5]+"_"+milestone_count+"_0");
                             }
                           }
                     }
                   });
                   $('input[name^=activity_count_'+nam[2]).val(milestone_count)
                   //$(tR).find('td span.init').text(count);
                   $(tR).insertAfter('.data_row_'+nam[2]+'_'+c+':last');
                   tR.removeClass().addClass('milestone data_row_'+nam[2]+'_'+milestone_count).attr("id",'data_row_'+nam[2]+'_'+milestone_count)
                   
                   }
               function aedit_remove(){
                   nam = $(this).context.className.split('_')
                   var count = $('input[name^=activity_count_'+nam[2]).val();
                     if (count > 1) {
                           $('div.data_row_'+nam[2]+'_'+count+':last').remove();
                           count--
                           $('input[name^=activity_count_'+nam[2]).val(count);
                     }
                     else{
                       alert("Please add atleast one record")
                     }
               }
           //$(".add_clone").on("click", clone);
           $("[class^=aedit_clone_]").on("click", aedit_clone);
           $("[class^=aedit_remove_]").on("click", aedit_remove);
   
</script>
<!--script for  a add more functionalities in "---Add --" functionality for Current section -->
<script type="text/javascript">
   
               function a_clone(){
                   nam = $(this).context.className.split('_')
                   var milestone_count = $('input[name^=activity_count_'+nam[2]).val();
                   var c = milestone_count;
                   var tR = $('.data_row_'+nam[2]+'_'+c+':last').clone();
                   milestone_count++; /* To increase the count */
                   /* further functionalitie to split the name and append row number to each input type */
                   $(tR).find('textarea, select, input').each(function(){
                     if ($(this).attr('name')){
                           $(this).val('')
                          if ($(this).attr('name').split('_').length == 7){
                             var name = $(this).attr('name').split('_');
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count);
                           }
                           else if ($(this).attr('name').split('_').length == 8){
                             var name = $(this).attr('name').split('_')
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count+"_"+name[6]);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+"_"+milestone_count+"_"+name[6]);
                           }
                     }
                   });
                   $('input[name^=activity_count_'+nam[2]).val(milestone_count)
                   //$(tR).find('td span.init').text(count);
                   $(tR).insertAfter('.data_row_'+nam[2]+'_'+c+':last');
                   tR.removeClass().addClass('milestone data_row_'+nam[2]+'_'+milestone_count).attr("id",'data_row_'+nam[2]+'_'+milestone_count)
                   
                   }
               function a_remove(){
                   nam = $(this).context.className.split('_')
                   var count = $('input[name^=activity_count_'+nam[2]).val();
                     if (count > 1) {
                           $('div.data_row_'+nam[2]+'_'+count+':last').remove();
                           count--
                           $('input[name^=activity_count_'+nam[2]).val(count);
                     }
                     else{
                       alert("Please add atleast one record")
                     }
               }
           //$(".add_clone").on("click", clone);
           $("[class^=aadd_clone_]").on("click", a_clone);
           $("[class^=aadd_remove_]").on("click", a_remove);
   
</script>

<!--script for  a add more PARAMETERS in "---Add --" functionality for Current section -->
<script type="text/javascript">
   
               function para_a_clone(){
                   nam = $(this).context.className.split('_')
                   var milestone_count = $('input[name^=current_parameter_count_'+nam[4]).val();
                   var c = milestone_count;
                   var tR = $('.para_data_row_'+nam[3]+'_'+c+':last').clone();
                   milestone_count++; /* To increase the count */
                   /* further functionalitie to split the name and append row number to each input type */
                   $(tR).find('textarea, select').each(function(){
                     if ($(this).attr('name')){
                           $(this).val('')
                          if ($(this).attr('name').split('_').length == 8){
                             var name = $(this).attr('name').split('_');
                             
                             $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+'_'+name[6]+"_"+milestone_count);
                             $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+name[4]+"_"+name[5]+'_'+name[6]+"_"+milestone_count);
                           }
                           
                     }
                   });
                   $('input[name^=current_parameter_count_'+nam[4]).val(milestone_count)
                   //$(tR).find('td span.init').text(count);
                   $(tR).insertAfter('.para_data_row_'+nam[3]+'_'+c+':last');
                   tR.removeClass().addClass('milestone para_data_row_'+nam[4]+'_'+milestone_count).attr("id",'para_data_row_'+nam[3]+'_'+milestone_count)
                   
                   }
               function para_a_remove(){
                   nam = $(this).context.className.split('_')
                   var count = $('input[name^=current_parameter_count_'+nam[4]).val();
                     if (count > 1) {
                           $('div.para_data_row_'+nam[4]+'_'+count+':last').remove();
                           count--
                           $('input[name^=current_parameter_count_'+nam[4]).val(count);
                     }
                     else{
                       alert("Please add atleast one record")
                     }
               }
           //$(".add_clone").on("click", clone);
           $("[class^=para_add_clone_]").on("click", para_a_clone);
           $("[class^=para_add_remove_]").on("click", para_a_remove);
   
</script>
<!--script for  a add more PARAMETERS in "---Add --" functionality for Current section  End script -->


<!--script for  a add more PARAMETERS in "---EDIT --" functionality for Current section -->
<script type="text/javascript">
                function pedit_clone(){
                    nam = $(this).context.className.split('_')
                    var milestone_count = $('input[name^=current_parameter_count_'+nam[4]).val();
                    var c = milestone_count;
                    var tR = $('.para_data_row_'+nam[3]+'_'+c+':last').clone();
                    milestone_count++; /* To increase the count */
                    /* further functionalitie to split the name and append row number to each input type */
                    $(tR).find('textarea, select').each(function(){
                      if ($(this).attr('name')){
                            $(this).val('')
                           
                             if ($(this).attr('name').split('_').length == 8){
                              var name = $(this).attr('name').split('_')
                              if (name[0].indexOf("-1") > -1){
                              $(this).attr('name', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+milestone_count+'_'+name[5]+"_"+'parameter'+"_0");
                              $(this).attr('id', name[0]+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+milestone_count+'_'+name[5]+"_"+'parameter'+"_0");
                              }
                              else {
                              $(this).attr('name', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+milestone_count+'_'+name[5]+"_"+'parameter'+"_0");
                              $(this).attr('id', name[0]+'-1'+"_"+name[1]+"_"+name[2]+"_"+name[3]+"_"+milestone_count+'_'+name[5]+"_"+'parameter'+"_0");
                              }
                         }
                      }
                    });
                    $('input[name^=current_parameter_count_'+nam[4]).val(milestone_count)
                    //$(tR).find('td span.init').text(count);
                    $(tR).insertAfter('.para_data_row_'+nam[3]+'_'+c+':last');
                    tR.removeClass().addClass('milestone para_data_row_'+nam[4]+'_'+milestone_count).attr("id",'para_data_row_'+nam[3]+'_'+milestone_count)
                    
                    }
                function pedit_remove(){
                    nam = $(this).context.className.split('_')
                    var count = $('input[name^=current_parameter_count_'+nam[2]).val();
                      if (count > 1) {
                            $('div.para_data_row_'+nam[2]+'_'+count+':last').remove();
                            count--
                            $('input[name^=current_parameter_count_'+nam[2]).val(count);
                      }
                      else{
                        alert("Please add atleast one record")
                      }
                }
            //$(".add_clone").on("click", clone);
            $("[class^=para_edit_clone_]").on("click", pedit_clone);
            $("[class^=para_edit_remove_]").on("click", pedit_remove);
    
</script>
<!--script for  a add more PARAMETERS in "---EDIT --" functionality for Current section  End script -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script> 
<!-- Script for save and exit starts -->
<script>
    var request_url = "{{request.get_full_path|safe}}"
    $('#save_and_exit').on('click',function(){
    last_form_id = parseInt($('#template form').last().attr('id').split('-')[4])
    for(var i=0;i<=last_form_id;i++){
        $('#ui-accordion-accordion-panel-'+i.toString()).ajaxSubmit({
            type: 'POST',
            url: request_url,
            async: false,
            dataType:'html',
            success : function(data){
            
            //$('#ui-accordion-accordion-panel-'+i.toString()).submit();
            },
            
         
        })
      }
        alert('Data is submitted successfully')
      window.location.href = "/report/listing/?slug="+"{{request.GET.slug}}"
    });
    
</script>
<!-- Script for save and exit ends here -->

<!-- Script for submit report starts -->
<script>
    var request_url = "{{request.get_full_path|safe}}"
    var download_url = '/report/pdf/view/?slug='+'{{request.GET.slug}}'+'&report_id='+'{{projectreportobj.id}}'
    $('#submit_report').on('click',function(){
    last_form_id = parseInt($('#template form').last().attr('id').split('-')[4])
    for(var i=0;i<=last_form_id;i++){
        $('#ui-accordion-accordion-panel-'+i.toString()).ajaxSubmit({
            type: 'POST',
            url: request_url,
            dataType:'html',
            async: false,
            success : function(data){
            }
        })
      }
      window.location.href = download_url
    });
    
</script>
<!-- Script for submit report ends here-->

{% endblock %}
