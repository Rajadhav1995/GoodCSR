<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<link rel="icon" type="image/png" href="/static/img/favicon.ico">
<title>Samhita GoodCSR</title>

<!--CSS Srat-->

<link rel="stylesheet" href="/static/css/AdminLTE.min.css" />
<link rel="stylesheet" href="/static/css/bootstrap.css" />
<link rel="stylesheet" href="/static/css/style.css" />
<link type="text/css" rel="stylesheet" href="/static/css/easy-responsive-tabs.css" />
<link rel="stylesheet" href="/static/css/popup.css">
<link href="/static/css/materialize.min.css" rel="stylesheet" >
<link rel="stylesheet" href="/static/css/style-new.css" />

<style>
ul li {
    list-style-type: none;
    line-height: 26px;
    color: white;
  }

.alert-success {
    /*background-color: #dff0d8;*/
    border-color: #d0e9c6;
    color: #a73f5c;
    height: 110;
}
.msg {
    display: none;
}
.error {
    color: red;
}
.success {
    color: white;
    font-family: 'work_sansregular';
}

.h1, h1 {
    font-size: 2.7rem;
}
.bg-green, .callout.callout-success, .alert-success, .label-success, .modal-success .modal-body {
    background-color: #a73f5c !important;
}
</style>


<!--Common Script-->
<!-- IE less than 9 -->
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<!--[if lt IE 9]><script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]-->

<!--  Responsive CSS  -->
<link rel="stylesheet" href="/static/css/media.css" /><!-- /*<style>
.demo_div label.demo_label { width: 50%; float: left;}
.demo_div input { width: 50%; height: 34px; padding-left:10px;}
.demo_popup .border_line{font-weight: normal;}
</style>*/ -->
<div class="clear"></div>
<section class="content-part">
    <div class='container' >
    <div class="white-box">
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <div class="alert alert-success">
    <h3><li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li></h3><br></div>
    {% endfor %}
</ul><br>
<div align='center'><a href="javascript:parent.jQuery.fancybox.close();">Close Window</a></div>
{% else %}
        <div class="col-xs-12">
          <div class="box demo_popup">
            <div class="box-header">
              <h3 class="border_line"><a target="_blank" href="/project/summary/?slug={{project_obj.slug}}&key=summary"><u>{{project.name}}</u></a> Report Generation</h3>

              <div align="right">
             <!-- <a class="btn btn-success" href="/project/list/" ><i class="fa fa-arrow-left" aria-hidden="true"></i> Back</button></a>&#160;<input class="btn btn-primary" type="submit" form="prog_edit" value="Save" /> -->
         </div><br>
            </div>
            <!-- /.box-header -->
            {% if msg  %}
                <h3 class border_linr">Please add <a style="text-decoration:underline;color:#169776" href= '/manage/project/budget/create/?slug={{project.slug}}'>Budget</a>  for the project before proceeding with generation of the report </h3>
                <a class="btn btn-success" href="javascript:parent.jQuery.fancybox.close();" style="margin-right:5px;float: right;  padding:3px 15px;">Close</a>
                
            {% else %}
            <div class="box-body">
                {% if quarter_msg %}
                    <h3 class border_linr">Already reported is generated for this quarter. <a style="text-decoration:underline;color:#169776" href= '/report/remove/detail/?slug={{project_obj.slug}}&report_id={{project_report.id}}&key=1&report_type={{project_report.report_type}}'>View the Report Here </a> or if u want to edit the report click here <a style="text-decoration:underline;color:#169776" href= '/report/final/design/?slug={{project_obj.slug}}&report_id={{project_report.id}}'>Edit the Report</a></h3>
                    <a class="btn btn-success" href="/report/listing/?slug={{project_obj.slug}}" style="margin-right:5px;float: right;  padding:3px 15px;">Back</a>
                {% else %}
                    <form target="_top" autocomplete="off" id="report-form" name="feedback" action="." class ="form-horizantal budget_form" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                                <input type="hidden" name="project_slug" value="{{slug}}" id="{{slug}}" required="" class="form-control" maxlength="200">
                                <input type="hidden" name="report_id" value="{{report_id}}" class="form-control" maxlength="200">
                                    <div class="row">
                                    <div class="col-md-6 nopadding">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                        <label>Report Type<font color="red">*</font></label>
                                        <select class="form-control" name="report_type" id="report_type" required>
                                        <option  value="1" >Quarterly</option>
                                        <option  value="2" >Monthly</option>
                                        </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                  <div class="row" id="report_duration">
                                        <div class="col-md-6 nopadding">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                <label>Report Duration<font color="red">*</font></label>
                                                <select class="form-control" name="quarter_type" id="quarter_type" required>
                                                {% for k,v in budget_quarters.iteritems %}
                                                    <option  value="{{k}}" {% if quarter_no == k %}selected="selected" {% endif %}>Quarter {{forloop.counter}}</option>
                                                {% endfor %}
                                                </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                  <div class="row" id="year_list">
                                        <div class="col-md-6 nopadding">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                <label>Select Year<font color="red">*</font></label>
                                                <select class="form-control" name="select_year" id="select_year" required>
                                                {% for i in years_list %}
                                                    <option  value="{{i}}">{{i}}</option>
                                                {% endfor %}
                                                </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                  <div class="row" id="select_month">
                                        <div class="col-md-6 nopadding">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                <label>Select Month<font color="red">*</font></label>
                                                <select class="form-control" name="select_month" id="selected_month_list" required>
                                                {% for i in years_list %}
                                                    <option  value="{{i}}">{{i}}</option>
                                                {% endfor %}
                                                </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                <input class="budget_button" type="submit" value="Submit" onclick="return email_valid();" /></a>  
                                
                                <a class="btn btn-success" href="javascript:parent.jQuery.fancybox.close();" style="margin-right:5px;float: right;  padding:3px 15px;">Close</a>

                            </form>
                    {% endif %}
                </div>
                
                {% endif %}
  </div>
  </div>
  </div>
<script type="text/javascript" src="/static/js/respond.js"></script>
<script type="text/javascript" src="/static/js/html5.js"></script>
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.sticky.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.0.0.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://rawgit.com/Pixabay/jQuery-tagEditor/master/jquery.caret.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://rawgit.com/Pixabay/jQuery-tagEditor/master/jquery.tag-editor.js"></script>
<link rel="stylesheet" href="https://rawgit.com/Pixabay/jQuery-tagEditor/master/jquery.tag-editor.css">
<script src='https://www.google.com/recaptcha/api.js'></script>

<script type = "text/javascript">
        $('#year_list').hide();
        $('#select_month').hide();
        $('#report_type').change(function(){
        var i = $('#report_type').val();
        if (i==2)
        {
         $('#report_duration').hide();
         $('#year_list').show();
         var year = $('#select_year').val();
         get_year(year)
        }
        else{
            $('#report_duration').show();
            $('#year_list').hide();
        }
    });

</script>


<script>
            function get_year(year){
                $('#select_month').show();
               $.ajax({
                   url : '/manage/month/list/',
                   type : 'GET',
                   dataType : 'json',
                   data: {'year':year,'budget_id':parseInt({{budget_obj.id}})},
                   success : function(data) {
                            var month_list  = data.month_list
                            $('#selected_month_list').find('option').remove().end();
                          for (var month in month_list) {
                                    $('#selected_month_list').append("<option value='"+month_list[month]+"'>"+month_list[month]+"</option>")
                                }
                   },
                       error : function() {
                       console.log('error');
                   }
                });
            
            }
            $('#select_year').change(function(){
               
                get_year(this.value)
                
                
    });

</script>


{% endif %}
  
