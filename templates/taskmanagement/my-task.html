{% extends 'project/project-summary.html' %}
{% load common_tags %}
{% load urs_tags %}

<!--ksjds-->
{% block section %}
<style>
.small_height{
height: 30px !important;
line-height: 24px;
padding: 5px;
font-size: 14px;
margin-top: -6px;
}
.bar_height{
  height: 35px !important;
}
</style>
    <section class="green-pad green-height">
    <div class="row">
        <div class="image-pad orglogo ">
            {% get_org_logo projectobj as org_logo %}
        	<a href="javascript:void(0);"> {% if org_logo %}<img src="{{org_logo}}"  alt="" title="" height='117px' width = '100px'> {% else %}<img src="/static/img/GoodCSR_color_circle.png" alt="" title="" height='117px' width = '100px'> {% endif %}</a><a href="javascript:void(0);"></a>
<!--    	<img src="img/logo-n.png" alt="" title="" ></a>-->
        </div>
    </div>
    </section>
{% endblock %}


{% block content %}
<div class="clear"></div>
<!--Content part starts-->
<div class="row">
<div class="select-area search_area" style="margin-right: 41px;">
      	<label class = "search_lbl">Search</label>
		<input id="activate_tagator2" type="text" class="form-control" placeholder="Search" data-tagator-show-all-options-on-focus="true" data-tagator-autocomplete="['Budget', 'Report', 'Document', 'Files', 'Budget', 'Report', 'Document', 'Task', 'Worksheet']">
        <img onclick="javascript:exportToForm()" src="/static/img/search-icon.png">
         </div>
</div>
<section class="content-part">
   <div class="row">
      <div class="left-task">
         <div class="content-top content-top-task bar_height">
          <div class="col-md-12">
            <div class="col-md-4"></div>
        <div class='col-md-3 nopadding'><label style="color: #00998b;float: left;font-weight: bold;margin-top: -3px;margin-left: 20px;">Select Project:</label></div>
        <div class="col-md-5 nopadding">
                <select style="margin-left: 15px;" name="year" id="proj_select" class = "form-control small_height" >
                    <option value = "Select Year">Select</option>
                    {% get_user_project request as project_list %}
                    {% for i in project_list %}
                    <option value="{{i.id}}">{{i.name}}</option>
                    {% endfor %}
                </select>
        </div>

      </div>
         </div>
         <div id="boxscroll-pad">
            <div class="task-head">
               <h4>Overdue</h4>
               <span>{% if over_due %}{{over_due | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if over_due %}
               {% for task in over_due %}
               <div class="project proj_{{task.activity.project.name|remove_spcl_char}}"><li class = 'data_row'><a href = # class="hide-show" onclick="return task_details({{task.id}})" id={{task.slug}} >{{task.name}} <span>{{task.end_date |date:'jS F Y'}} - {{task.activity.name}}</span><span>{% if status == '0' %}{{task.activity.project.name|title}}{% endif %}</span></a></li></div>
               {% endfor %}
               {% endif %}
            </ul>
            <div class="task-head current-date">
               <h4>Today</h4>
               <span>{% if tasks_today %}{{tasks_today | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if tasks_today %}
               {% for i in tasks_today %}
               <li class = 'data_row'><a href = # class="hide-show" onclick="return task_details({{.id}})" id={{i.slug}}>{{i.name}} <span>{{i.end_date|date:'jS F Y'}} - {{i.activity.name}}</span><span>{% if status == '0' %}{{i.activity.project.name|title}}{% endif %}</span></a></li>
               {% endfor %}
               {% else %}
               <li class = 'data_row'><a href="javascript:void(0);">No tasks</a></li>
               {% endif %}
            </ul>
            <div class="task-head">
               <h4>Tommorow</h4>
               <span>{% if tasks_tomorrow %}{{tasks_tomorrow | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if tasks_tomorrow %}
               {% for j in tasks_tomorrow %}
               <li class = 'data_row'><a href = # class="hide-show" onclick="return task_details({{j.id}})" id={{j.slug}}>{{j.name}} <span>{{j.end_date|date:'jS F Y'}} - {{j.activity.name}}</span><span>{% if status == '0' %}{{j.activity.project.name|title}}{% endif %}</span></a></li>
               {% endfor %}
               {% else %}
               <li class = 'data_row'><a href="javascript:void(0);">No tasks</a></li>
               {% endif %}
            </ul>
            <div class="task-head">
               <h4>Tasks</h4>
               <span>{% if remain_tasks %}{{remain_tasks | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if remain_tasks %}
               {% for t in remain_tasks %}

               <div class="project proj_{{t.activity.project.name | remove_spcl_char}}"><li class = 'data_row'><a href = # class="hide-show" onclick="return task_details({{t.id}})" id={{t.slug}}>{{t.name}} <span>{{t.end_date|date:'jS F Y'}} - {{t.activity.name}}</span><span>{% if status == '0' %}{{t.activity.project.name|title}}{% endif %}</span></a></li></div>
               {% endfor %}
               {% else %}
               <li class = 'data_row'><a href="javascript:void(0);">No tasks</a></li>
               {% endif %}
            </ul>
         </div>
      </div>
        <div class= "right-div-details"></div>
   </div>
</section>
<!--Content part Ends-->

{% endblock %}
{% block script %}
<!-- jQuery (necessary for JavaScript plugins) -->
<script type="text/javascript" src="/static/js/jquery.selectbox-0.2.js"></script>
<script type="text/javascript" src="/static/js/ddsmoothmenu.js"></script>
<script type="text/javascript" src="/static/js/jquery.mmenu.min.all.js"></script>
<script type="text/javascript" src="/static/js/common.js" /></script>

<!--<script type="text/javascript" src="js/jquery.scrollbox.js"></script>-->



<link href="/static/css/sample.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script> 

    <script src="/static/js/plugin.js" type="text/javascript"></script>
<script src="/static/js/script.js" type="text/javascript"></script>
<!--<script>-->
<!--$(document).ready(function() {-->
<!--    $(".my-progress-bar").circularProgress({-->
<!--        line_width: 6,-->
<!--        color: "#333",-->
<!--        starting_position: 0, // 12.00 o' clock position, 25 stands for 3.00 o'clock (clock-wise)-->
<!--        percent: 0, // percent starts from-->
<!--        percentage: true,-->
<!--        text: ""-->
<!--    }).circularProgress('animate', 50, 5000);-->
<!--});       -->
<!--</script>-->
<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/static/css/jquery.range-control.css" />
    <script src="/static/js/jquery.range-control.js"></script>
<script src="/static/js/jquery.nicescroll.min.js"></script>
<script src="/static/js/easyResponsiveTabs.js" type="text/javascript"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<script>
$(document).ready(function() {
var slug = "{{request.GET.task_slug}}"
if (slug != ''){
    $('#'+slug).trigger('click');
    $('.hide-show').addClass('active');
   }
else{
   
    $('.hide-show').first().trigger('click');
        $(".hide-show").addClass('active');
    }
});
</script>

<script>
 $('#proj_select').on("change",function () {
    var as = $(this).find("option:selected").text();
    var ddd = as.replace(/ /g,'').replace(/[^a-zA-Z0-9 ]/g, "");
    $('.project').hide();
    if (ddd == 'Select') {
      $('.project').show();
    }else{
      $('.proj_'+ddd).show();
    };
  })
</script>


<script type="text/javascript">
   var expanded = false;
   
   function showCheckboxes() {
    var checkboxes = document.getElementById("checkboxes");
    if (!expanded) {
      checkboxes.style.display = "block";
      expanded = true;
    } else {
      checkboxes.style.display = "none";
      expanded = false;
    }
   }
      
</script>
<script>
   $(document).ready(function() {
     $("#boxscroll-pad").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   // First scrollable DIV
   $("#boxscroll-timeline").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   });
   $(document).resize(function() {
   $("#boxscroll-pad").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   // First scrollable DIV
   $("#boxscroll-timeline").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   });
</script>
<script type="text/javascript">
   $(document).ready(function () {
       $('#horizontalTab').easyResponsiveTabs({
           type: 'default', //Types: default, vertical, accordion
           width: 'auto', //auto or any width like 600px
           fit: true,   // 100% fit in a container
           closed: 'accordion', // Start closed if in accordion view
           activate: function(event) { // Callback function if tab is switched
               var $tab = $(this);
               var $info = $('#tabInfo');
               var $name = $('span', $info);
               $name.text($tab.text());
   
               $info.show();
           }
       });
   });
</script>
<script src="/static/js/jquery.simplePopup.js" type="text/javascript"></script>
<script type="text/javascript">
   $(document).ready(function(){
       $('#myBtn1').click(function(){
   	$('#pop3').simplePopup();
       });
   });
</script>
<!---datepicker script-->
<script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>
   $(function() {
   $( ".datepicker" ).datepicker({
   showOn: "button",
   buttonImage: "img/calender-icon.png",
   buttonImageOnly: true
   });
   });
</script>
<script>
   //Toggle
   
   	$('.user-menu').on('click',function(){
   		$('.dropdown-menu').slideDown(350);
   
   	});
   	$('.select-down').on('click',function(){
           $('.dropdown-menu1').slideDown(350);
   
       });
   
   	$(document).ready(function(e) {
   		/*Content Show/Hide */
   		$('.hide-cont').hide();
   		$('.close-cont').hide();
   		$('.view-cont').click(function(){
   			$('.hide-cont').slideDown(350);
   			$('.close-cont').show();
   			$('.view-cont').hide();
   		});
   		$('.close-cont').click(function(){
   			$('.hide-cont').slideUp(350);
   			$('.close-cont').hide();
   			$('.view-cont').show();
   		});
   		$(document).trigger( "click" );
   	});
   
   	$(document).click(function(){
   
   		$('.user-menu, .select-down').click(function(event){
   			event.stopPropagation();
   		});
   
   		$('.dropdown-menu, .dropdown-menu1').slideUp(350);
   
   	});
</script>

<!-- Progress % circle script -->
<script src="/static/js/jQuery-plugin-progressbar.js"></script>

<script>
$(".progress-bar").loading();
</script>

<script>
jQuery("#activate_tagator2").keyup(function () {
    var filter = jQuery(this).val();
    jQuery("li.data_row").each(function () {
        if (jQuery(this).text().search(new RegExp(filter, "i")) < 0) {
            jQuery(this).hide();
        } else {
            jQuery(this).show()
        }
    });
});
</script>
<!--<script src="/static/js/jquery-ui.js"></script>-->
<script type="text/javascript">

function task_details(task_id){
    $('.right-div-details').html('');
           var sl_id = task_id
           var filemsg = "{{upload_msg}}"
            $.ajax({
            url:'/project/task/details/',
            type:'GET',
            async: false,
            data:{id:sl_id,msg:filemsg},
            dataType:"html",
            success:function(data){
                $('.right-div-details').html(data);
                
            },
            error : function(){
            }
        });
        
    }
</script>

{% endblock %}
