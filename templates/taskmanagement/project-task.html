{% extends 'project/project-summary.html' %}
{% load common_tags %}
{% load urs_tags %}

{% block content %}

<style>
.small_height{
  height: 30px !important;
line-height: 24px;
padding: 5px;
font-size: 14px;
}
.padding_dropdown{

}
</style>
<div class="clear"></div>

<!--Content part starts-->
<div class="row">
<div class="select-area search_area">
      	<label class = "search_lbl" >Search</label>
   
		<input id="activate_tagator2" type="text" class="form-control" placeholder="Search" data-tagator-show-all-options-on-focus="true" data-tagator-autocomplete="['Budget', 'Report', 'Document', 'Files', 'Budget', 'Report', 'Document', 'Task', 'Worksheet']">
        <img onclick="javascript:exportToForm()" src="/static/img/search-icon.png">
         </div>
</div>      
<section class="content-part">
    
   <div class="row">
      <div class="left-task">

        
        <div class="col-md-12">
        <div class='col-md-3 nopadding'><label style="color: #00998b;float: left;font-weight: bold;margin-top: 20px;margin-left: 15px;">Super Category</label></div>
        <div class="col-md-4 padding_left">
                <select name="year" id="category_dropdown" class = "form-control small_height" >
                    <option value = "Select Category"><small>Select</small></option>
                    {% for i in category_list %}
                    <option value="{{i.id}}">{{i.name}}</option>
                    {% endfor %}
                </select>
        </div>
        <div class='col-md-2 nopadding'><label style="color: #00998b;float: left;font-weight: bold;margin-top: 20px;margin-left: 0px;">Activity</label></div>
        <div class="col-md-3 nopadding">
                <select style="margin-left: -15px;" name="activity" id="activity_id" class = "form-control small_height" >
                    <option value = "Select Year">Select</option>
                    {% for i in activity_list %}
                    <option value="{{i.id}}">{{i.name}}</option>
                    {% endfor %}
                </select>
        </div>
        
      </div>
         <div class="content-top content-top-task">
<!--            <div class="select-area">-->
<!--               <label>Sort by </label>-->
<!--               <div class="small-select">-->
<!--                  <select name="lang" class="select_box ">-->
<!--                     <option>Priority</option>-->
<!--                     <option>Ascending</option>-->
<!--                     <option>Descending</option>-->
<!--                  </select>-->
<!--               </div>-->
<!--            </div>-->
         </div>

         <div id="boxscroll-pad" id="dest">
            <div class="task-head over_count" >
               <h4>Overdue</h4>
               <span class ="overdue_id">{% if over_due %}{{over_due | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul class= "due_count">
               {% if over_due %}
               {% for task in over_due %}
               <div class="activity act_{{task.activity.name|remove_spcl_char}} category cat_{{i.activity.super_category.name|remove_spcl_char}}"><li class = 'data_row'><a href = # class="hide-show"  id={{task.slug}} >{{task.name}} <span>{{task.end_date |date:'jS F Y'}} - {{task.activity.name}} - {{task.activity.super_category.name}}</span></a></li></div>
               {% endfor %}
               {% endif %}
            </ul>
            <div class="task-head current-date">
               <h4>Today</h4>
               <span class = "current_id">{% if tasks_today %}{{tasks_today | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if tasks_today %}
               {% for i in tasks_today %}
               <div class="activity act_{{i.activity.name|remove_spcl_char}} category cat_{{i.activity.super_category.name|remove_spcl_char}}"><li class = 'data_row'><a href = # class="hide-show" id={{i.slug}}>{{i.name}} <span>{{i.end_date|date:'jS F Y'}} - {{i.activity.name}} - {{i.activity.super_category.name}}</span></a></li></div>
               {% endfor %}
               {% else %}
               <li class = 'data_row'><a href="javascript:void(0);">No tasks</a></li>
               {% endif %}
            </ul>
            <div class="task-head tmrw-date ">
               <h4>Tommorow</h4>
               <span class ="tmrw_id">{% if tasks_tomorrow %}{{tasks_tomorrow | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if tasks_tomorrow %}
               {% for j in tasks_tomorrow %}
               <div class="activity act_{{j.activity.name|remove_spcl_char}} category cat_{{i.activity.super_category.name|remove_spcl_char}}"><li class = 'data_row'><a href = # class="hide-show" id={{j.slug}}>{{j.name}} <span>{{j.end_date|date:'jS F Y'}} - {{j.activity.name}} - {{j.activity.super_category.name}}</span></a></li></div>
               {% endfor %}
               {% else %}
               <li class = 'data_row'><a href="javascript:void(0);">No tasks</a></li>
               {% endif %}
            </ul>
            <div class="task-head other-tasks">
               <h4>Tasks</h4>
               <span class ="others_id">{% if remain_tasks %}{{remain_tasks | length }} {% else %} 0{% endif %}</span>
            </div>
            <ul>
               {% if remain_tasks %}
               {% for t in remain_tasks %}
               <div class="activity act_{{t.activity.name|remove_spcl_char}} category cat_{{i.activity.super_category.name|remove_spcl_char}}"><li class = 'data_row'><a href = # class="hide-show" id={{t.slug}}>{{t.name}} <span>{{t.end_date|date:'jS F Y'}} - {{t.activity.name}} - {{i.activity.super_category.name}}</span></a></li></div>
               {% endfor %}
               {% else %}
               <li class = 'data_row'><a href="javascript:void(0);">No tasks</a></li>
               {% endif %}
            </ul>
         </div>
      </div>
      {% for i in task_listing %}
      <div class="right-task div-{{i.slug}}">
       <div class="border-bottom task_width">
         <div class="task-head-lft ">
            <h4>{{i.name}}<img src="/static/img/vender-icon.png" alt=""></h4>
            <h5>of <span class="under-line">{{i.activity.project.name}}</span> in <span>{{i.activity.super_category.name}}</span> for <span>{{i.activity.name}}</span> <img src="/static/img/material-icon.png" alt=""></h5>
<!--            <p>Details: This project works for child development, health and-->
<!--               welfare of Ramnagar village in Andhra Pradesh. -->
<!--            </p>-->
         </div>
         <div class="task-head-rgt">
<!--            <div class="my-progress-bar"></div>-->
    <div class="progress-bar position" data-percent=" {% if i.task_progress %}{{i.task_progress}} {% else %} 0 {% endif %}" data-duration="1000" data-color="#ccc,#3ca187"></div>
<!--            <img src="/static/img/progress-icon.png" alt="">-->
            <p>{%if i.status == 2 %}completed {% else %} in progress{% endif %}</p>
         </div>
         </div>
         <div class="planned-date">
            <ul>
               <li>Planned Start Date : <span>{{i.start_date|date:'jS F Y'}}</span></li>
               <li>Planned End Date&nbsp;&nbsp;&nbsp;: <span>{{i.end_date|date:'jS F Y'}}</span></li>
            </ul>
            <ul>
               <li>Actual Start Date : <span>{{i.actual_start_date|date:'jS F Y'}}</span></li>
               <li>Actual End Date&nbsp;&nbsp;&nbsp;: <span>{{i.actual_end_date|date:'jS F Y'}}</span></li>
            </ul>
         </div>
         <div class="planned-pad">
            <ul>
               <li><span>Assigned to</span> 
                   <div class="middle_text"><canvas class="user-icon" data-name="{{i.assigned_to}}" width="30" height="30" style="border-radius:30px" ></canvas>
                        <div class="middle">
                            <div class="text">{% if i.assigned_to.attrs.first_name %}{{i.assigned_to.attrs.first_name}} {{i.assigned_to.attrs.last_name}}{% else %}{{i.assigned_to.name}}{% endif %}</div>
                        </div>
                   </div>
               </li>
               <li><span>Created by </span>
                   <div  class="middle_text"><canvas class="user-icon" data-name="{{i.created_by}}" width="30" height="30" style="border-radius:30px" ></canvas>
                            <div class="middle">
                                <div class="text">{{i.created_by.attrs.first_name}} {{i.created_by.attrs.last_name}}</div>
                            </div>
                       </div>
               </li>
               <li><span>Approval</span> <canvas class="user-icon" data-name="A R" width="30" height="30" style="border-radius:30px" ></canvas></li>
               <li><span>Subscribed to</span>
                    {% for sub in i.subscribers.all|slice:"0:2" %} 
                     <div  class="middle_text"><canvas class="user-icon" data-name="{{sub}}" width="30" height="30" style="border-radius:30px" ></canvas>
                        <div class="middle">
                            <div class="text">{% if sub.attrs.first_name %}{{sub.attrs.first_name}} {{sub.attrs.last_name}}{% else %}{{sub.name}}{% endif %}</div>
                        </div>
                     </div>
                    {%endfor%}
               </li>{%if i.subscribers.all|length >= 3 %}. . . .{% endif %}
            </ul>
            
         </div>
         <div class="task-completion">
            <div class="task-completion-left">
               <div  class="middle_text"><canvas class="user-icon" data-name="{{user.attrs.first_name}} {{user.attrs.last_name}}" width="30" height="30" style="border-radius:30px" ></canvas></div> 
            </div>
            <div class="task-completion-right">
                <form action ='/managing/my-tasks/updates/' id = 'updation_form' method='POST' enctype="multipart/form-data">{% csrf_token %}
                <input id = "task_id " name = 'task_id' type='hidden' value = "{{i.id}}"/>
               <textarea name="comment" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;" placeholder = "Write a update..."></textarea>
               <div>
               <i class="fa fa-file"></i>
               <input type='file' name ='upload_attach' id='upload-photo'/> 
<!--               <label id = "size_upload" >"Please keep filesize under 5 MB"</label>-->
               </div>
                
               <div class="task-details">
                  <h4>Task Completion Status (%)</h4>
                <div class = 'task_bar' style="width: 375px;float: left;">
                         <input type="hidden" name="tea1" class="range-{{i.slug}}" id="xp_{{i.slug}}" value="{% if i.task_progress %}{{i.task_progress}}{% else %}0{% endif %}"   />
                </div>
<!--     SCRIPT FOR TASK PROGRESS BAR STARTS HERE           -->
                <script src="/static/js/price-range.js"></script>
                        <script>
                           $(function(){
                           
                               $('.hide-show').on('click',function(){
                                   var sl_id = '{{i.slug}}'
                                   $('.right-task').hide();
                                   $('.div-'+sl_id).show();
                                   var progress = $('#xp_'+sl_id).val();
                                    $('.range-control-handle').css('left',progress+'%');

                                   $('.range-'+sl_id).rangeControl({

                                  max: 100,
                                  min:0,
                                 
                                  delim: '', 
                                 
                                  scale: {
                                    position: 'bottom',
                                    labels: true,
                                   // interval:1
                                  },
                                  className: ''
                                });

                                    $('.range-'+sl_id).on('rangeControlSlide.rangeControlEvent', function () {
                                      // on slide event

                                        
                                     

                                     // $('#childAgeView').show().children().text(this.value.split(' ').join(', '));
                                      $('#slectedNumber').html($('.range-control-current-value').text());
                                     
                                    });

                                    $('.range-'+sl_id).on('rangeControlChange.rangeControlEvent', function () {
                                         $('#slectedNumber').html($('.range-control-current-value').text());
                                    });

                                    $('.range-'+sl_id).on('rangeControlAddHandle.rangeControlEvent', function () {


                                    });


                                    var progress = $('#xp_'+sl_id).val();
                                    $('.range-control-handle').css('left',progress+'%');

                               });
                               $('.hide-show').first().trigger('click');
                               $(".hide-show").addClass('active');
                           }
                           );
                        </script>
<!--                  SCRIPT FOR TASK PROGRESS BAR      -->
                  <input class="task-link" type="submit" value="Add update"/>
                  </form>
               </div>
            </div>
         </div>
        

                  <div class="user-timeline">
                    
         {% if i.task_attachments %}
            <div id="boxscroll-timeline">
               {% for task_attach in i.task_attachments %}
               {% for dates,attach in task_attach.items %}
               <div class="month-pad">{{dates|date:'jS F Y'}}</div>
               <ul>
                  {% task_comments_progress dates i.id attach as comments %}
                  {%if comments %}
                  {% for c in comments %}
                      {% if c.attachment == 0 %}
                      
                      
                      <li>
                        
                         <div class="left-li">
                            <div  class="middle_text"><canvas class="user-icon" data-name="{{comment_progress.first_name}} {{comment_progress.last_name}}" width="30" height="30" style="border-radius:30px" ></canvas>
                                <div class="middle">
                                    <div class="text">{{c.name.first_name}} {{c.name.last_name}}</div>
                                </div>
                            </div>
                         </div>
                         
                         <div class="right-li third-li">
                          {% if c.comment_text %}
                              <div style="float:left; width:56%; margin-right:20px; margin-bottom:10px">
                                <ul style="">
                                  
                                  <li style="width:100%;margin-bottom:5px">{% if c.comment_text %}{{c.comment_text}}{% endif %}</li>
                                  
                                </ul>
                                {% get_converted_time c.date as time %}
                                
                                <span>{{time}}</span>
                                
                              </div>
                              {% if c.previous_task_progress != c.task_progress %}
                              <p style=" float: left; width: 39%;"> Task completion changed from <b>{% if c.previous_task_progress != 'None' %}{{c.previous_task_progress}}{% else %}0{% endif %}%</b> to <b>{{c.task_progress}}% </b></p>
                              {% endif %}
                          
                          {% else %}
                           
                            <p style=" float: left; width: 100%;"> Task completion changed from <b>{{c.previous_task_progress}}%</b> to <b>{{c.task_progress}}% </b></p>
                             {% get_converted_time c.date as time %}
                            <br><span>{{time}}</span>   
                          {% endif %}
                            
                     </div>
                     
                  </li>
                  
                  {% endif %}
                  {% if c.attachment == 1 %}
<!-- ---------------------------------------------------------------------------------------- -->
                  <li>
                    
                     
                     {% if c.attachment_type == 1 %}
                     <div class="left-li">
                        <div  class="middle_text"><canvas class="user-icon" data-name="{{c.created_by.attrs.first_name}} {{c.created_by.attrs.last_name}}" width="30" height="30" style="border-radius:30px" ></canvas>
                            <div class="middle">
                                <div class="text">{{c.name.first_name}} {{c.name.last_name}}</div>
                            </div>
                        </div>
                     </div>
                     
                     <div class="right-li first-li">
                            
                        <p>{{c.description}}</p>
                        
                        <div style="float:left; width:56%;margin-right:20px; margin-bottom:10px">
                          <ul>
                           <li style="width:100%">
                              <a href="{{c.image_url}}">
                                 <img src="{{c.image_url}}" width="60%" alt="">
<!--                                 <div class="/static/image-hover">4 More files</div>-->
                              </a>
                           </li>
                           {% get_converted_time c.date as time %}
                        <span>{{time}}</span>
                            
                        </ul>
                      </div>
                        
                        {% if c.previous_task_progress != c.task_progress %}
                        <p style=" float: left; width: 39%; font-size:14px;"> Task completion changed from <b>{{c.previous_task_progress}}%</b> to <b>{{c.task_progress}}% </b></p>
                        {% endif %}
                     </div>
                    
                  </li>
                  {% endif %}
                  
                  {% if c.attachment_type == 2 %}
                  <li>
                     <div class="left-li">
                        <div  class="middle_text"><canvas class="user-icon" data-name="{{c.name.first_name}} {{c.name.last_name}}" width="30" height="30" style="border-radius:30px" ></canvas>
                            <div class="middle">
                                <div class="text">{{c.name.first_name}} {{c.name.last_name}}</div>
                            </div>
                        </div>
                     </div>
                     <div class="right-li second-li">
                     <div style="float:left; width:56%; margin-right:20px; margin-bottom:10px">
                        <ul>
                           
                           <li>
                                
                              <a href="{{c.image_url}}">
                              {% if c.document_type == 3 %}
                              <img src="/static/img/ppt-icon.png" alt=""> <span>{{c.file_name}}</span></a>
                              {% elif c.document_type == 1 %}
                              <img src="/static/img/excel-icon.png" alt=""> <span>{{c.file_name}}</span></a>
                              {% else %}
                              <img src="/static/img/textbox-bg.png" alt=""> <span>{{c.file_name}}</span></a>
                              
                           </li>
                        </ul>
                        {% get_converted_time c.date as time %}
                        <span>{{time}}</span>
                        
                        {% endif %}

                     </div>
                     {% if c.previous_task_progress != c.task_progress %}
                        <p style=" float: right; width: 39%;">Task completion changed from <b>{{c.previous_task_progress}}%</b> to <b>{{c.task_progress}}% </b></p>
                        {% endif %}
                  </li>
                  {% endif %}
                 
<!-- -------------------------------------------------------------------- -->

                  {% endif %}
                  {% endfor %}
                  {% endif %}


               </ul>
               {% endfor %}
               {% endfor %}
            </div>
            {% else %}
                    <li>No updates</li>
                  {% endif %}
         </div>
      </div>
      {% endfor %}
   </div>
   </div></div></div>
</section>
<!--Content part Ends-->

{% endblock %}
{% block script %}
<!-- jQuery (necessary for JavaScript plugins) -->
<script type="text/javascript" src="/static/js/jquery.selectbox-0.2.js"></script>
<script type="text/javascript" src="/static/js/ddsmoothmenu.js"></script>
<script type="text/javascript" src="/static/js/jquery.mmenu.min.all.js"></script>
<script type="text/javascript" src="/static/js/common.js" /></script>

<!--<script type="text/javascript" src="js/jquery.scrollbox.js"></script>-->



<link href="/static/css/sample.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script> 

    <script src="/static/js/plugin.js" type="text/javascript"></script>
<script src="/static/js/script.js" type="text/javascript"></script>
<!--<script>-->
<!--$(document).ready(function() {-->
<!--    $(".my-progress-bar").circularProgress({-->
<!--        line_width: 6,-->
<!--        color: "#333",-->
<!--        starting_position: 0, // 12.00 o' clock position, 25 stands for 3.00 o'clock (clock-wise)-->
<!--        percent: 0, // percent starts from-->
<!--        percentage: true,-->
<!--        text: ""-->
<!--    }).circularProgress('animate', 50, 5000);-->
<!--});       -->
<!--</script>-->
<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/static/css/jquery.range-control.css" />
    <script src="/static/js/jquery.range-control.js"></script>
<script src="/static/js/jquery.nicescroll.min.js"></script>
<script src="/static/js/easyResponsiveTabs.js" type="text/javascript"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>

<script>
 $('#activity_id').on("change",function () {
    var as = $(this).find("option:selected").text();
    var ddd = as.replace(/ /g,'').replace(/[^a-zA-Z0-9 ]/g, "");
    $('.activity').hide();
    if (ddd == 'Select') {
      $('.activity').show();
    }else{
      $('.act_'+ddd).show();
    };
    var over_head = $('.due_count, li').length;
    var current = $('.current-date').length;
    var tmrw = $('.tmrw-date').length;
    var other = $('.other-tasks').length;
    //$("span.overdue_id", ".over_count").text(over_head);
   // $("span.current_id",".current-date").text(current);
   // $("span.tmrw_id",".tmrw-date").text(tmrw);
   // $("span.others_id",".other-tasks").text(other);
  });
</script>

<!--<script>-->
<!-- $('#category_dropdown').on("change",function () {-->
<!--    var as = $(this).find("option:selected").text();-->
<!--    var ddd = as.replace(/ /g,'').replace(/[^a-zA-Z0-9 ]/g, "");-->
<!--    $('.category').hide();-->
<!--    if (ddd == 'Select') {-->
<!--      $('.activity').show();-->
<!--    }else{-->
<!--      $('.cat_'+ddd).show();-->
<!--    };-->
<!--    -->
<!--  })-->
<!--</script>-->

<script>
   //Toggle
   
   	$('.user-menu').on('click',function(){
   		$('.dropdown-menu').slideDown(350);
   
   	});
   	$('.select-down').on('click',function(){
           $('.dropdown-menu1').slideDown(350);
   
       });
   
   	$(document).ready(function(e) {
   		/*Content Show/Hide */
   		$('.hide-cont').hide();
   		$('.close-cont').hide();
   		$('.view-cont').click(function(){
   			$('.hide-cont').slideDown(350);
   			$('.close-cont').show();
   			$('.view-cont').hide();
   		});
   		$('.close-cont').click(function(){
   			$('.hide-cont').slideUp(350);
   			$('.close-cont').hide();
   			$('.view-cont').show();
   		});
   		$(document).trigger( "click" );
   	});
   
   	$(document).click(function(){
   
   		$('.user-menu, .select-down').click(function(event){
   			event.stopPropagation();
   		});
   
   		$('.dropdown-menu, .dropdown-menu1').slideUp(350);
   
   	});
</script>
<script type="text/javascript">
   var expanded = false;
   
   function showCheckboxes() {
    var checkboxes = document.getElementById("checkboxes");
    if (!expanded) {
      checkboxes.style.display = "block";
      expanded = true;
    } else {
      checkboxes.style.display = "none";
      expanded = false;
    }
   }
      
</script>
<script>
   $(document).ready(function() {
     $("#boxscroll-pad").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   // First scrollable DIV
   $("#boxscroll-timeline").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   });
   $(document).resize(function() {
   $("#boxscroll-pad").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   // First scrollable DIV
   $("#boxscroll-timeline").niceScroll({cursorborder:"",cursorcolor:"#949494",boxzoom:true});
   });
</script>
<script type="text/javascript">
   $(document).ready(function () {
       $('#horizontalTab').easyResponsiveTabs({
           type: 'default', //Types: default, vertical, accordion
           width: 'auto', //auto or any width like 600px
           fit: true,   // 100% fit in a container
           closed: 'accordion', // Start closed if in accordion view
           activate: function(event) { // Callback function if tab is switched
               var $tab = $(this);
               var $info = $('#tabInfo');
               var $name = $('span', $info);
               $name.text($tab.text());
   
               $info.show();
           }
       });
   });
</script>
<script src="/static/js/jquery.simplePopup.js" type="text/javascript"></script>
<script type="text/javascript">
   $(document).ready(function(){
       $('#myBtn1').click(function(){
   	$('#pop3').simplePopup();
       });
   });
</script>
<!---datepicker script-->
<script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>
   $(function() {
   $( ".datepicker" ).datepicker({
   showOn: "button",
   buttonImage: "img/calender-icon.png",
   buttonImageOnly: true
   });
   });
</script>
<script src="/static/js/price-range.js"></script>
<script>
   $(function(){
   
       $('.hide-show').on('click',function(){
           var sl_id = $(this).attr('id')
           $('.right-task').hide();
           $('.div-'+sl_id).show();
           var progress = $('#xp_'+sl_id).val();
            $('.range-control-handle').css('left',progress+'%');

           $('.range-'+sl_id).rangeControl({

          max: 100,
         
          delim: '', 
         
          scale: {
            position: 'bottom',
            labels: true,
           // interval:1
          },
          className: ''
        });

            $('.range-'+sl_id).on('rangeControlSlide.rangeControlEvent', function () {
              // on slide event

                
             

             // $('#childAgeView').show().children().text(this.value.split(' ').join(', '));
              $('#slectedNumber').html($('.range-control-current-value').text());
             
            });

            $('.range-'+sl_id).on('rangeControlChange.rangeControlEvent', function () {
                 $('#slectedNumber').html($('.range-control-current-value').text());
            });

            $('.range-'+sl_id).on('rangeControlAddHandle.rangeControlEvent', function () {


            });


            var progress = $('#xp_'+sl_id).val();
            $('.range-control-handle').css('left',progress+'%');

       });
       $('.hide-show').first().trigger('click');
       $(".hide-show").addClass('active');
   }
   );
</script>
<script>
    $(function(){
        var key = "{{request.GET.task_slug}}"
        if (key !=''){
            $('.right-task').hide();
            $('.range-'+key).rangeControl({

                  max: 100,
                 
                  delim: '', 
                 
                  scale: {
                    position: 'bottom',
                    labels: true,
                   // interval:1
                  },
                  className: ''
            });

            $('.range-'+key).on('rangeControlSlide.rangeControlEvent', function () {
              // on slide event


                 // $('#childAgeView').show().children().text(this.value.split(' ').join(', '));
                  $('#slectedNumber').html($('.range-control-current-value').text());
                 
                });

                $('.range-'+key).on('rangeControlChange.rangeControlEvent', function () {
                     $('#slectedNumber').html($('.range-control-current-value').text());
                });

                $('.range-'+key).on('rangeControlAddHandle.rangeControlEvent', function () {


                });


            var progress = $('#xp_'+key).val();
            //if (progress != 'None'){
              //  alert("Task completion status is updated to "+progress+"% successfully");
            //}
            $('.range-control-handle').css('left',progress+'%');

            $(".div-"+key).show();
            $(".hide-show").addClass('active');
            
        }
        else{
        $('.hide-show').first().trigger('click');
        $(".hide-show").addClass('active');
        }
       });
</script>

<!--<script>-->
<!--        -->
<!--    $(document).ready(function(){-->

<!--        $("#updation_form").validate({-->
<!--            rules :-->
<!--            {-->
<!--                comment : {required:true},-->
<!--                -->
<!--            },-->
<!--            messages:-->
<!--            {-->
<!--                comment : {required : "Please enter an update"},-->
<!--            },-->
<!--            highlight: function (element) {-->
<!--                $(element).addClass('error')-->
<!--            },-->
<!--            unhighlight: function (element) {-->
<!--                $(element).removeClass('error')-->
<!--            },-->
<!--        });-->
<!--        });-->
<!--        -->
<!--</script>-->

</script>

<link rel="stylesheet" href="/static/css/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="/static/js/jquery.fancybox.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $(".iframe").fancybox({
        type: 'iframe'
    });
});
</script>

<script src="/static/js/jQuery-plugin-progressbar.js"></script>

<script>
$(".progress-bar").loading();
</script>

<script>
$(document).ready(function() {
    ids = "{{request.GET.div_id}}"
    if (ids){
    $('#'+ids).addClass('accordion-header-active');
    }
  });

</script>
<script>
    $(document).ready(function () {
        if (window.location.hash) {
            $(window.location.hash).trigger('click');
            $('html, body').animate({scrollTop:0},'1000');
        }
    });
</script>
<script>
function exportToForm(){
  var selectedText = document.getElementById("activate_tagator2").value;
  debugger;
  $("#dest li.data_row").each(function(){
    if ($(this).text().search(new RegExp(selectedText, "i")) < 0) {
        $(this).fadeOut();
     } else {
         $(this).show();
    }
});

}
</script>
<script>
jQuery("#activate_tagator2").keyup(function () {
    var filter = jQuery(this).val();
    jQuery("li.data_row").each(function () {
        if (jQuery(this).text().search(new RegExp(filter, "i")) < 0) {
            jQuery(this).hide();
        } else {
            jQuery(this).show()
        }
    });
});
</script>

<script>
    $(document).ready(function() {
        $('#category_dropdown').on('change',function(e){
        var category_id = $('#category_dropdown').val();
        var cat_list = Array()
        cat_list.push(category_id)
        $.ajax({
            url:'/managing/activites/',
            type:'GET',
            data:{'id':JSON.stringify(cat_list)},
            dataType:"json",
            success:function(data){
            var act = $('#activity_id').val();
                $('#activity_id option').remove();
                $('#activity_id').append('<option value="" >-----</option>')
                if (data.activity){
                    activity = data.activity
                   for (var i=0;i<activity.length;i++){
                    $('<option value="'+ activity[i]['name']+'">' + activity[i]['name'] + '</option>').appendTo('#activity_id');
                    }
                    $('#activity_id').val(act);
                }
            
            },
            error : function(){}
        });
        e.stopImmediatePropagation();
        return false;
      });
           });
</script>


{% endblock %}
